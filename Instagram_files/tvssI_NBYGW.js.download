;/*FB_PKG_DELIM*/

__d("BaseFileSelector.react",["Promise","promiseDone","react","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));e=i;var k=e.useCallback,l=e.useEffect,m=e.useRef;function n(a){return a.map(function(a){if(a.indexOf("/")!==-1||a[0]===".")return a;c("recoverableViolation")('Accept parameter "'+a+'" for BaseFileSelector is being interpreted as a file extension since it has no slash (/), but file extensions must start with a period (.)',"comet_ui");return"."+a}).join(",")}function a(a){var d=a.accept,e=a.children,f=a.multiple;f=f===void 0?!1:f;var g=a.onFilesSelected,i=m(null);l(function(){var a=i.current;if(a!=null){var b=function(a){a.stopPropagation()};a.addEventListener("click",b);return function(){a.removeEventListener("click",b)}}},void 0);a=k(function(){i.current!=null&&i.current.click()},[]);var o=k(function(a){var d=g(a.currentTarget.files);d instanceof(h||(h=b("Promise")))&&c("promiseDone")(d);a.currentTarget.value=""},[g]);return j.jsxs(j.Fragment,{children:[j.jsx("input",babelHelpers["extends"]({accept:d!=null?n(d):void 0},{className:"x1s85apg"},{multiple:f,onChange:o,ref:i,type:"file"})),e(a)]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("mlcEditableSubscription",[],(function(a,b,c,d,e,f){"use strict";function a(a){return{initialValueFn:function(){return a.isEditable()},subscribe:function(b){return a.registerEditableListener(b)}}}f["default"]=a}),66);
__d("useCometLexicalSubscription",["react","useUnsafeRef_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=i||d("react");var j=b.useLayoutEffect,k=b.useState;function a(a){var b=(h||(h=c("useUnsafeRef_DEPRECATED")))(a.initialValueFn()),d=k(b.current),e=d[0],f=d[1];j(function(){var c=a.initialValueFn,d=a.subscribe;c=c();b.current!==c&&(b.current=c,f(c));return d(function(a){b.current=a,f(a)})},[a]);return e}g["default"]=a}),98);
__d("CometLexicalContentEditable.react",["CometLexicalContentEditableCommands","Lexical","LexicalComposerContext","LexicalContentEditable","mlcEditableSubscription","react","stylex","useCometLexicalSubscription"],(function(a,b,c,d,e,f,g){"use strict";var h=["ariaAutoComplete","ariaDescribedBy","ariaExpanded","ariaLabel","ariaLabelledBy","ariaMultiline","ariaOwneeID","ariaRequired","autoCapitalize","autoComplete","autoCorrect","contentEditableRef","isInitiallyFocused","role","spellCheck","tabIndex","webDriverTestID","xstyle"],i,j,k=j||(j=d("react"));b=j;var l=b.useEffect,m=b.useLayoutEffect,n=b.useMemo,o=b.useState,p={editor:{color:"xzsf02u",outline:"x1a2a7pz",position:"x1n2onr6",textAlign:"x14wi4xw",$$css:!0}};function a(a){var b=a.ariaAutoComplete,e=a.ariaDescribedBy,f=a.ariaExpanded,g=a.ariaLabel,j=a.ariaLabelledBy,q=a.ariaMultiline,r=a.ariaOwneeID,s=a.ariaRequired,t=a.autoCapitalize,u=a.autoComplete,v=a.autoCorrect,w=a.contentEditableRef,x=a.isInitiallyFocused,y=x===void 0?!1:x;x=a.role;x=x===void 0?"textbox":x;var z=a.spellCheck;z=z===void 0?!1:z;var A=a.tabIndex,B=a.webDriverTestID;B=a.xstyle;a=babelHelpers.objectWithoutPropertiesLoose(a,h);var C=d("LexicalComposerContext").useLexicalComposerContext(),D=C[0];C=o(void 0);var E=C[0],F=C[1];C=o(void 0);var G=C[0],H=C[1];C=c("useCometLexicalSubscription")(n(function(){return c("mlcEditableSubscription")(D)},[D]));m(function(){return D.registerCommand(d("CometLexicalContentEditableCommands").COMET_LEXICAL_ARIA_COMMAND,function(a){Object.prototype.hasOwnProperty.call(a,"activeDescendantID")&&F(a.activeDescendantID);Object.prototype.hasOwnProperty.call(a,"controlsID")&&H(a.controlsID);return!1},d("Lexical").COMMAND_PRIORITY_EDITOR)},[D]);l(function(){y&&D.focus(function(){var a=document.activeElement,b=D.getRootElement();(!(b!=null&&b.contains(a))||b!=null||a==null)&&(b==null||b.focus({preventScroll:!0}))})},[D,y]);return k.jsx(d("LexicalContentEditable").ContentEditable,babelHelpers["extends"]({ariaActiveDescendant:E!=null?E:void 0,ariaAutoComplete:b,ariaControls:G!=null?G:void 0,ariaDescribedBy:e,ariaExpanded:f,ariaLabel:(E=g==null?void 0:g.toString())!=null?E:void 0,ariaLabelledBy:j,ariaMultiline:q,ariaOwns:r,ariaRequired:s!=null?s:void 0,autoCapitalize:t,autoComplete:u,autoCorrect:v,className:(i||(i=c("stylex")))(p.editor,B)+" "+(C?"notranslate":""),"data-testid":void 0,ref:w,role:x,spellCheck:z,suppressContentEditableWarning:!0,tabIndex:A},a))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometLexicalEmojiNode",["Lexical"],(function(a,b,c,d,e,f,g){"use strict";var h=9;b=16;c=20;var i=16,j=function(b){function a(a,c,d,e,f){e===void 0&&(e=i);a=b.call(this,a,f)||this;a.__src=d;a.__rawText=c;a.__size=e;return a}babelHelpers.inheritsLoose(a,b);a.getType=function(){return"emoji"};a.clone=function(b){return new a(b.__text,b.__rawText,b.__src,b.__size,b.__key)};a.importJSON=function(a){a=k(a.text,a.rawText,a.src,a.size);return a};var c=a.prototype;c.exportJSON=function(){return babelHelpers["extends"]({},b.prototype.exportJSON.call(this),{rawText:this.__rawText,size:this.__size,src:this.__src,type:"emoji"})};c.getRawText=function(){var a=this.getLatest();return a.__rawText};c.createDOM=function(){var a=this.__text,b=this.__size,c=this.__src,d=document.createElement("span"),e=document.createElement("span"),f=d.style;f.cursor="default";d.className="x1xsqp64 xiy17q3 x1o6pynw x19co3pv xdj266r xjn30re xat24cr x1hb08if x2b8uid";d.setAttribute("data-testid","emoji");c!=null&&(f.backgroundImage="url("+c+")",f.backgroundSize=b+"px "+b+"px");a!==this.__rawText&&(d.style.width="calc("+b+"px + 0.3em)",d.style.height=b+"px",d.className="x1xsqp64 xiy17q3 x1o6pynw x19co3pv xdj266r xjn30re xat24cr x1hb08if x2b8uid x1rg5ohu x6ikm8r x10wlt62 xmziwt1 xuxw1ft",d.setAttribute("spellcheck","false"),e.style.fontFamily='Courier, "Courier New", Menlo, Monaco, monospace',e.style.fontSize="15px",e.style.letterSpacing=b/(h*a.length)-1+"ch");e.textContent=a;e.className="xexx8yu xcaqkgz x18d9i69 xbwkkl7 x3jgonx x1bhl96m";d.appendChild(e);return d};c.updateDOM=function(a,b){a=b.firstChild;if(a==null)return!0;var c=this.__text;a.textContent!==c&&(a.textContent=c);b.style.backgroundSize=this.__size+"px "+this.__size+"px";return!1};c.setSize=function(a){var b=this.getWritable();b.__size=a};c.selectionTransform=function(a,b){var c=this.__text;if(c===this.__rawText||!d("Lexical").$isRangeSelection(a)||a.is(b))return;a=a.focus;var e=b.focus,f=c.length,g=b.isCollapsed();if(e.offset===0||e.offset===c.length||a.is(e))return;a.isBefore(e)?e.set(e.key,f,"text"):e.set(e.key,0,"text");g&&b.anchor.set(e.key,e.offset,"text")};return a}(d("Lexical").TextNode);function a(a){return a instanceof j}function k(a,b,c,d){return new j(a,b,c,d).setMode("token")}g.UFI_EMOJI_SIZE=b;g.COMPOSER_EMOJI_SIZE_LARGE=c;g.COMPOSER_EMOJI_SIZE_SMALL=i;g.EmojiNode=j;g.$isEmojiNode=a;g.$createEmojiNode=k}),98);
__d("CometLexicalPlaceholder.react",["react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={placeholder:{color:"xi81zsa",insetInlineStart:"x1o0tod",overflowX:"x6ikm8r",overflowY:"x10wlt62",pointerEvents:"x47corl",position:"x10l6tqk",textOverflow:"xlyipyv",top:"x13vifvy",userSelect:"x87ps6o",whiteSpace:"xuxw1ft",width:"xh8yej3",$$css:!0}};function a(a){var b=a.children;a=a.xstyle;return j.jsx("div",babelHelpers["extends"]({children:b},(h||(h=c("stylex"))).props(k.placeholder,a)))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("E2EELinkPreviewXMADataStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({LOADED:1,LOADING:2,DISABLED:3});f["default"]=a}),66);
__d("IGDComposerEmojiButton.react",["IGDThreadListNewMessageLoggingDataContext","JSResourceForInteraction","MessengerWebUXLogger","Promise","ReQL","ReQLSuspense","cr:21298","cr:21299","getInstamadilloLoggingExtraData","promiseDone","react","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||d("react"),l=c("JSResourceForInteraction")("IGDAddEmojiToComposerForLexical").__setRef("IGDComposerEmojiButton.react");function a(a){var e=d("react-compiler-runtime").c(22),g=a.editor,j=a.threadKey,m=(i||(i=c("useReStore")))();e[0]!==m.tables.threads||e[1]!==j?(a=function(){return d("ReQL").fromTableAscending(m.tables.threads).getKeyRange(j)},e[0]=m.tables.threads,e[1]=j,e[2]=a):a=e[2];var n;e[3]!==m||e[4]!==j?(n=[m,j],e[3]=m,e[4]=j,e[5]=n):n=e[5];a=d("ReQLSuspense").useFirst(a,n,f.id+":41");e[6]!==g?(n=function(a){c("promiseDone")(l.load().then(function(c){c(a,g);return(h||(h=b("Promise"))).resolve()}))},e[6]=g,e[7]=n):n=e[7];n=n;var o=c("MessengerWebUXLogger").useInteractionLogger(),p=d("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceIdContext(),q;e[8]!==a?(q=c("getInstamadilloLoggingExtraData")(a),e[8]=a,e[9]=q):q=e[9];var r=q;e[10]!==p||e[11]!==r?(a={eventName:"composer_emoji_picker_button_rendered",extraData:r,flowInstanceId:p},e[10]=p,e[11]=r,e[12]=a):a=e[12];q=c("MessengerWebUXLogger").useImpressionLoggerRef(a);e[13]!==p||e[14]!==r||e[15]!==o?(a=function(){o==null||o({eventName:"composer_open_emoji_picker",extraData:r,flowInstanceId:p})},e[13]=p,e[14]=r,e[15]=o,e[16]=a):a=e[16];a=a;var s;e[17]!==a||e[18]!==q||e[19]!==n||e[20]!==j?(s=b("cr:21298")?k.jsx(b("cr:21298"),{logClickEvent:a,logImpressionEventRef:q,onSelect:n}):b("cr:21299")?k.jsx(b("cr:21299"),{logClickEvent:a,logImpressionEventRef:q,onSelect:n,threadKey:j}):null,e[17]=a,e[18]=q,e[19]=n,e[20]=j,e[21]=s):s=e[21];return s}g["default"]=a}),98);
__d("IGDComposerIconSendButton.react",["fbt","IGDChatTabsEnv","IGDSBox.react","IGDSIconButton.react","IGDSMessagesFilledIcon.react","PolarisUA","qex","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k={chatTabSendButtonDesktop:{marginInlineEnd:"x1mpyi22",$$css:!0},sendButton:{alignSelf:"x7fd4wk",backgroundColor:"x1tu34mt",borderStartStartRadius:"x12ol6y4",borderStartEndRadius:"x180vkcf",borderEndEndRadius:"x1khw62d",borderEndStartRadius:"x709u02",height:"x90ne7k",marginBottom:"xu06os2",width:"xvni27",$$css:!0},sendButtonDesktop:{marginBottom:"xjpr12u",marginInlineEnd:"xnnr8r",$$css:!0},sendButtonDisabled:{cursor:"x1h6gzvc",opacity:"xuzhngd",$$css:!0},sendButtonIcon:{marginTop:"x1gslohp",$$css:!0},sendButtonMobile:{marginBottom:"xat24cr",$$css:!0},sendButtonOnHover:{":hover_filter":"x1spsku0",$$css:!0},sendButtonPrismIcon:{marginTop:"xdj266r",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(8),e=a.hidden,f=a.isDisabled,g=a.isEdit,i=a.onClick;a=a.testid;var l=d("IGDChatTabsEnv").useIsChatTabsDisplay(),m;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(m=c("qex")._("3938"),b[0]=m):m=b[0];m=m;b[1]!==e||b[2]!==l||b[3]!==f||b[4]!==g||b[5]!==i||b[6]!==a?(m=e!==!0&&j.jsx(c("IGDSIconButton.react"),{"data-testid":void 0,isDisabled:f,label:h._(/*BTDS*/"Send"),onClick:i,xstyle:[k.sendButton,f?k.sendButtonDisabled:k.sendButtonOnHover,d("PolarisUA").isMobile()&&k.sendButtonMobile,!d("PolarisUA").isMobile()&&g===!0&&[k.sendButtonDesktop,l&&k.chatTabSendButtonDesktop]],children:j.jsx(c("IGDSBox.react"),{xstyle:[k.sendButtonIcon,m===!0&&k.sendButtonPrismIcon],children:j.jsx(c("IGDSMessagesFilledIcon.react"),{alt:h._(/*BTDS*/"Send"),color:"web-always-white",size:18})})}),b[1]=e,b[2]=l,b[3]=f,b[4]=g,b[5]=i,b[6]=a,b[7]=m):m=b[7];return m}g["default"]=a}),226);
__d("MWXIconDocument",["MWXSvgIcon","SVGIcon","cr:22296","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:22296")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXIconPhotoPlus",["MWXSvgIcon","SVGIcon","cr:22434","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:22434")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXVideoStatusListener.react",["getErrorNameFromMediaErrorCode","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useEffect;function a(a){var b=a.onError,d=a.onLoad,e=a.videoRef;i(function(){var a=e==null?void 0:e.current;function f(){d==null||d()}function g(a){a=a.currentTarget;a=a.error;a=c("getErrorNameFromMediaErrorCode")(a==null?void 0:a.code);b==null||b(a)}if((a==null?void 0:a.readyState)!=null&&a.readyState>=2){f();return}a==null||a.addEventListener("canplay",f);a==null||a.addEventListener("error",g);return function(){a==null||a.removeEventListener("canplay",f),a==null||a.removeEventListener("error",g)}},[b,d,e]);return null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXComposerAttachmentPreview.react",["fbt","MWXCircleButton.react","MWXIconCross","MWXIconDocument","MWXIconPhotoPlus","MWXIconStrict.react","MWXImage.react","MWXPressable.react","MWXText.react","MWXTooltip.react","MWXVideoStatusListener.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i,l=k.useEffect,m=k.useRef,n={cancelButton:{insetInlineEnd:"xgvahye",left:null,right:null,position:"x10l6tqk",top:"x1v4kod4",$$css:!0},card:{marginInlineEnd:"xbmvrgn",position:"x1n2onr6",$$css:!0},contentWrapper:{backgroundColor:"x1qhmfi1",borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",height:"xsdox4t",minWidth:"x900493",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},filePreview:{alignItems:"x6s0dn4",boxSizing:"x9f619",display:"x78zum5",rowGap:"xp1r0qw",columnGap:"xtqikln",height:"xsdox4t",maxWidth:"x1kbpmyu",paddingTop:"xz9dl7a",paddingInlineEnd:"xpdmqnj",paddingBottom:"xsag5q8",paddingInlineStart:"x1g0dm76",width:"xezivpi",$$css:!0},imagePreview:{alignItems:"x6s0dn4",display:"x78zum5",height:"xsdox4t",justifyContent:"xl56j7k",width:"x1useyqa",$$css:!0},playIcon:{insetInlineStart:"xbudbmw",left:null,right:null,marginInlineStart:"x18xomjl",marginTop:"x7wgvq7",position:"x10l6tqk",top:"xwa60dl",$$css:!0}};function o(a){var b=a.hasError;b=b===void 0?!1:b;a=a.progress;if(a===1||a==null)return null;var c=4;b=b?"var(--negative)":"var(--chat-composer-button-color, var(--accent))";a=Math.ceil(a*100);var d=(c/2).toString();d="M 0,"+d+" L 100,"+d;return j.jsxs("svg",{"aria-hidden":!0,className:"x15mokao x1ga7v0g xde0f50 x15x8krk x1ey2m1c x1o0tod x10l6tqk xh8yej3",preserveAspectRatio:"none",style:{height:c.toString()},viewBox:"0 0 100 "+c.toString(),children:[j.jsx("path",{d:d,stroke:"rgba(0,0,0,.5)",strokeLinecap:"round",strokeWidth:c.toString()}),j.jsx("path",{d:d,stroke:b,strokeLinecap:"round",strokeWidth:(a===0?0:c).toString(),style:{strokeDasharray:"100",strokeDashoffset:(100-a).toString(),transition:"stroke-dashoffset .5s, stroke .5s"}})]})}o.displayName=o.name+" [from "+f.id+"]";function p(a){var b=a.children,e=a.hasError;e=e===void 0?!1:e;var f=a.onCancel,g=a.progress;a=a.testid;return j.jsxs(d("react-strict-dom").html.div,{"data-testid":void 0,style:n.card,children:[j.jsxs(d("react-strict-dom").html.div,{style:n.contentWrapper,children:[b,j.jsx(o,{hasError:e,progress:g})]}),f!=null&&j.jsx(d("react-strict-dom").html.div,{style:n.cancelButton,children:j.jsx(c("MWXCircleButton.react"),{icon:c("MWXIconCross"),label:h._(/*BTDS*/"Cancel"),onPress:f,size:24,type:"overlay"})})]})}p.displayName=p.name+" [from "+f.id+"]";function a(a){var b=a.hasError;b=b===void 0?!1:b;var d=a.onCancel,e=a.onError,f=a.onLoad,g=a.progress;a=a.src;return j.jsx(p,{hasError:b,onCancel:d,progress:g,testid:void 0,children:j.jsx(c("MWXImage.react"),{objectFit:"contain",onError:e,onLoad:f,src:a,xstyle:n.imagePreview})})}a.displayName=a.name+" [from "+f.id+"]";function b(a){var b=a.hasError;b=b===void 0?!1:b;var e=a.onCancel,f=a.onError,g=a.onLoad,h=a.progress;a=a.src;var i=m(null);return j.jsxs(p,{hasError:b,onCancel:e,progress:h,testid:void 0,children:[j.jsx(c("MWXVideoStatusListener.react"),{onError:f,onLoad:g,videoRef:i}),j.jsx("video",babelHelpers["extends"]({className:"xl1xv1r"},{height:"48",ref:i,src:a,width:"48"})),j.jsx(d("react-strict-dom").html.div,{style:n.playIcon,children:j.jsx(c("MWXImage.react"),{src:"/images/video/play_24dp.png"})})]})}b.displayName=b.name+" [from "+f.id+"]";function e(a){var b=a.hasError;b=b===void 0?!1:b;var e=a.onCancel,f=a.onLoad,g=a.progress;a=a.title;l(function(){f==null||f()},[f]);return j.jsx(p,{hasError:b,onCancel:e,progress:g,testid:void 0,children:j.jsx(c("MWXTooltip.react"),{position:"above",tooltip:a,children:j.jsxs(d("react-strict-dom").html.div,{style:n.filePreview,children:[j.jsx(c("MWXIconStrict.react"),{icon:c("MWXIconDocument"),isDecorative:!0,size:20}),j.jsx(c("MWXText.react"),{numberOfLines:2,type:"bodyLink3",children:a})]})})})}e.displayName=e.name+" [from "+f.id+"]";function q(a){var b=a.isDisabled;a=a.onPress;var d=h._(/*BTDS*/"Upload another file");return j.jsx(p,{children:j.jsx(c("MWXPressable.react"),{"aria-label":d,disabled:b,onPress:a,testid:void 0,xstyle:n.imagePreview,children:j.jsx(c("MWXIconStrict.react"),{color:b?"disabled":"primary",icon:c("MWXIconPhotoPlus"),size:24})})})}q.displayName=q.name+" [from "+f.id+"]";g.MWXComposerImageAttachmentPreview=a;g.MWXComposerVideoAttachmentPreview=b;g.MWXComposerFileAttachmentPreview=e;g.MWXComposerAddAttachmentButton=q}),226);
__d("MWXComposerButtonContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({});g["default"]=b}),98);
__d("MWXComposerRow.react",["react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={padding12:{paddingTop:"xz9dl7a",paddingInlineEnd:"xpdmqnj",paddingBottom:"xsag5q8",paddingInlineStart:"x1g0dm76",$$css:!0},padding4:{paddingTop:"x1iorvi4",paddingInlineEnd:"x11lfxj5",paddingBottom:"xjkvuk6",paddingInlineStart:"x135b78x",$$css:!0},padding6:{paddingTop:"x1yrsyyn",paddingInlineEnd:"x1icxu4v",paddingBottom:"x10b6aqq",paddingInlineStart:"x25sj25",$$css:!0},row:{alignItems:"xpqajaz",boxSizing:"x9f619",display:"x78zum5",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",position:"x1n2onr6",width:"xh8yej3",$$css:!0},scrollable:{contain:"x41o525",overflowX:"xw2csxc",overflowY:"x1odjw0f",$$css:!0}};function a(a){var b=a.children,c=a["data-testid"];c=a.padding;c=c===void 0?0:c;var e=a.scrollable;a=a.xStyle;return i.jsx(d("react-strict-dom").html.div,{"data-testid":void 0,style:[j.row,c===12&&j.padding12,c===4&&j.padding4,c===6&&j.padding6,e===!0&&j.scrollable,a],children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXComposerHeader.react",["MWXComposerButtonContext.react","MWXComposerRow.react","MWXText.react","MWXTextPairing.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={body:{alignItems:"x6s0dn4",paddingBottom:"x1120s5i",paddingInlineStart:"x1onr9mi",paddingInlineEnd:"x1pic42t",paddingLeft:null,paddingRight:null,paddingTop:"xz9dl7a",$$css:!0},border:{borderTopColor:"x8cjs6t",borderTopStyle:"x13fuv20",borderTopWidth:"x178xt8z",$$css:!0},rightAddon:{marginInlineStart:"xvc5jky",$$css:!0}},k={color:"secondary",size:24};function a(a){var b=a.bodyText,e=a.bodyTextColor,f=a.bodyTextType,g=a["data-testid"];g=a.hasTopBorder;g=g===void 0?!1:g;var h=a.headlineText,l=a.headlineTextType,m=a.leftAddon,n=a.level;n=n===void 0?3:n;var o=a.loadingIndicator,p=a.rightAddon,q=a.subtext;a=a.xstyle;return o!=null?i.jsx(c("MWXComposerRow.react"),{"data-testid":void 0,xStyle:[j.body],children:o}):i.jsxs(c("MWXComposerRow.react"),{"data-testid":void 0,xStyle:[j.body,g&&j.border,a],children:[m!=null&&m,(b!=null||q!=null||h!=null)&&i.jsx(c("MWXTextPairing.react"),{body:b!=null&&f!=null?i.jsx(c("MWXText.react"),{color:e,type:f,children:b}):b!=null?i.jsx(c("MWXText.react"),{color:e,type:"body4",children:b}):void 0,headline:h!=null&&l!=null?i.jsx(c("MWXText.react"),{isSemanticHeading:!0,type:l,children:h}):h!=null?i.jsx(c("MWXText.react"),{isSemanticHeading:!0,type:"headline4",children:h}):void 0,level:n,meta:q}),p!=null&&i.jsx(c("MWXComposerButtonContext.react").Provider,{value:k,children:i.jsx(d("react-strict-dom").html.div,{style:j.rightAddon,children:p})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXComposerIconButton.react",["MWXCircleButton.react","MWXComposerButtonContext.react","MWXThreadThemeColor","MWXTooltip.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h=["ref"],i=["color","disableTooltip","isShown","size","type","wrapperStyle","wrapperXStyle"],j,k=j||(j=d("react")),l=j.useContext,m={horizontalPaddingSmall:{paddingInlineStart:"xyiysdx",paddingInlineEnd:"x14vy60q",paddingLeft:null,paddingRight:null,$$css:!0},layoutWrapper:{flexGrow:"x1c4vz4f",flexShrink:"x2lah0s",transition:"x1el4u5y",$$css:!0},shown:{transform:"x1158fpu",$$css:!0}};function a(a){var b=a.ref;a=babelHelpers.objectWithoutPropertiesLoose(a,h);var e=a.color,f=a.disableTooltip,g=a.isShown,j=a.size,o=a.type;o=o===void 0?"deemphasized":o;var p=a.wrapperStyle,q=a.wrapperXStyle,r=babelHelpers.objectWithoutPropertiesLoose(a,i),s=l(c("MWXComposerButtonContext.react")),t=s.color,u=s.iconRatio;u=u===void 0?"medium":u;var v=s.paddingHorizontal;v=v===void 0?"none":v;s=s.size;s=s===void 0?36:s;return k.jsx(d("react-strict-dom").html.div,{style:[v==="small"&&m.horizontalPaddingSmall,m.layoutWrapper,[q,p],g===!0&&m.shown],children:k.jsx(n,{disableTooltip:f,label:a.label,children:k.jsx(c("MWXCircleButton.react"),babelHelpers["extends"]({},r,{color:(v=e!=null?e:t)!=null?v:d("MWXThreadThemeColor").mwxThreadThemeColor("var(--chat-composer-button-color, var(--accent))"),iconRatio:u,ref:b,size:j!=null?j:s,type:o}))})})}a.displayName=a.name+" [from "+f.id+"]";function n(a){var b=a.children,d=a.disableTooltip;a=a.label;return d===!0?b:k.jsx(c("MWXTooltip.react"),{position:"above",tooltip:a,children:b})}n.displayName=n.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXComposerInputArea.react",["MWXComposerButtonContext.react","MWXComposerRow.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={colors:{backgroundColor:"x16sw7j7",borderStartStartRadius:"x12ol6y4",borderStartEndRadius:"x180vkcf",borderEndEndRadius:"x1khw62d",borderEndStartRadius:"x709u02",borderTopWidth:"x178xt8z",borderInlineEndWidth:"x1lun4ml",borderBottomWidth:"xso031l",borderInlineStartWidth:"xpilrb4",marginInlineEnd:"xbelrpt",marginInlineStart:"xdzw4kq",$$css:!0},flexLayout:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",minWidth:"x13qp9f6",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0}},k={iconRatio:"large",paddingHorizontal:"none",size:28};function a(a){var b=a.children,e=a.header;a=a.xstyle;return i.jsx(c("MWXComposerButtonContext.react").Provider,{value:k,children:i.jsxs(d("react-strict-dom").html.div,{style:[j.colors,j.flexLayout,a],children:[e,i.jsx(c("MWXComposerRow.react"),{padding:4,children:b})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXComposerSpinner.react",["MWXComposerButtonContext.react","MWXSpinner.react","MWXTooltip.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h=["color","label","size","spinnerSize","wrapperStyle","wrapperXStyle"],i,j=i||(i=d("react")),k=i.useContext,l={horizontalPaddingSmall:{paddingInlineStart:"xyiysdx",paddingInlineEnd:"x14vy60q",paddingLeft:null,paddingRight:null,$$css:!0},layoutWrapper:{alignItems:"x6s0dn4",display:"x78zum5",flexGrow:"x1c4vz4f",flexShrink:"x2lah0s",justifyContent:"xl56j7k",$$css:!0}};function a(a){var b=a.color;b=b===void 0?"blue":b;var e=a.label,f=a.size,g=a.spinnerSize;g=g===void 0?20:g;var i=a.wrapperStyle,m=a.wrapperXStyle;a=babelHelpers.objectWithoutPropertiesLoose(a,h);var n=k(c("MWXComposerButtonContext.react")),o=n.paddingHorizontal;o=o===void 0?"none":o;n=n.size;n=n===void 0?36:n;f=(f!=null?f:n)+"px";return j.jsx(d("react-strict-dom").html.div,{style:[o==="small"&&l.horizontalPaddingSmall,l.layoutWrapper,[m,i],[{height:f,width:f}]],children:j.jsx(c("MWXTooltip.react"),{position:"above",tooltip:e,children:j.jsx(c("MWXSpinner.react"),babelHelpers["extends"]({color:b,size:g},a))})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXComposerTextEditor.react",["CometLexicalContentEditable.react","CometLexicalPlaceholder.react","LexicalErrorBoundary","LexicalPlainTextPlugin","MWXRowItem.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={padding:{marginBottom:"x12nagc",marginInlineEnd:"xbelrpt",marginInlineStart:"xdzw4kq",marginTop:"x1gslohp",maxHeight:"xctk3hg",minWidth:"x900493",overflowY:"x1odjw0f",paddingTop:"xexx8yu",paddingInlineEnd:"xyri2b",paddingBottom:"x18d9i69",paddingInlineStart:"x1c1uobl",$$css:!0}};function a(a){var b=a.children,e=a.contentEditableProps,f=a.placeholderText;a=a.testid;f=f==null?{}:{"aria-placeholder":f,placeholder:i.jsx(c("CometLexicalPlaceholder.react"),{children:f})};a=i.jsx(c("CometLexicalContentEditable.react"),babelHelpers["extends"]({tabIndex:0,webDriverTestID:a},f,e));return i.jsxs(c("MWXRowItem.react"),{expanding:!0,verticalAlign:"center",xstyle:j.padding,children:[i.jsx(d("LexicalPlainTextPlugin").PlainTextPlugin,{ErrorBoundary:d("LexicalErrorBoundary").LexicalErrorBoundary,contentEditable:a}),b]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXComposer.react",["LexicalComposerContext","LexicalHistoryPlugin","MWXComposerAttachmentPreview.react","MWXComposerHeader.react","MWXComposerIconButton.react","MWXComposerInputArea.react","MWXComposerRow.react","MWXComposerSpinner.react","MWXComposerTextEditor.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useMemo,k={composer:{backgroundColor:"xt5xv9l",contain:"x6wvzqs",$$css:!0},flexLayout:{alignItems:"xpqajaz",display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1c4vz4f",flexShrink:"xs83m0k",minWidth:"x13qp9f6",$$css:!0},padding:{paddingTop:"xz9dl7a",paddingBottom:"xsag5q8",paddingInlineStart:"x135b78x",paddingInlineEnd:"x11lfxj5",paddingLeft:null,paddingRight:null,$$css:!0}};function a(a){var b=a.children,e=a.editor,f=a.header;a=a.testid;var g=d("LexicalComposerContext").createLexicalComposerContext();a=j(function(){return[e,g]},[e,g]);return i.jsxs(d("LexicalComposerContext").LexicalComposerContext.Provider,{value:a,children:[i.jsxs(d("react-strict-dom").html.div,{style:[k.composer,k.flexLayout],children:[f,i.jsx(c("MWXComposerRow.react"),{"data-testid":void 0,xStyle:k.padding,children:b})]}),i.jsx(d("LexicalHistoryPlugin").HistoryPlugin,{})]})}a.displayName=a.name+" [from "+f.id+"]";b={Add:d("MWXComposerAttachmentPreview.react").MWXComposerAddAttachmentButton,FilePreview:d("MWXComposerAttachmentPreview.react").MWXComposerFileAttachmentPreview,ImagePreview:d("MWXComposerAttachmentPreview.react").MWXComposerImageAttachmentPreview,VideoPreview:d("MWXComposerAttachmentPreview.react").MWXComposerVideoAttachmentPreview};g.Composer=a;g.Button=c("MWXComposerIconButton.react");g.TextEditor=c("MWXComposerTextEditor.react");g.InputArea=c("MWXComposerInputArea.react");g.Header=c("MWXComposerHeader.react");g.Row=c("MWXComposerRow.react");g.Spinner=c("MWXComposerSpinner.react");g.Attachments=b}),98);
__d("issueEditInstamadilloMessage",["IGDBridgedAPI"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("IGDBridgedAPI").sendEditMessage(a)}g["default"]=a}),98);
__d("LSEditMessage",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(12).fetch([[[a[0]]],"messageId"]).next().then(function(c,d){var e=c.done;c=c.value;return e?0:(d=c.item,(b.i64.eq(a[1],b.i64.cast([0,20]))||b.i64.le(d.authorityLevel,a[1]))&&b.i64.le(a[3],b.i64.cast([0,5]))?b.forEach(b.filter(b.db.table(12).fetch([[[d.threadKey,d.timestampMs,a[0]]]]),function(c){return b.i64.eq(c.threadKey,d.threadKey)&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(c.timestampMs,d.timestampMs)&&c.messageId===a[0]}),function(c){var d=c.update;c.item;return d({authorityLevel:a[1],editCount:a[3],text:a[2],sendStatus:b.i64.eq(a[1],b.i64.cast([0,20]))?b.i64.cast([0,1]):b.i64.cast([0,2]),sendStatusV2:b.i64.eq(a[1],b.i64.cast([0,20]))?b.i64.cast([0,1]):b.i64.cast([0,2])})}):b.resolve())})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxEditMessageStoredProcedure";a.__tables__=["messages"];e.exports=a}),null);
__d("LSOptimisticEditMessage",["LSEditMessage","LSIssueNewTaskAndGetTaskID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.db.table(12).fetch([[[a[0]]],"messageId"]).next().then(function(e,f){var g=e.done;e=e.value;return g?0:(f=e.item,d[2]=f.editCount,d[1]=c.i64.of_float(Date.now()),c.i64.lt(d[2]==null?c.i64.cast([0,0]):d[2],c.i64.cast([0,5]))&&c.i64.le(d[1],c.i64.add(f.timestampMs,c.i64.cast([0,9e5])))?c.sequence([function(e){return c.storedProcedure(b("LSEditMessage"),f.messageId,c.i64.cast([0,20]),a[1],c.i64.add(d[2]==null?c.i64.cast([0,0]):d[2],c.i64.cast([0,1])))},function(e){return d[3]=new c.Map(),d[3].set("message_id",a[0]),d[3].set("text",a[1]),c.i64.gt(c.i64.cast([0,0]),c.i64.cast([0,0]))?(d[7]=c.i64.of_float(Date.now()),d[4]=c.i64.add(d[7],c.i64.cast([0,0]))):d[4]=c.i64.cast([0,0]),d[5]=c.toJSON(d[3]),c.storedProcedure(b("LSIssueNewTaskAndGetTaskID"),"edit_message",c.i64.cast([0,742]),d[5],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,d[4],c.i64.cast([0,0])).then(function(a){return a=a,d[6]=a[0],a})},function(a){return void 0!==void 0?(d[7]=c.i64.of_float(Date.now()),c.forEach(c.db.table(2).fetch([[[d[6]]]]),function(a){var b=a.update;a.item;return b({dataTraceId:void 0,initTraceTimestampMs:d[7]})})):c.resolve()}]):c.resolve(void 0!==void 0?0:0))})},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticEditMessageStoredProcedure";a.__tables__=["messages","pending_tasks"];e.exports=a}),null);
__d("LSOptimisticEditMessageStoredProcedure",["LSOptimisticEditMessage","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSOptimisticEditMessage"),e.messageId,e.text);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("useMAWGetSendEditActionforOpen",["LSFactory","LSOptimisticEditMessageStoredProcedure","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useCallback;function a(){var a=(h||(h=c("useReStore")))();return j(function(b,d){return c("promiseDone")(a.runInTransaction(function(a){return c("LSOptimisticEditMessageStoredProcedure")(c("LSFactory")(a),{messageId:b,text:d})},"readwrite",void 0,void 0,f.id+":27"))},[a])}g["default"]=a}),98);
__d("MLCKeyBindingUtil",["UserAgent"],(function(a,b,c,d,e,f,g){"use strict";var h=c("UserAgent").isPlatform("Mac OS X");b=String.fromCodePoint(h?8984:8963);function a(a){return a!==null&&(h?a.metaKey:a.ctrlKey)}g.COMMAND_UNICODE=b;g.hasCommandModifier=a}),98);
__d("useMWXComposerClearAndSendOnEnter",["Lexical","MLCKeyBindingUtil","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useInsertionEffect,k=b.useLayoutEffect,l=b.useRef,m=250;function a(a,b){var e=a.clearReplyState,f=a.editor,g=a.onSend,h=l(null),n=l(b);j(function(){n.current=b},[b]);var o=i(function(){var a=g(n.current);e==null||e();(a||!1)&&f.dispatchCommand(d("Lexical").CLEAR_EDITOR_COMMAND)},[g,e,f]);k(function(){return f.registerCommand(d("Lexical").KEY_ENTER_COMMAND,function(a){if(a!=null&&!a.shiftKey&&!a.altKey&&(!c("gkx")("23402")||d("MLCKeyBindingUtil").hasCommandModifier(a))){a.preventDefault();var b=h.current;if(b!=null&&a.timeStamp-b<=m&&c("gkx")("15485")){h.current=a.timeStamp;return!0}o();h.current=a.timeStamp;return!0}return!1},d("Lexical").COMMAND_PRIORITY_LOW)},[f,o]);return{onSend:o}}g["default"]=a}),98);
__d("cometLexicalBaseTheme",[],(function(a,b,c,d,e,f,g){"use strict";a={ltr:"xdpxx8g",rtl:"x1hr2gdg"};b=a;g["default"]=b}),98);
__d("useLexicalInitializeEditor__DEPRECATED",["Lexical","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useLayoutEffect;function a(a){i(function(){a.update(function(){var b=d("Lexical").$getRoot();if(b.isEmpty()){var c=d("Lexical").$createParagraphNode();b.append(c);b=document.activeElement;(d("Lexical").$getSelection()!==null||b!==null&&b===a.getRootElement())&&c.select()}})},[a])}g["default"]=a}),98);
__d("useMWPLexicalClearEditor",["Lexical","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useLayoutEffect;function a(a,b){b===void 0&&(b=!1),i(function(){return a.registerCommand(d("Lexical").CLEAR_EDITOR_COMMAND,function(){a.update(function(){var a=d("Lexical").$getRoot(),c=d("Lexical").$getSelection(),e=d("Lexical").$createParagraphNode();a.clear();a.append(e);c!==null&&(e.select(),b===!0&&d("Lexical").$isRangeSelection(c)&&(c.format=0))});return!0},d("Lexical").COMMAND_PRIORITY_EDITOR)},[b,a])}g["default"]=a}),98);
__d("useMWXLexicalEditor",["CometLexicalEmojiNode","Lexical","MessengerLexicalActorNode","cometLexicalBaseTheme","cr:11494","useLexicalInitializeEditor__DEPRECATED","useMWPLexicalClearEditor","useStable"],(function(a,b,c,d,e,f,g){"use strict";var h=[d("MessengerLexicalActorNode").MessengerLexicalActorNode,b("cr:11494")==null?void 0:b("cr:11494").MessengerLexicalCommandNode,d("CometLexicalEmojiNode").EmojiNode];function a(){var a=c("useStable")(function(){return d("Lexical").createEditor({namespace:"MWPEditor",nodes:h.filter(Boolean),onError:function(){},theme:babelHelpers["extends"]({},c("cometLexicalBaseTheme"),{paragraph:"xat24cr xdj266r"})})});c("useMWPLexicalClearEditor")(a);c("useLexicalInitializeEditor__DEPRECATED")(a);return{editor:a}}g.useMWXLexicalEditor=a}),98);
__d("usePrepopulateLexicalEditor",["Lexical","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useLayoutEffect;function a(a,b,c){i(function(){if(b==null)return;a.update(function(){if(b!=null){var a=d("Lexical").$getRoot(),e=a.getFirstChild();d("Lexical").$isParagraphNode(e)||(e=d("Lexical").$createParagraphNode(),a.append(e));a=d("Lexical").$createTextNode(b);e.clear();e.append(a);c===!0&&e.selectEnd()}})},[a])}g["default"]=a}),98);
__d("useShowNotEditableMessageToast",["fbt","IGDSErrorPanoOutlineIcon.react","PolarisToastConstants","react","react-compiler-runtime","useIGDSToaster"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));i.useCallback;var k=d("PolarisToastConstants").TOAST_ANIM_DURATION_S*1e3;function a(){var a=d("react-compiler-runtime").c(2),b=c("useIGDSToaster")(),e;a[0]!==b?(e=function(){b.add({icon:j.jsx(c("IGDSErrorPanoOutlineIcon.react"),{alt:h._(/*BTDS*/"Error Icon")}),message:h._(/*BTDS*/"Message not edited, sent messages can only be edited for 15 minutes"),target:"bottom-left"},{duration:k})},a[0]=b,a[1]=e):e=a[1];return e}g["default"]=a}),226);
__d("IGDComposerEditContainer.react",["fbt","I64","IGDChatTabsEnv","IGDComposerEmojiButton.react","IGDComposerIconSendButton.react","IGDInstamadilloUtils","IGDSBox.react","IGDSIconButton.react","IGDSXFilledIcon.react","LexicalText","MAWEditMessageContext.react","MWXComposer.react","MessengerWebUXLogger","PolarisUA","ReQL","ReQLSuspense","getIsMessageTimeBelowEditThreshold","isStringNullOrEmpty","issueEditInstamadilloMessage","promiseDone","react","react-compiler-runtime","useMAWGetSendEditActionforOpen","useMWXComposerClearAndSendOnEnter","useMWXLexicalEditor","usePrepopulateLexicalEditor","useReStore","useServerTime","useShowNotEditableMessageToast"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=k||(k=d("react"));b=k;var m=b.useContext,n=b.useEffect;b.useMemo;var o=b.useState,p={cancelButton:{paddingTop:"xexx8yu",$$css:!0},chatTabComposerHeader:{paddingBottom:"x18d9i69",paddingInlineStart:"xf7dkkf",paddingInlineEnd:"xv54qhq",paddingLeft:null,paddingRight:null,$$css:!0},chatTabEmojiButton:{paddingBottom:"xg8j3zb",paddingInlineStart:"x1bdp6ip",$$css:!0},chatTabInnerComposer:{borderTopColor:"x1u3ycmy",borderInlineEndColor:"xrh5wk9",borderBottomColor:"x13ec8wd",borderInlineStartColor:"x386jci",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x131ptk",borderInlineEndWidth:"x19msrzo",borderBottomWidth:"x1dmouxk",borderInlineStartWidth:"x1nsouaw",width:"xi55695",$$css:!0},chatTabInnerComposerContainer:{marginInlineStart:"xwklpps",paddingTop:"xexx8yu",$$css:!0},emojiButton:{paddingBottom:"xjkvuk6",paddingInlineEnd:"x14vy60q",paddingInlineStart:"xe2zdcy",paddingTop:"xyqdw3p",$$css:!0},innerComposer:{borderStartStartRadius:"x1ua1ujl",borderStartEndRadius:"xksyday",borderEndEndRadius:"xshg46c",borderEndStartRadius:"xlej2ay",$$css:!0},mobileInnerComposerContainer:{minHeight:"x1gg8mnh",paddingBottom:"x1120s5i",paddingInlineStart:"x1g0dm76",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(65),e=a.editMessageData,g=a.headerText,k=a.onEditCancelCallback,q=a.onEditTriggerCallback;a=a.thread;var r=k===void 0?null:k,s=q===void 0?null:q;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(k={eventName:"composer_edit_message"},b[0]=k):k=b[0];q=c("MessengerWebUXLogger").useImpressionLoggerRef(k);var t=c("MessengerWebUXLogger").useInteractionLogger();k=m(d("MAWEditMessageContext.react").Context);var u=k.setEditMessageData;k=d("useMWXLexicalEditor").useMWXLexicalEditor();var v=k.editor;k=d("IGDChatTabsEnv").useIsChatTabsDisplay();var w=(i||(i=c("useReStore")))(),x;b[1]!==w.tables.messages||b[2]!==e.messageId||b[3]!==e.threadKey||b[4]!==e.timestampMs?(x=function(){return d("ReQL").fromTableAscending(w.tables.messages).getKeyRange(e==null?void 0:e.threadKey,e==null?void 0:e.timestampMs,e==null?void 0:e.messageId)},b[1]=w.tables.messages,b[2]=e.messageId,b[3]=e.threadKey,b[4]=e.timestampMs,b[5]=x):x=b[5];var y=e==null?void 0:e.messageId,z=e==null?void 0:e.threadKey,A=e==null?void 0:e.timestampMs,B;b[6]!==w||b[7]!==y||b[8]!==z||b[9]!==A?(B=[w,y,z,A],b[6]=w,b[7]=y,b[8]=z,b[9]=A,b[10]=B):B=b[10];var C=d("ReQLSuspense").useFirst(x,B,f.id+":110");C==null||C.text;z=(y=C==null?void 0:C.text)!=null?y:"";b[11]!==z?(A=z.trim(),b[11]=z,b[12]=A):A=b[12];x=A;var D=x,E=c("useMAWGetSendEditActionforOpen")();B=c("useServerTime")();b[13]!==e.timestampMs||b[14]!==B?(y=d("getIsMessageTimeBelowEditThreshold").getIsMessageTimeBelowEditThreshold((j||(j=d("I64"))).of_float(B.getTime()),e.timestampMs),b[13]=e.timestampMs,b[14]=B,b[15]=y):y=b[15];var F=y,G=function(){if(!F){H();return!1}else{var a=v.getEditorState().read(d("LexicalText").$rootTextContent).trim();if(c("isStringNullOrEmpty")(a)||a===D)return!1;if(d("IGDInstamadilloUtils").isInstamadilloMessage(C)){var b={messageId:e.messageId,text:a,threadKey:e.threadKey};c("promiseDone")(c("issueEditInstamadilloMessage")(b))}else E(e.messageId,a);u(null);s&&s();t==null||t({eventName:"edit_message"});return!0}},H=c("useShowNotEditableMessageToast")();b[16]!==t||b[17]!==r||b[18]!==u?(z=function(){u(null),t==null||t({eventName:"edit_message_cancel"}),r&&r()},b[16]=t,b[17]=r,b[18]=u,b[19]=z):z=b[19];A=z;b[20]!==v||b[21]!==G?(x={clearReplyState:null,editor:v,onSend:G},b[20]=v,b[21]=G,b[22]=x):x=b[22];c("useMWXComposerClearAndSendOnEnter")(x);B=o(!1);y=B[0];var I=B[1];b[23]!==v||b[24]!==D?(z=function(){return v.registerTextContentListener(function(a){a=a.trim();I(!c("isStringNullOrEmpty")(a)&&a!==D)})},x=[v,D],b[23]=v,b[24]=D,b[25]=z,b[26]=x):(z=b[25],x=b[26]);n(z,x);c("usePrepopulateLexicalEditor")(v,D,!0);B=a.threadKey;b[27]!==g?(z=g!=null?g:h._(/*BTDS*/"Editing message"),b[27]=g,b[28]=z):z=b[28];x=k?"secondary":"primary";b[29]===Symbol["for"]("react.memo_cache_sentinel")?(a=h._(/*BTDS*/"Cancel edit"),b[29]=a):a=b[29];b[30]===Symbol["for"]("react.memo_cache_sentinel")?(g=l.jsx(c("IGDSXFilledIcon.react"),{alt:h._(/*BTDS*/"Cancel edit"),color:"ig-primary-text",size:15}),b[30]=g):g=b[30];b[31]!==A?(a=l.jsx(c("IGDSIconButton.react"),{label:a,onClick:A,xstyle:p.cancelButton,children:g}),b[31]=A,b[32]=a):a=b[32];g=k&&p.chatTabComposerHeader;b[33]!==z||b[34]!==x||b[35]!==a||b[36]!==g?(A=l.jsx(d("MWXComposer.react").Header,{bodyText:z,bodyTextColor:x,"data-testid":void 0,hasTopBorder:!0,rightAddon:a,xstyle:g},0),b[33]=z,b[34]=x,b[35]=a,b[36]=g,b[37]=A):A=b[37];z=k&&p.chatTabInnerComposerContainer;x=k&&p.chatTabInnerComposer;b[38]===Symbol["for"]("react.memo_cache_sentinel")?(a=d("PolarisUA").isMobile()&&p.mobileInnerComposerContainer,b[38]=a):a=b[38];b[39]!==x?(g=[p.innerComposer,x,a],b[39]=x,b[40]=g):g=b[40];b[41]!==v||b[42]!==k||b[43]!==B?(a=d("PolarisUA").isMobile()?null:l.jsx(c("IGDSBox.react"),{xstyle:[p.emojiButton,k&&p.chatTabEmojiButton],children:l.jsx(c("IGDComposerEmojiButton.react"),{editor:v,threadKey:B})}),b[41]=v,b[42]=k,b[43]=B,b[44]=a):a=b[44];b[45]===Symbol["for"]("react.memo_cache_sentinel")?(x=l.jsx(d("MWXComposer.react").TextEditor,{contentEditableProps:{ariaLabel:h._(/*BTDS*/"Editing message")},testid:void 0}),b[45]=x):x=b[45];k=!y;b[46]!==G?(B=function(){G()},b[46]=G,b[47]=B):B=b[47];b[48]!==k||b[49]!==B?(y=l.jsx(c("IGDSBox.react"),{children:l.jsx(c("IGDComposerIconSendButton.react"),{isDisabled:k,isEdit:!0,onClick:B,testid:void 0})}),b[48]=k,b[49]=B,b[50]=y):y=b[50];b[51]!==g||b[52]!==a||b[53]!==y?(k=l.jsxs(d("MWXComposer.react").InputArea,{xstyle:g,children:[a,x,y]}),b[51]=g,b[52]=a,b[53]=y,b[54]=k):k=b[54];b[55]!==z||b[56]!==k?(B=l.jsx(d("MWXComposer.react").Row,{children:l.jsx(c("IGDSBox.react"),{paddingX:1,paddingY:1,width:"100%",xstyle:z,children:k})}),b[55]=z,b[56]=k,b[57]=B):B=b[57];b[58]!==v||b[59]!==A||b[60]!==B?(x=l.jsx(d("MWXComposer.react").Composer,{editor:v,header:A,children:B}),b[58]=v,b[59]=A,b[60]=B,b[61]=x):x=b[61];b[62]!==q||b[63]!==x?(g=l.jsx(c("IGDSBox.react"),{containerRef:q,children:x}),b[62]=q,b[63]=x,b[64]=g):g=b[64];return g}g["default"]=a}),226);
__d("LSContactGenderToGenderConst",["GenderConst","I64","LSContactGender","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactGender").FEMALE)))return c("GenderConst").FEMALE_SINGULAR;else if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactGender").MALE)))return c("GenderConst").MALE_SINGULAR;else if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactGender").NEUTER)))return c("GenderConst").NEUTER_SINGULAR;else return c("GenderConst").NOT_A_PERSON}g["default"]=a}),98);
__d("LsFalcoEventEntryPoint",[],(function(a,b,c,d,e,f){"use strict";a="message_actions";b="composer";c="icebreaker";f.messageActions=a;f.composer=b;f.icebreaker=c}),66);
__d("LsReplyRenderedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1743878");b=d("FalcoLoggerInternal").create("ls_reply_rendered",a);e=b;g["default"]=e}),98);
__d("MWChatReplyText.react",["fbt","MWChatTextFormatting","MWChatTextTransform","MWXMessageTextWithEntities.react","cr:2472","react","useStringWithSubstitutions"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useMemo;function a(a){var e=a.isBumpMessage;e=e===void 0?!1:e;var f=a.isHotLike;f=f===void 0?!1:f;var g=a.mentionIds,i=a.ranges,l=a.text,m=a.threadKey;a=a.transformEmoticons;a=a===void 0?!0:a;var n=k(function(){var a;return new Set((a=g==null||g.split==null?void 0:g.split(","))!=null?a:[])},[g]);l=b("cr:2472")==null?l:b("cr:2472").unvault(l);n=(n=(n=d("useStringWithSubstitutions").useStringWithMentionSubstitutionsAndUpdatedRanges(l,[],n,m))==null?void 0:n.textWithSubstitutions)!=null?n:l;m=(m=d("useStringWithSubstitutions").useStringWithSubstitutions(l,m))!=null?m:l;l=h._(/*BTDS*/"Sticker").toString();f=f?l:e?m:n;return j.jsx("div",babelHelpers["extends"]({className:"xi81zsa"},{dir:"auto",children:j.jsx(c("MWXMessageTextWithEntities.react"),{maxLength:120,maxLines:2,ranges:i,renderers:{MessengerTextFormatting:[d("MWChatTextFormatting").messageRenderer]},text:f,transforms:a?d("MWChatTextTransform").textTransformsNoVault:[],truncationStyle:"ellipsis-only",withParagraphs:!1})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("IGDComposerReplyView.react",["fbt","CometErrorBoundary.react","CometTriggerAccessibilityAlertContext","I64","IGDSIconButton.react","IGDSText.react","IGDSXFilledIcon.react","LSContactGenderToGenderConst","LSHotEmojiSize","LSIntEnum","LSMessagingThreadTypeUtil","LsFalcoEventEntryPoint","LsReplyRenderedFalcoEvent","MDSTextPairing.react","MWChatReplyText.react","MWPActor.react","MWPReplyContext.react","MessagingAttachmentType","ReQL","ReQLSuspense","getFBTSafeGenderFromGenderConst","isStringNullOrEmpty","react","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=j||(j=d("react"));b=j;var n=b.useContext,o=b.useEffect,p={cancelButton:{paddingTop:"xexx8yu",$$css:!0}};function q(a,b,e){var f=a.isUnsent;a=a.text;b=b||{};b=b.attachmentType;var g=!c("isStringNullOrEmpty")(a);if(f)return h._(/*BTDS*/"Removed message");if(g)return m.jsx(c("MWChatReplyText.react"),{isHotLike:e,mentionIds:null,text:a!=null?a:h._(/*BTDS*/"Message").toString(),transformEmoticons:!1});if(b)if((k||(k=d("I64"))).equal(b,(l||(l=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE)))return h._(/*BTDS*/"Image");else if((k||(k=d("I64"))).equal(b,(l||(l=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER)))return h._(/*BTDS*/"Sticker");else if((k||(k=d("I64"))).equal(b,(l||(l=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)))return h._(/*BTDS*/"Video");else if((k||(k=d("I64"))).equal(b,(l||(l=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE)))return h._(/*BTDS*/"GIF");else return h._(/*BTDS*/"Attachment");else return h._(/*BTDS*/"Message")}q.displayName=q.name+" [from "+f.id+"]";function r(a,b){if(b)return h._(/*BTDS*/"Replying to yourself");if(!a)return h._(/*BTDS*/"Replying to {Placeholder for an unknown user on Instagram}",[h._param("Placeholder for an unknown user on Instagram","Instagram User")]);else{return h._(/*BTDS*/"_j{\"*\":\"Replying to {name}\"}",[h._param("name",m.jsx(c("IGDSText.react"),{size:"body",weight:"semibold",children:(b=a.firstName)!=null?b:a.name}),[1,c("getFBTSafeGenderFromGenderConst")(c("LSContactGenderToGenderConst")(a.gender))])])}}function s(a){var b=d("react-compiler-runtime").c(34),e=a.isArmadilloSecureThread;a=a.message;var g=(i||(i=c("useReStore")))(),h=d("MWPActor.react").useActor(),j=a.hotEmojiSize,n=a.messageId,p=a.senderId,s=a.text,u=a.threadKey;h=(k||(k=d("I64"))).equal(p,h);var v;b[0]!==g.tables.contacts||b[1]!==p?(v=function(){return d("ReQL").fromTableAscending(g.tables.contacts).getKeyRange(p)},b[0]=g.tables.contacts,b[1]=p,b[2]=v):v=b[2];var w;b[3]!==g||b[4]!==p?(w=[g,p],b[3]=g,b[4]=p,b[5]=w):w=b[5];v=d("ReQLSuspense").useFirst(v,w,f.id+":206");b[6]!==g.tables.attachments||b[7]!==n||b[8]!==u?(w=function(){return d("ReQL").fromTableAscending(g.tables.attachments).getKeyRange(u,n)},b[6]=g.tables.attachments,b[7]=n,b[8]=u,b[9]=w):w=b[9];var x;b[10]!==g||b[11]!==n||b[12]!==u?(x=[g,n,u],b[10]=g,b[11]=n,b[12]=u,b[13]=x):x=b[13];w=d("ReQLSuspense").useFirst(w,x,f.id+":211");b[14]===Symbol["for"]("react.memo_cache_sentinel")?(x=[],b[14]=x):x=b[14];o(t,x);b[15]!==j||b[16]!==e||b[17]!==s?(x=j!=null?s!=null&&s==="\ud83d\udc4d"&&((k||(k=d("I64"))).equal(j,(l||(l=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").SMALL))||(k||(k=d("I64"))).equal(j,(l||(l=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").MEDIUM))||(k||(k=d("I64"))).equal(j,(l||(l=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").LARGE)))&&e:!1,b[15]=j,b[16]=e,b[17]=s,b[18]=x):x=b[18];j=x;b[19]===Symbol["for"]("react.memo_cache_sentinel")?(e={className:"x1sa5p1d"},b[19]=e):e=b[19];s=c("MDSTextPairing.react");x=c("IGDSText.react");var y="body";v=r(v,h);b[20]!==x||b[21]!==v?(h=m.jsxs(x,{size:y,children:[v," "]}),b[20]=x,b[21]=v,b[22]=h):h=b[22];b[23]!==w||b[24]!==j||b[25]!==a?(y=q(a,w,j),b[23]=w,b[24]=j,b[25]=a,b[26]=y):y=b[26];b[27]!==s||b[28]!==h||b[29]!==y?(x=m.jsx(s,{body:h,level:3,meta:y}),b[27]=s,b[28]=h,b[29]=y,b[30]=x):x=b[30];b[31]!==x||b[32]!==e?(v=m.jsx("div",babelHelpers["extends"]({},e,{children:x})),b[31]=x,b[32]=e,b[33]=v):v=b[33];return v}function t(){c("LsReplyRenderedFalcoEvent").log(u)}function u(){return{funnel:{entry_point:d("LsFalcoEventEntryPoint").messageActions}}}function v(a){var b=d("react-compiler-runtime").c(15),e=a.isArmadilloSecureThread;a=a.message;var f=a.threadKey,g=n(d("MWPReplyContext.react").MWPReplyContext),i=g.clearReply,j=n(c("CometTriggerAccessibilityAlertContext"));b[0]===Symbol["for"]("react.memo_cache_sentinel")?(g={className:"x1cy8zhl xvbhtw8 x5ur3kl x13fuv20 x178xt8z x78zum5 x1qughib xg8j3zb x1q3ajuy x1gx403c x889kno"},b[0]=g):g=b[0];var k;b[1]!==e||b[2]!==a?(k=m.jsx(c("CometErrorBoundary.react"),{fallback:w,children:m.jsx(s,{isArmadilloSecureThread:e,message:a})}),b[1]=e,b[2]=a,b[3]=k):k=b[3];b[4]===Symbol["for"]("react.memo_cache_sentinel")?(e=h._(/*BTDS*/"Cancel reply"),b[4]=e):e=b[4];b[5]!==i||b[6]!==f||b[7]!==j?(a=function(){i(f,!0),j(h._(/*BTDS*/"Replying to message has been canceled."),{assertive:!1})},b[5]=i,b[6]=f,b[7]=j,b[8]=a):a=b[8];var l;b[9]===Symbol["for"]("react.memo_cache_sentinel")?(l=m.jsx(c("IGDSXFilledIcon.react"),{alt:h._(/*BTDS*/"Cancel reply"),color:"ig-primary-text",size:12}),b[9]=l):l=b[9];b[10]!==a?(e=m.jsx(c("IGDSIconButton.react"),{label:e,onClick:a,xstyle:p.cancelButton,children:l}),b[10]=a,b[11]=e):e=b[11];b[12]!==k||b[13]!==e?(l=m.jsxs("div",babelHelpers["extends"]({},g,{"data-testid":void 0,children:[k,e]})),b[12]=k,b[13]=e,b[14]=l):l=b[14];return l}function w(){return m.jsx(c("IGDSText.react"),{size:"body",children:h._(/*BTDS*/"Replying to message")})}w.displayName=w.name+" [from "+f.id+"]";function a(a){var b=d("react-compiler-runtime").c(15),e=a.messageId,g=a.messageTimestamp;a=a.thread;var h=(i||(i=c("useReStore")))(),j=a.threadKey;a=a.threadType;var k;b[0]!==a?(k=d("LSMessagingThreadTypeUtil").isArmadilloSecure(a),b[0]=a,b[1]=k):k=b[1];a=k;b[2]!==h.tables.messages||b[3]!==e||b[4]!==g||b[5]!==j?(k=function(){return d("ReQL").fromTableAscending(h.tables.messages).getKeyRange(j,g,e)},b[2]=h.tables.messages,b[3]=e,b[4]=g,b[5]=j,b[6]=k):k=b[6];var l;b[7]!==h||b[8]!==e||b[9]!==g||b[10]!==j?(l=[h,j,e,g],b[7]=h,b[8]=e,b[9]=g,b[10]=j,b[11]=l):l=b[11];k=d("ReQLSuspense").useFirst(k,l,f.id+":325");b[12]!==a||b[13]!==k?(l=k?m.jsx(v,{isArmadilloSecureThread:a,message:k}):null,b[12]=a,b[13]=k,b[14]=l):l=b[14];return l}g["default"]=a}),226);
__d("IGDComposerAttachmentButton.react",["fbt","BaseFileSelector.react","IGDSIconButton.react","IGDSPhotoOutlineIcon.react","IGDThreadListNewMessageLoggingDataContext","MWPActor.react","MessengerWebUXLogger","ReQL","ReQLSuspense","getInstamadilloLoggingExtraData","promiseDone","react","react-compiler-runtime","requireDeferred","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));j.useCallback;var l=c("requireDeferred")("MWLogMessageAction").__setRef("IGDComposerAttachmentButton.react");function m(a){var b=d("react-compiler-runtime").c(2),c;b[0]!==a?(c=function(b){b=Array.from(b);if(b.length>0)return a(b)},b[0]=a,b[1]=c):c=b[1];return c}function a(a){var b=d("react-compiler-runtime").c(20),e=a.multiple,g=a.onAttachmentsAdded,j=a.supportedFileTypes,n=a.threadKey;a=e===void 0?!0:e;var o=(i||(i=c("useReStore")))(),p=d("MWPActor.react").useActor();e=m(g);b[0]!==o.tables.threads||b[1]!==n?(g=function(){return d("ReQL").fromTableAscending(o.tables.threads).getKeyRange(n)},b[0]=o.tables.threads,b[1]=n,b[2]=g):g=b[2];var q;b[3]!==o||b[4]!==n?(q=[o,n],b[3]=o,b[4]=n,b[5]=q):q=b[5];g=d("ReQLSuspense").useFirst(g,q,f.id+":60");var r=c("MessengerWebUXLogger").useInteractionLogger(),s=d("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceIdContext();b[6]!==g?(q=c("getInstamadilloLoggingExtraData")(g),b[6]=g,b[7]=q):q=b[7];var t=q;b[8]!==p||b[9]!==o||b[10]!==s||b[11]!==t||b[12]!==r||b[13]!==n?(g=function(a){return k.jsx(c("IGDSIconButton.react"),{onClick:function(){r==null||r({eventName:"composer_open_file_picker",extraData:babelHelpers["extends"]({},t),flowInstanceId:s}),a(),l.onReady(function(a){return c("promiseDone")(a.log(o,void 0,n,"composer","attach",void 0,void 0,void 0,void 0,"image",p))})},children:k.jsx(c("IGDSPhotoOutlineIcon.react"),{alt:h._(/*BTDS*/"Add Photo or Video"),color:"ig-primary-text"})})},b[8]=p,b[9]=o,b[10]=s,b[11]=t,b[12]=r,b[13]=n,b[14]=g):g=b[14];b[15]!==a||b[16]!==e||b[17]!==j||b[18]!==g?(q=k.jsx(c("BaseFileSelector.react"),{accept:j,multiple:a,onFilesSelected:e,children:g}),b[15]=a,b[16]=e,b[17]=j,b[18]=g,b[19]=q):q=b[19];return q}g["default"]=a}),226);
__d("IGDSMediaOutlineIcon.react",["IGDSMediaPanoOutlineIcon.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(2),e;b[0]!==a?(e=i.jsx(c("IGDSMediaPanoOutlineIcon.react"),babelHelpers["extends"]({},a)),b[0]=a,b[1]=e):e=b[1];return e}b=i.memo(a);g["default"]=b}),98);
__d("IGDComposerMediaStaging.react",["fbt","BaseFileSelector.react","CometImage.react","FDSImageCover.react","I64","IGDSIconButton.react","IGDSMediaOutlineIcon.react","IGDSPhotoOutlineIcon.react","IGDSText.react","IGDSTooltip.react","IGDSXPanoFilledIcon.react","LSIntEnum","MWMediaComposerRenderQpl","MWMediaManager","MessagingAttachmentType","react","react-compiler-runtime","useCurrentDisplayMode","useIGDMediaMangerUploadFailedToast"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=i||(i=d("react"));b=i;b.useCallback;var m=b.useEffect,n=b.useState,o={stackingUploadButton:{height:"x1peatla",width:"x1fu8urw",$$css:!0},uploadButton:{backgroundColor:"x1a4onnt",borderStartStartRadius:"x16qb05n",borderStartEndRadius:"xi7iut8",borderEndEndRadius:"x1dm3dyd",borderEndStartRadius:"x1pv694p",height:"xnxb3zj",position:"x1n2onr6",width:"xo5x3gg",$$css:!0}},p=h._(/*BTDS*/"Remove attachment"),q=h._(/*BTDS*/"Upload another photo\/video"),r=h._(/*BTDS*/"Image cover for attached media"),s=h._(/*BTDS*/"File Icon for non photo\/video file");function t(a){var b=d("react-compiler-runtime").c(2),c;b[0]!==a?(c=function(b){b=Array.from(b);b.length>0&&a(b)},b[0]=a,b[1]=c):c=b[1];return c}function u(a){var b=d("react-compiler-runtime").c(16),e=a.isStacking,f=a.multiple,g=a.onAttachmentsAdded;a=a.supportedFileTypes;f=f===void 0?!0:f;g=t(g);var h=n(!1),i=h[0],j=h[1];h=c("useCurrentDisplayMode")()==="dark";var k;b[0]!==e?(k={0:{className:"x6s0dn4 x78zum5 xnxb3zj xl56j7k xr9ek0c x1sa5p1d xzueoph x7phf20 xo5x3gg"},1:{className:"x6s0dn4 x78zum5 xl56j7k x4465f1 x2x2exm x1gslohp x2fvf9 xat24cr x1lziwak x1wfjk5t"}}[!!(e===!0)<<0],b[0]=e,b[1]=k):k=b[1];h=h?"primary":"black";var m;b[2]!==e?(m=function(a){return l.jsx(c("IGDSIconButton.react"),{label:q,onClick:a,onHoverEnd:function(){return j(!1)},onHoverStart:function(){return j(!0)},xstyle:[o.uploadButton,e===!0&&o.stackingUploadButton],children:l.jsx(c("IGDSPhotoOutlineIcon.react"),{alt:q,color:"ig-primary-text"})})},b[2]=e,b[3]=m):m=b[3];var p;b[4]!==f||b[5]!==g||b[6]!==a||b[7]!==m?(p=l.jsx(c("BaseFileSelector.react"),{accept:a,multiple:f,onFilesSelected:g,children:m}),b[4]=f,b[5]=g,b[6]=a,b[7]=m,b[8]=p):p=b[8];b[9]!==h||b[10]!==p||b[11]!==i?(f=l.jsx(c("IGDSTooltip.react"),{align:"middle",color:h,isVisible:i,position:"above",tooltip:q,children:p}),b[9]=h,b[10]=p,b[11]=i,b[12]=f):f=b[12];b[13]!==k||b[14]!==f?(g=l.jsx("div",babelHelpers["extends"]({},k,{children:f})),b[13]=k,b[14]=f,b[15]=g):g=b[15];return g}function v(a){var b=d("react-compiler-runtime").c(17),e=a.isStacking,f=a.mediaStagingItem;a=a.onPress;var g=c("useCurrentDisplayMode")()==="dark",i=n(!1),j=i[0],k=i[1];b[0]!==e?(i={0:{className:"x1euzuty x10l6tqk xtu2xtp"},1:{className:"x10l6tqk xtijo5x x13vifvy"}}[!!(e===!0)<<0],b[0]=e,b[1]=i):i=b[1];e=g?"primary":"black";b[2]!==f.filename?(g=h._(/*BTDS*/"Remove attachment: {file-name}",[h._param("file-name",f.filename)]),b[2]=f.filename,b[3]=g):g=b[3];var m;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(f=function(){return k(!1)},m=function(){return k(!0)},b[4]=f,b[5]=m):(f=b[4],m=b[5]);var o;b[6]===Symbol["for"]("react.memo_cache_sentinel")?(o=l.jsx("div",babelHelpers["extends"]({className:"x6s0dn4 xnz67gz x6zrd4h x1f58dfg x903dn5 xis42z1 x1c9tyrk xeusxvb x1pahc9y x1ertn4p x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x178xt8z x1lun4ml xso031l xpilrb4 x78zum5 x1qx5ct2 xl56j7k xw4jnvo x9ro6w8"},{children:l.jsx(c("IGDSXPanoFilledIcon.react"),{alt:p,size:9})})),b[6]=o):o=b[6];b[7]!==a||b[8]!==g?(f=l.jsx(c("IGDSIconButton.react"),{label:g,onClick:a,onHoverEnd:f,onHoverStart:m,padding:0,children:o}),b[7]=a,b[8]=g,b[9]=f):f=b[9];b[10]!==e||b[11]!==f||b[12]!==j?(m=l.jsx(c("IGDSTooltip.react"),{align:"middle",color:e,isVisible:j,position:"above",tooltip:p,children:f}),b[10]=e,b[11]=f,b[12]=j,b[13]=m):m=b[13];b[14]!==i||b[15]!==m?(o=l.jsx("div",babelHelpers["extends"]({},i,{children:m})),b[14]=i,b[15]=m,b[16]=o):o=b[16];return o}var w=function(a){return a.mimeType==="image/gif"||a.mimeType==="image/webp"};function x(a){var b=d("react-compiler-runtime").c(30);a=a.mediaStagingItem;var e=a.attachmentType,f=a.previewUrl||"",g=d("MWMediaComposerRenderQpl").useMediaComposerRenderQpl(a),h,i;b[0]!==g?(h=function(){g==null||g.addPoint("staging-item-render")},i=[g],b[0]=g,b[1]=h,b[2]=i):(h=b[1],i=b[2]);m(h,i);b[3]!==g?(h=function(a,b){g==null||g.endFail(a,b)},b[3]=g,b[4]=h):h=b[4];var n=h;b[5]!==g?(i=function(){g==null||g.endSuccess()},b[5]=g,b[6]=i):i=b[6];h=i;if(w(a)){if(f!==null){b[7]!==f?(i=l.jsx(c("FDSImageCover.react"),{alt:r,src:f}),b[7]=f,b[8]=i):i=b[8];return i}}else if((j||(j=d("I64"))).equal(e,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO))){if(f!==null){b[9]===Symbol["for"]("react.memo_cache_sentinel")?(i={className:"xl1xv1r"},b[9]=i):i=b[9];var o;b[10]!==n?(o=function(a){return n("load-video-error",{string:{video_error_name:a.type}})},b[10]=n,b[11]=o):o=b[11];var p;b[12]===Symbol["for"]("react.memo_cache_sentinel")?(p=l.jsx("track",{kind:"captions"}),b[12]=p):p=b[12];b[13]!==h||b[14]!==f||b[15]!==o?(i=l.jsx("video",babelHelpers["extends"]({},i,{height:"70",onError:o,onLoadedData:h,src:f,width:"70",children:p})),b[13]=h,b[14]=f,b[15]=o,b[16]=i):i=b[16];b[17]===Symbol["for"]("react.memo_cache_sentinel")?(p=l.jsx("div",babelHelpers["extends"]({className:"xbudbmw x18xomjl x7wgvq7 x10l6tqk xwa60dl"},{children:l.jsx(c("CometImage.react"),{src:"/images/video/play_24dp.png"})})),b[17]=p):p=b[17];b[18]!==i?(o=l.jsxs(l.Fragment,{children:[i,p]}),b[18]=i,b[19]=o):o=b[19];return o}}else if((j||(j=d("I64"))).equal(e,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))&&f!==null){b[20]!==n?(p=function(){return n("load-image-error")},b[20]=n,b[21]=p):p=b[21];b[22]===Symbol["for"]("react.memo_cache_sentinel")?(i={userSelect:"none"},b[22]=i):i=b[22];b[23]!==h||b[24]!==f||b[25]!==p?(o=l.jsx(c("FDSImageCover.react"),{alt:"",onError:p,onLoad:h,src:f,style:i}),b[23]=h,b[24]=f,b[25]=p,b[26]=o):o=b[26];return o}b[27]!==g||b[28]!==a?(e=l.jsx(z,{mediaRenderQpl:g,mediaStagingItem:a}),b[27]=g,b[28]=a,b[29]=e):e=b[29];return e}function y(a){var b=d("react-compiler-runtime").c(22),e=a.isStacking,f=a.mediaStagingItem,g=a.onAttachmentRemoved;b[0]!==f.offlineAttachmentId||b[1]!==g?(a=function(){g(f.offlineAttachmentId)},b[0]=f.offlineAttachmentId,b[1]=g,b[2]=a):a=b[2];a=a;var h=!(j||(j=d("I64"))).equal(f.attachmentType,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO))&&!(j||(j=d("I64"))).equal(f.attachmentType,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))&&!w(f),i;b[3]!==h||b[4]!==e?(i={0:{className:"x1c4vz4f x2lah0s xnxb3zj xr9ek0c x1sa5p1d xzueoph x7phf20 x1n2onr6 xo5x3gg"},2:{className:"x1c4vz4f x2lah0s xnxb3zj xr9ek0c x1sa5p1d xzueoph x7phf20 x1n2onr6 x2pejg6"},1:{className:"x1c4vz4f x2lah0s x1n2onr6 x4465f1 x2x2exm xr9ek0c xnnr8r xjpr12u xwklpps x1wfjk5t"},3:{className:"x1c4vz4f x2lah0s x1n2onr6 x4465f1 x2x2exm xr9ek0c xnnr8r xjpr12u xwklpps x1wfjk5t"}}[!!h<<1|!!(e===!0)<<0],b[3]=h,b[4]=e,b[5]=i):i=b[5];var m;b[6]!==h||b[7]!==e?(m={0:{className:"x16qb05n xi7iut8 x1dm3dyd x1pv694p xnxb3zj x6ikm8r x10wlt62 x1n2onr6 xo5x3gg"},2:{className:"x16qb05n xi7iut8 x1dm3dyd x1pv694p xnxb3zj x6ikm8r x10wlt62 x1n2onr6 x1ybostu x2pejg6"},1:{className:"x16qb05n xi7iut8 x1dm3dyd x1pv694p x6ikm8r x10wlt62 x1n2onr6 x1peatla x1fu8urw"},3:{className:"x16qb05n xi7iut8 x1dm3dyd x1pv694p x6ikm8r x10wlt62 x1n2onr6 x1ybostu x1peatla x1fu8urw"}}[!!h<<1|!!(e===!0)<<0],b[6]=h,b[7]=e,b[8]=m):m=b[8];b[9]!==f?(h=l.jsx(x,{mediaStagingItem:f}),b[9]=f,b[10]=h):h=b[10];var n;b[11]!==m||b[12]!==h?(n=l.jsx("div",babelHelpers["extends"]({},m,{children:h})),b[11]=m,b[12]=h,b[13]=n):n=b[13];b[14]!==e||b[15]!==f||b[16]!==a?(m=l.jsx(v,{isStacking:e,mediaStagingItem:f,onPress:a}),b[14]=e,b[15]=f,b[16]=a,b[17]=m):m=b[17];b[18]!==i||b[19]!==n||b[20]!==m?(h=l.jsxs("div",babelHelpers["extends"]({},i,{children:[n,m]})),b[18]=i,b[19]=n,b[20]=m,b[21]=h):h=b[21];return h}function z(a){var b=d("react-compiler-runtime").c(8),e=a.mediaRenderQpl;a=a.mediaStagingItem;var f,g;b[0]!==e?(f=function(){e==null||e.endSuccess()},g=[e],b[0]=e,b[1]=f,b[2]=g):(f=b[1],g=b[2]);m(f,g);var h;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(f={className:"x6s0dn4 x78zum5 x1iorvi4 xjkvuk6 xmzvs34 xf159sx x87ps6o"},g=l.jsx(c("IGDSMediaOutlineIcon.react"),{alt:s}),h={className:"x1iyjqo2"},b[3]=f,b[4]=g,b[5]=h):(f=b[3],g=b[4],h=b[5]);b[6]!==a.filename?(f=l.jsxs("div",babelHelpers["extends"]({},f,{children:[g,l.jsx("div",babelHelpers["extends"]({},h,{children:l.jsxs(c("IGDSText.react"),{maxLines:2,weight:"light",children:[" ",a.filename," "]})}))]})),b[6]=a.filename,b[7]=f):f=b[7];return f}function a(a){var b=d("react-compiler-runtime").c(22),e=a.hideUploadPlaceholder,f=a.isStacking,g=a.multiple,h=a.supportedFileTypes;a=a.thread;e=e===void 0?!1:e;g=g===void 0?!0:g;var i=c("useIGDMediaMangerUploadFailedToast")(),j;b[0]!==i||b[1]!==a?(j={showUploadFailureToast:i,thread:a},b[0]=i,b[1]=a,b[2]=j):j=b[2];i=d("MWMediaManager").useMediaManager(j);var k=i.handleFileRemove;a=i.handleFileSelect;j=i.mediaStaging;if(j.length===0){b[3]===Symbol["for"]("react.memo_cache_sentinel")?(i=l.jsx(l.Fragment,{}),b[3]=i):i=b[3];return i}else{b[4]!==f?(i={0:{className:"x6s0dn4 x9f619 x78zum5 xozqiw3 x1nhvcw1 xw2csxc xz9dl7a xpdmqnj x1g0dm76 x18d9i69 xh8yej3"},1:{className:"x6s0dn4 x9f619 x78zum5 x1nhvcw1 xw2csxc x18d9i69 x1a02dak xzueoph xoo30xy xyri2b x1c1uobl x1iorvi4 x1mk2rj3"}}[!!(f===!0)<<0],b[4]=f,b[5]=i):i=b[5];var m;b[6]!==a||b[7]!==e||b[8]!==f||b[9]!==g||b[10]!==h?(m=e?null:l.jsx(u,{isStacking:f,multiple:g,onAttachmentsAdded:a,supportedFileTypes:h}),b[6]=a,b[7]=e,b[8]=f,b[9]=g,b[10]=h,b[11]=m):m=b[11];b[12]!==j?(a=Array.from(j),b[12]=j,b[13]=a):a=b[13];b[14]!==k||b[15]!==f||b[16]!==a?(e=a.map(function(a){return l.jsx(y,{isStacking:f,mediaStagingItem:a,onAttachmentRemoved:k},a.offlineAttachmentId)}),b[14]=k,b[15]=f,b[16]=a,b[17]=e):e=b[17];b[18]!==i||b[19]!==m||b[20]!==e?(g=l.jsxs("div",babelHelpers["extends"]({},i,{children:[m,e]})),b[18]=i,b[19]=m,b[20]=e,b[21]=g):g=b[21];return g}}g["default"]=a}),226);
__d("IGDComposerSavedReplyTrayQuery_instagramRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9640323082734782"}),null);
__d("IGDComposerSavedReplyTrayQuery$Parameters",["IGDComposerSavedReplyTrayQuery_instagramRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("IGDComposerSavedReplyTrayQuery_instagramRelayOperation"),metadata:{},name:"IGDComposerSavedReplyTrayQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("IGDComposerSavedReplyTray.entrypoint",["IGDComposerSavedReplyTrayQuery$Parameters","JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{queries:{SavedReplyQueryRef:{parameters:c("IGDComposerSavedReplyTrayQuery$Parameters"),variables:{}}}}},root:c("JSResourceForInteraction")("IGDComposerSavedReplyTray.react").__setRef("IGDComposerSavedReplyTray.entrypoint")};g["default"]=a}),98);
__d("IGDComposerSavedReplyButton.react",["fbt","FDSPopoverLoadingState.react","IGDComposerSavedReplyTray.entrypoint","IGDSBox.react","IGDSEntryPointPopoverTrigger.react","IGDSIconButton.react","IGDSSmsPanoOutlineIcon.react","Lexical","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k={button:{paddingTop:"x1y1aw1k",paddingInlineEnd:"xf159sx",paddingBottom:"xwib8y2",paddingInlineStart:"xmzvs34",$$css:!0}};function a(a){var e=d("react-compiler-runtime").c(10),f=a.editor;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=h._(/*BTDS*/"Choose a saved reply").toString(),e[0]=a):a=e[0];var g=a;e[1]!==f?(a=function(a){f&&a&&f.update(function(){var c=b("Lexical"),d=c.$createParagraphNode,e=c.$createTextNode;c=c.$getRoot;d=d();e=e(a);d.append(e);e=c();e.clear();e.append(d);f.focus()})},e[1]=f,e[2]=a):a=e[2];a=a;var i,l;e[3]===Symbol["for"]("react.memo_cache_sentinel")?(i={},l=j.jsx(c("FDSPopoverLoadingState.react"),{withArrow:!0}),e[3]=i,e[4]=l):(i=e[3],l=e[4]);var m;e[5]!==a?(m={onClick:a},e[5]=a,e[6]=m):m=e[6];e[7]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(a,b,d,e,f,h){return j.jsx(c("IGDSBox.react"),{children:j.jsx(c("IGDSIconButton.react"),{"data-testid":void 0,innerRef:a,onClick:function(){b()},onHoverEnd:f,onHoverStart:e,onPressStart:h,xstyle:k.button,children:j.jsx(c("IGDSSmsPanoOutlineIcon.react"),{alt:g,color:"ig-primary-text"})})})},e[7]=a):a=e[7];e[8]!==m?(i=j.jsx(c("IGDSEntryPointPopoverTrigger.react"),{align:"end",entryPointParams:i,fallback:l,otherProps:m,popoverEntryPoint:c("IGDComposerSavedReplyTray.entrypoint"),position:"above",preloadTrigger:"button",children:a}),e[8]=m,e[9]=i):i=e[9];return i}g["default"]=a}),226);
__d("IGDComposerThemeConfigOverride",[],(function(a,b,c,d,e,f){"use strict";a={dark:{"chat-composer-button-color":"var(--chat-outgoing-message-bubble-background-color)","mwp-primary-theme-color":"var(--chat-outgoing-message-bubble-background-color)"},light:{"chat-composer-button-color":"var(--chat-outgoing-message-bubble-background-color)","mwp-primary-theme-color":"var(--chat-outgoing-message-bubble-background-color)"},type:"VARIABLES"};b=a;f["default"]=b}),66);
__d("IGDSHeartOutlineIcon.react",["IGDSHeartPanoOutlineIcon.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(2),e;b[0]!==a?(e=i.jsx(c("IGDSHeartPanoOutlineIcon.react"),babelHelpers["extends"]({},a)),b[0]=a,b[1]=e):e=b[1];return e}b=i.memo(a);g["default"]=b}),98);
__d("IGDWebHeartConst",[],(function(a,b,c,d,e,f){"use strict";a=String.fromCodePoint(10084,65039);f.HEART_BUTTON_UNICODE=a}),66);
__d("IGDHeartLikeButton.react",["fbt","IGDSHeartOutlineIcon.react","IGDSIconButton.react","IGDThreadListNewMessageLoggingDataContext","IGDWebHeartConst","Int64Hooks","MWPActor.react","MessengerWebUXLogger","getInstamadilloLoggingExtraData","promiseDone","react","react-compiler-runtime","requireDeferred","useAsyncReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=c("requireDeferred")("MWLogMessageAction").__setRef("IGDHeartLikeButton.react"),l=h._(/*BTDS*/"Like");function a(a){var b=d("react-compiler-runtime").c(14),e=a.onSendMessage,f=a.thread,g=c("useAsyncReStore")(),h=d("MWPActor.react").useActor(),i=c("MessengerWebUXLogger").useInteractionLogger(),m=d("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceIdContext();b[0]!==f?(a=c("getInstamadilloLoggingExtraData")(f),b[0]=f,b[1]=a):a=b[1];var n=a,o;b[2]!==h||b[3]!==g||b[4]!==m||b[5]!==n||b[6]!==i||b[7]!==e||b[8]!==f.threadKey?(a=function(){i==null||i({eventName:"send_hot_emoji",extraData:n,flowInstanceId:m}),e(d("IGDWebHeartConst").HEART_BUTTON_UNICODE,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"IGDHeartLikeButton"),k.onReady(function(a){return c("promiseDone")(g.then(function(b){return a.log(b,void 0,f.threadKey,"composer","reaction",void 0,void 0,void 0,void 0,"reaction",h)}))})},o=[i,n,m,e,g,f.threadKey,h],b[2]=h,b[3]=g,b[4]=m,b[5]=n,b[6]=i,b[7]=e,b[8]=f.threadKey,b[9]=a,b[10]=o):(a=b[9],o=b[10]);a=d("Int64Hooks").useCallbackInt64(a,o);b[11]===Symbol["for"]("react.memo_cache_sentinel")?(o=j.jsx(c("IGDSHeartOutlineIcon.react"),{alt:l,color:"ig-primary-text","data-testid":void 0}),b[11]=o):o=b[11];b[12]!==a?(o=j.jsx(c("IGDSIconButton.react"),{onClick:a,children:o}),b[12]=a,b[13]=o):o=b[13];return o}g["default"]=a}),226);
__d("createComposerDeferredPlugin",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useRef,l=b.useState;function a(a){function b(b){var c=k(a.getModuleIfRequireable()),d=l(c.current!=null);d[0];var e=d[1];j(function(){var b=a.onReady(function(a){c.current=a,e(!0)});b=b.remove;return b},[]);if(c.current!=null){d=c.current;return i.jsx(d,babelHelpers["extends"]({},b))}return null}return i.memo(b)}g["default"]=a}),98);
__d("IGDMentionsComposerPlugin.react",["CometPlaceholder.react","createComposerDeferredPlugin","react","react-compiler-runtime","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("createComposerDeferredPlugin")(c("requireDeferred")("IGDMentionsPluginForLexical.react").__setRef("IGDMentionsComposerPlugin.react"));function a(a){var b=d("react-compiler-runtime").c(4),e=a.editor,f=a.isAiBotMentionsEnabled;a=a.threadKey;var g;b[0]!==e||b[1]!==f||b[2]!==a?(g=i.jsx(c("CometPlaceholder.react"),{fallback:null,children:i.jsx(j,{editor:e,isAiBotMentionsEnabled:f,threadKey:a})}),b[0]=e,b[1]=f,b[2]=a,b[3]=g):g=b[3];return g}g["default"]=a}),98);
__d("IGDSMicrophonePanoOutline24Icon.react",["IGDSSVGIconBase.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(6),e,f,g,h;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=i.jsx("path",{d:"M19.5 10.671v.897a7.5 7.5 0 0 1-15 0v-.897",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"}),f=i.jsx("line",{fill:"none",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"2",x1:"12",x2:"12",y1:"19.068",y2:"22"}),g=i.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",x1:"8.706",x2:"15.104",y1:"22",y2:"22"}),h=i.jsx("path",{d:"M12 15.745a4 4 0 0 1-4-4V6a4 4 0 0 1 8 0v5.745a4 4 0 0 1-4 4Z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"}),b[0]=e,b[1]=f,b[2]=g,b[3]=h):(e=b[0],f=b[1],g=b[2],h=b[3]);b[4]!==a?(e=i.jsxs(c("IGDSSVGIconBase.react"),babelHelpers["extends"]({},a,{viewBox:"0 0 24 24",children:[e,f,g,h]})),b[4]=a,b[5]=e):e=b[5];return e}b=i.memo(a);g["default"]=b}),98);
__d("IGDVoiceClipButton.react",["IGDSIconButton.react","IGDSMicrophonePanoOutline24Icon.react","IGDThreadListNewMessageLoggingDataContext","MessengerWebUXLogger","PolarisDirectStrings","getInstamadilloLoggingExtraData","promiseDone","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useCallback;var j={voiceClip:{paddingInlineEnd:"x1icxu4v",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(14),e=a.thread,f=a.voiceRecorder,g=c("MessengerWebUXLogger").useInteractionLogger(),h=d("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceIdContext();b[0]!==e?(a=c("getInstamadilloLoggingExtraData")(e),b[0]=e,b[1]=a):a=b[1];var k=a;b[2]!==h||b[3]!==k?(e={eventName:"composer_audio_button_rendered",extraData:k,flowInstanceId:h},b[2]=h,b[3]=k,b[4]=e):e=b[4];a=c("MessengerWebUXLogger").useImpressionLoggerRef(e);b[5]!==h||b[6]!==k||b[7]!==g||b[8]!==f?(e=function(){navigator.mediaDevices&&c("promiseDone")(navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(a){f.start(a)})),g==null||g({eventName:"composer_record_audio",extraData:k,flowInstanceId:h})},b[5]=h,b[6]=k,b[7]=g,b[8]=f,b[9]=e):e=b[9];e=e;var l;b[10]===Symbol["for"]("react.memo_cache_sentinel")?(l=i.jsx(c("IGDSMicrophonePanoOutline24Icon.react"),{alt:d("PolarisDirectStrings").VOICE_CLIP_RECORDER_ICON_ALT_TEXT,color:"ig-primary-text",size:24}),b[10]=l):l=b[10];b[11]!==a||b[12]!==e?(l=i.jsx(c("IGDSIconButton.react"),{innerRef:a,onClick:e,xstyle:j.voiceClip,children:l}),b[11]=a,b[12]=e,b[13]=l):l=b[13];return l}g["default"]=a}),98);
__d("MWChatComposerIcons",["cr:2809"],(function(a,b,c,d,e,f,g){"use strict";g.MWChatComposerIconsGif=(a=b("cr:2809")).Gif;g.MWChatComposerIconsSticker=a.Sticker;g.MWChatComposerIconsPhoto=a.Photo;g.MWChatComposerIconsMoreActions=a.MoreActions;g.MWChatComposerIconsEmoji=a.Emoji}),98);
__d("MWPCometComposerInner.react",["fbt","CometLexicalContentEditable.react","CometLexicalPlaceholder.react","LexicalComposerContext","LexicalErrorBoundary","LexicalHistoryPlugin","LexicalPlainTextPlugin","MLCInstrumentationPluginDeferred__INTERNAL.react","react","requireDeferred","useDeferredModuleOnReady"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useCallback,l=b.useMemo,m=c("requireDeferred")("CometMessengerHandlePastedFileComposerPlugin").__setRef("MWPCometComposerInner.react"),n={editor:{flexGrow:"x1iyjqo2",maxHeight:"x1gh3ibb",minHeight:"xisnujt",minWidth:"xeuugli",overflowY:"x1odjw0f",$$css:!0}},o=h._(/*BTDS*/"Message").toString();function a(a){var b=a.ariaDescribedBy,e=a.contentEditableRef,f=a.editor,g=a.handlePastedFiles,h=a.placeholderText,i=a.policyProduct,p=a.surface;a=a.testId;var q=c("useDeferredModuleOnReady")(m),r=d("LexicalComposerContext").createLexicalComposerContext(),s=l(function(){return[f,r]},[f,r]),t=k(function(a){a=a==null?null:a;e.current=a},[e,f]);b=j.jsx(c("CometLexicalContentEditable.react"),babelHelpers["extends"]({ariaDescribedBy:b,ariaLabel:o},h==null?{}:{"aria-placeholder":h,placeholder:j.jsx(c("CometLexicalPlaceholder.react"),{children:h})},{contentEditableRef:t,spellCheck:!0,tabIndex:0,webDriverTestID:a,xstyle:n.editor}));return j.jsxs("div",babelHelpers["extends"]({className:"x1n2onr6"},{children:[j.jsxs(d("LexicalComposerContext").LexicalComposerContext.Provider,{value:s,children:[j.jsx(c("MLCInstrumentationPluginDeferred__INTERNAL.react"),{policyProduct:i,surface:p}),j.jsx(d("LexicalPlainTextPlugin").PlainTextPlugin,{ErrorBoundary:d("LexicalErrorBoundary").LexicalErrorBoundary,contentEditable:b}),j.jsx(d("LexicalHistoryPlugin").HistoryPlugin,{})]}),q==null||g===void 0?null:j.jsx(q,{editor:f,handlePastedFiles:g})]}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWVoiceRecordQpl",["MAWLoggerUtils","QPLUserFlow","gkx","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h=c("qpl")._(25302342,"1531"),i=10*60*1e3;function a(){var a=d("MAWLoggerUtils").getInstanceKey();return{addAnnotations:function(b){c("QPLUserFlow").addAnnotations(h,b,{instanceKey:a})},addPoint:function(b,d){c("QPLUserFlow").addPoint(h,b,{data:d,instanceKey:a})},endCancel:function(b,d){c("QPLUserFlow").endCancel(h,{annotations:d,cancelReason:b,instanceKey:a})},endFail:function(b,d){c("QPLUserFlow").endFailure(h,b,{annotations:d,instanceKey:a})},endSuccess:function(b){c("QPLUserFlow").endSuccess(h,{annotations:b,instanceKey:a})},start:function(b){b=b.startInfo.isOpusRecorder;c("QPLUserFlow").start(h,{annotations:{bool:{isOpusAudioAbTestEnabled:c("gkx")("3053"),isOpusAudioEnabled:c("gkx")("3054"),isOpusRecorder:b}},cancelOnUnload:!0,instanceKey:a,timeoutInMs:i})}}}g.event=h;g.createVoiceRecordQpl=a}),98);
__d("IGDComposerView.react",["fbt","BaseTheme.react","IGDAiAgentsUtils","IGDChatTabsEnv","IGDComposerAttachmentButton.react","IGDComposerEmojiButton.react","IGDComposerIconSendButton.react","IGDComposerMediaStaging.react","IGDComposerSavedReplyButton.react","IGDComposerThemeConfigOverride","IGDHeartLikeButton.react","IGDMentionsComposerPlugin.react","IGDSBox.react","IGDSButton.react","IGDSIconButton.react","IGDThreadListNewMessageLoggingDataContext","IGDVoiceClipButton.react","LSMessagingThreadTypeUtil","MWChatComposerIcons","MWPCometComposerInner.react","MWPThreadCapabilitiesContext","MWVoiceRecordQpl","MessengerWebUXLogger","PolarisUA","Promise","cr:1273","cr:21207","cr:9367","deferredLoadComponent","emptyFunction","getInstamadilloLoggingExtraData","gkx","promiseDone","react","react-compiler-runtime","requireDeferred","useCurrentDisplayMode","useShouldShowTextOnlyComposerForInvite"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));j.useCallback;var l=c("deferredLoadComponent")(c("requireDeferred")("IGDAudioRecorder.react").__setRef("IGDComposerView.react")),m={chatTabComposerInnerContainer:{width:"xc5o50y",$$css:!0},composerInnerContainer:{paddingBottom:"xs9asl8",$$css:!0},mobileComposerInnerContainer:{paddingBottom:"xwib8y2",$$css:!0},sendTextButton:{alignSelf:"x7fd4wk",marginBottom:"x1sfzahb",marginInlineEnd:"xnnr8r",$$css:!0}};function n(a){var b=d("react-compiler-runtime").c(16),e=a.hidden,f=a.onClick;a=a.thread;var g=c("MessengerWebUXLogger").useInteractionLogger(),i=d("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceIdContext(),j;b[0]!==a?(j=c("getInstamadilloLoggingExtraData")(a),b[0]=a,b[1]=j):j=b[1];var l=j;b[2]!==i||b[3]!==l?(a={eventName:"composer_send_button_rendered",extraData:l,flowInstanceId:i},b[2]=i,b[3]=l,b[4]=a):a=b[4];j=c("MessengerWebUXLogger").useImpressionLoggerRef(a);b[5]!==i||b[6]!==l||b[7]!==g||b[8]!==f?(a=function(){f(),g==null||g({eventName:"send_message",extraData:l,flowInstanceId:i})},b[5]=i,b[6]=l,b[7]=g,b[8]=f,b[9]=a):a=b[9];a=a;var n=d("IGDChatTabsEnv").useIsChatTabsDisplay(),o;b[10]!==e||b[11]!==n||b[12]!==j||b[13]!==f||b[14]!==a?(o=n?k.jsx(c("IGDComposerIconSendButton.react"),{hidden:e,isDisabled:e===!0,onClick:f,testid:void 0}):k.jsx(c("IGDSButton.react"),{"data-testid":void 0,display:"block",hidden:e,label:h._(/*BTDS*/"Send"),onClick:a,ref:j,variant:"primary_link",xstyle:m.sendTextButton}),b[10]=e,b[11]=n,b[12]=j,b[13]=f,b[14]=a,b[15]=o):o=b[15];return o}function a(a){var e=d("react-compiler-runtime").c(93),f=a.attachmentsSupported,g=a.editor,j=a.editorElementRef,o=a.hasStuffToSend,p=a.hideUploadPlaceholder,q=a.multiple,r=a.onAttachmentsAdded,s=a.onSendMessage,t=a.policyProduct,u=a.sendMessage,v=a.supportedFileTypes,w=a.surface,x=a.thread;p=p===void 0?!1:p;q=q===void 0?!0:q;a=(a=a.emojisSupported)!=null?a:!0;var y=x.threadKey,z=x.threadSubtype,A=x.threadType,B;e[0]!==z?(B=d("IGDAiAgentsUtils").isAiThread(z),e[0]=z,e[1]=B):B=e[1];z=B;B=d("IGDChatTabsEnv").useIsChatTabsDisplay();var C=B,D=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext();D=D.hasLSThreadBitOffset;var E;e[2]!==D?(E=D(56),e[2]=D,e[3]=E):E=e[3];E=E;var F;e[4]!==D?(F=D(36),e[4]=D,e[5]=F):F=e[5];F=F;var G;e[6]!==D?(G=D(109),e[6]=D,e[7]=G):G=e[7];G=G;var H;e[8]!==D?(H=D(43),e[8]=D,e[9]=H):H=e[9];H=H;var I;e[10]!==x.threadType?(I=d("LSMessagingThreadTypeUtil").isGroup(x.threadType),e[10]=x.threadType,e[11]=I):I=e[11];I=I;var J;e[12]!==D?(J=D(14)&&!d("PolarisUA").isMobile(),e[12]=D,e[13]=J):J=e[13];J=J;var K;e[14]!==f||e[15]!==D?(K=D(2)&&f===!0,e[14]=f,e[15]=D,e[16]=K):K=e[16];K=K;var L;e[17]===Symbol["for"]("react.memo_cache_sentinel")?(L=!d("PolarisUA").isMobile()&&c("gkx")("809"),e[17]=L):L=e[17];L=L;var M;e[18]!==f||e[19]!==D?(M=D(4)&&D(3)&&f===!0,e[18]=f,e[19]=D,e[20]=M):M=e[20];f=M;e[21]===Symbol["for"]("react.memo_cache_sentinel")?(D={createVoiceRecordQpl:d("MWVoiceRecordQpl").createVoiceRecordQpl,maxDuration:void 0},e[21]=D):D=e[21];var N=b("cr:9367").useVoiceRecorder(D);M=N.state.stage!=="Unopen";e[22]!==s||e[23]!==N?(D=function(){return c("promiseDone")(N.getVoiceClip().then(function(a){N.reset();s(void 0,void 0,void 0,void 0,void 0,void 0,void 0,a,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"IGDComposerView.onSendVoiceClip");return(i||(i=b("Promise"))).resolve()}))},e[22]=s,e[23]=N,e[24]=D):D=e[24];D=D;var O=c("useCurrentDisplayMode")();O=O==="dark"?"var(--always-white)":"var(--chat-composer-button-color)";O=O;var P;e[25]!==u?(P=function(){return u()},e[25]=u,e[26]=P):P=e[26];P=P;A=c("useShouldShowTextOnlyComposerForInvite")(y,A);var Q;e[27]!==C?(Q={0:{className:"x1qjc9v5 x1yvgwvq xjd31um x1ixjvfu xwt6s21 x1ua1ujl xksyday xshg46c xlej2ay x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x178xt8z x1lun4ml xso031l xpilrb4 x78zum5 xdt5ytf xw7yly9 x1ys307a x1yztbdb xyqm7xq"},1:{className:"x1qjc9v5 x1yvgwvq xjd31um x1ixjvfu xwt6s21 x1ua1ujl xksyday xshg46c xlej2ay x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x178xt8z x1lun4ml xso031l xpilrb4 x78zum5 xdt5ytf xw7yly9 x1ys307a x1yztbdb xyqm7xq x25sj25"}}[!!C<<0],e[27]=C,e[28]=Q):Q=e[28];var R;e[29]!==p||e[30]!==C||e[31]!==q||e[32]!==v||e[33]!==x?(R=k.jsx(c("IGDComposerMediaStaging.react"),{hideUploadPlaceholder:p,isStacking:C,multiple:q,supportedFileTypes:v,thread:x}),e[29]=p,e[30]=C,e[31]=q,e[32]=v,e[33]=x,e[34]=R):R=e[34];e[35]!==g||e[36]!==I||e[37]!==H||e[38]!==y?(p=H&&I?k.jsx(c("IGDMentionsComposerPlugin.react"),{editor:g,threadKey:y}):null,e[35]=g,e[36]=I,e[37]=H,e[38]=y,e[39]=p):p=e[39];e[40]!==o||e[41]!==B||e[42]!==M?(C={0:{className:"x6s0dn4 x78zum5 x1gg8mnh xv54qhq x1iwz3mf"},1:{className:"x6s0dn4 x78zum5 x1gg8mnh x1iwz3mf x11lfxj5"}}[!!((o||M)&&B)<<0],e[40]=o,e[41]=B,e[42]=M,e[43]=C):C=e[43];e[44]!==g||e[45]!==a||e[46]!==M||e[47]!==y?(I=a&&!M?k.jsx("div",babelHelpers["extends"]({className:"xpvyfi4 xzueoph x1v0swvf"},{children:k.jsx(c("IGDComposerEmojiButton.react"),{editor:g,threadKey:y})})):null,e[44]=g,e[45]=a,e[46]=M,e[47]=y,e[48]=I):I=e[48];e[49]!==O||e[50]!==g||e[51]!==j||e[52]!==B||e[53]!==M||e[54]!==r||e[55]!==D||e[56]!==t||e[57]!==A||e[58]!==w||e[59]!==x||e[60]!==N?(H=M?k.jsxs(k.Fragment,{children:[k.jsx(c("IGDSIconButton.react"),{"aria-label":h._(/*BTDS*/"Close Button"),onClick:function(){return N.reset()},children:k.jsx(d("MWChatComposerIcons").MWChatComposerIconsMoreActions,{fill:O,isRotated:!0,size:20})}),k.jsx(c("IGDSBox.react"),{flex:"grow",marginEnd:2,marginStart:1,children:k.jsx(l,{voiceRecorder:N})}),k.jsx(n,{onClick:D,thread:x})]}):k.jsx(c("IGDSBox.react"),{flex:"grow",marginEnd:1,marginStart:2,marginTop:2,xstyle:[B&&m.chatTabComposerInnerContainer,m.composerInnerContainer,d("PolarisUA").isMobile()&&m.mobileComposerInnerContainer],children:k.jsx(c("MWPCometComposerInner.react"),{ariaDescribedBy:h._(/*BTDS*/"Message").toString(),contentEditableRef:j,editor:g,handlePastedFiles:A?c("emptyFunction"):r,placeholderText:h._(/*BTDS*/"Message...").toString(),policyProduct:t,surface:w})}),e[49]=O,e[50]=g,e[51]=j,e[52]=B,e[53]=M,e[54]=r,e[55]=D,e[56]=t,e[57]=A,e[58]=w,e[59]=x,e[60]=N,e[61]=H):H=e[61];e[62]!==g||e[63]!==J||e[64]!==E||e[65]!==o||e[66]!==G||e[67]!==z||e[68]!==B||e[69]!==M||e[70]!==K||e[71]!==q||e[72]!==r||e[73]!==P||e[74]!==s||e[75]!==F||e[76]!==f||e[77]!==A||e[78]!==v||e[79]!==x||e[80]!==y||e[81]!==N?(a=M?null:k.jsxs(k.Fragment,{children:[k.jsx(n,{hidden:!o,onClick:P,thread:x}),k.jsxs("div",babelHelpers["extends"]({},{0:{className:"x6s0dn4 x78zum5"},1:{className:"x6s0dn4 x1s85apg"}}[!!(o||A)<<0],{children:[J?k.jsx(c("IGDVoiceClipButton.react"),{thread:x,voiceRecorder:N}):null,K?k.jsx(c("IGDComposerAttachmentButton.react"),{disabled:!E,multiple:q,onAttachmentsAdded:r,supportedFileTypes:v,threadKey:y}):null,L?k.jsx(c("IGDComposerSavedReplyButton.react"),{editor:g}):null,b("cr:21207")&&f&&!z?k.jsx(b("cr:21207"),{onSendMessage:s,threadKey:y}):null,G&&!B?k.jsx(c("IGDHeartLikeButton.react"),{onSendMessage:s,thread:x}):null,F&&b("cr:1273")!=null?k.jsx(b("cr:1273"),{threadKey:y}):null]}))]}),e[62]=g,e[63]=J,e[64]=E,e[65]=o,e[66]=G,e[67]=z,e[68]=B,e[69]=M,e[70]=K,e[71]=q,e[72]=r,e[73]=P,e[74]=s,e[75]=F,e[76]=f,e[77]=A,e[78]=v,e[79]=x,e[80]=y,e[81]=N,e[82]=a):a=e[82];e[83]!==C||e[84]!==I||e[85]!==H||e[86]!==a?(O=k.jsxs("div",babelHelpers["extends"]({},C,{children:[I,H,a]})),e[83]=C,e[84]=I,e[85]=H,e[86]=a,e[87]=O):O=e[87];e[88]!==Q||e[89]!==R||e[90]!==p||e[91]!==O?(j=k.jsx(c("BaseTheme.react"),{config:c("IGDComposerThemeConfigOverride"),children:k.jsxs("div",babelHelpers["extends"]({},Q,{children:[R,p,O]}))}),e[88]=Q,e[89]=R,e[90]=p,e[91]=O,e[92]=j):j=e[92];return j}g["default"]=a}),226);
__d("IGDSupportedFileTypes",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a?[".png",".jpg",".jpeg"]:["audio/*",".mp4",".mov",".png",".jpg",".jpeg"]}f.getIGDSupportedFileTypes=a}),66);
__d("MWDraftMessages.react",["I64","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));e=h;var k=e.createContext,l=e.useCallback,m=e.useContext,n=e.useState,o=k(),p=k();function a(a){a=a.children;var b=n(new Map()),c=b[0],e=b[1];b=l(function(a){a=(i||(i=d("I64"))).to_string(a);return c.has(a)?c.get(a):null},[c]);var f=l(function(a,b){var c=(i||(i=d("I64"))).to_string(a);e(function(a){a=new Map(a);b==null||b===""?a["delete"](c):a.set(c,b);return a})},[e]),g=o.Provider,h=p.Provider;return j.jsx(g,{value:b,children:j.jsx(h,{value:f,children:a})})}a.displayName=a.name+" [from "+f.id+"]";function b(){return m(o)}function c(){return m(p)}g.MWDraftProvider=a;g.useMWGetDraft=b;g.useMWUpdateDraft=c}),98);
__d("MAWFindFirstUrl",["getURLRanges"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=c("getURLRanges")(a);return a.length===0?[]:a}g.findFirstUrl=a}),98);
__d("MWPComposerDraftMessages",["FBLogger","I64","LSMessagingThreadTypeUtil","MAWFindFirstUrl","MWHasLinksUtil","cr:5710","justknobx","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Map(),j=void 0;function k(){return Array.from(i.values()).some(function(a){return a.messageText.trim()!==""})}function l(a){return i.get((h||(h=d("I64"))).to_string(a))}function m(){if(!c("justknobx")._("2955")||b("cr:5710")==null||j!=null)return;j=b("cr:5710").onBeforeUnload(function(){if(k())return"You have pending messages. Please wait for them to be sent before closing the window.";return})}function a(a){var b=a.deleteLinkPreviewXMATableData,e=a.fetchAndWriteLinkPreviewXMA,f=a.message,g=a.threadKey;a=a.threadType;if(f==null){i["delete"]((h||(h=d("I64"))).to_string(g));if(i.size===0){var k;(k=j)==null||k.remove();j=void 0}return}if(i.has((h||(h=d("I64"))).to_string(g)))n(g,f);else{k=c("uuidv4")();i.set((h||(h=d("I64"))).to_string(g),{id:k,linkPreviewAbortToken:null,linkPreviewURL:null,messageText:f})}k=a!=null&&d("LSMessagingThreadTypeUtil").isArmadilloSecure(a);k&&o(g,f,e,b);m()}function n(a,b){var e=l(a);if(e==null){c("FBLogger")("messenger_web").mustfix("currentDraft was null in updateDraftMessageText");return}i.set((h||(h=d("I64"))).to_string(a),babelHelpers["extends"]({},e,{messageText:b}))}function o(a,b,e,f){var g,h=l(a);if(h==null){c("FBLogger")("messenger_web_sharing").mustfix("currentDraft was null in updateDraftMessageURL");return}var i=h==null?void 0:h.linkPreviewURL,j=h==null?void 0:h.linkPreviewAbortToken;g=(g=d("MAWFindFirstUrl").findFirstUrl(b))!=null?g:[];b=d("MWHasLinksUtil").getHasLinks(b);b=b?(b=(b=g[0])==null?void 0:b.entity.url)!=null?b:null:null;if(i===b)return;if(b==null){f&&void f({draftId:h.id});j==null||j.abort();p({linkPreviewURL:null,threadKey:a});q({linkPreviewAbortToken:null,threadKey:a});return}p({linkPreviewURL:b,threadKey:a});i=e&&e({draftId:h.id,urls:g})||null;q({linkPreviewAbortToken:i,threadKey:a})}function p(a){var b=a.linkPreviewURL;a=a.threadKey;var e=l(a);if(e==null){c("FBLogger")("messenger_web").mustfix("currentDraft was null in setDraftMessageURL");return}i.set((h||(h=d("I64"))).to_string(a),babelHelpers["extends"]({},e,{linkPreviewURL:b}))}function q(a){var b=a.linkPreviewAbortToken;a=a.threadKey;var e=l(a);if(e==null){c("FBLogger")("messenger_web").mustfix("currentDraft was null in setDraftMessageURL");return}i.set((h||(h=d("I64"))).to_string(a),babelHelpers["extends"]({},e,{linkPreviewAbortToken:b}))}g.getDraftMessage=l;g.updateDraftMessage=a}),98);
__d("MWV2ChatComposerGetViewContent",["Lexical","MessengerLexicalActorNode","MessengerLexicalEntityTextNode","cr:11494"],(function(a,b,c,d,e,f,g){"use strict";a={getRanges:function(a){var c=[],e=0;a.getEditorState().read(function(){var a=d("Lexical").$getRoot().getFirstChild();a instanceof d("Lexical").ElementNode&&a.getChildren().forEach(function(a){if(d("MessengerLexicalEntityTextNode").isMessengerLexicalEntityTextNode(a)){var f=a.getEntity();c.push({id:f.id,length:a.getTextContent().length,offset:e,type:d("MessengerLexicalActorNode").$isMessengerLexicalActorNode(a)?a.getRangeType():"p"})}if(b("cr:11494")!=null&&a instanceof b("cr:11494").MessengerLexicalCommandNode){f=a.getEntity();c.push({id:f.commandId,length:a.getTextContent().length,offset:e,type:a.getRangeType()})}e+=a.getTextContent().length})});return c}};c=a;g["default"]=c}),98);
__d("MWV2ComposerActionsContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;c=b.createContext;var j=b.useContext,k=b.useMemo,l=c({});function a(a){var b=a.children,c=a.onMessageSendAttempt;a=j(l);var d=a.onMessageSendAttempt;a=k(function(){return{onMessageSendAttempt:function(a){d==null||d(a),c==null||c(a)}}},[d,c]);return i.jsx(l.Provider,{value:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";g.MWV2ComposerActionsContext=l;g.MWV2ComposerActionsListener=a}),98);
__d("MWV2ComposerHasContentContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));c=h;e=c.createContext;var j=c.useContext,k=c.useMemo,l=c.useRef,m=e({hasContentRef:void 0});function a(a){a=a.children;var b=l(!1),c=k(function(){return{hasContentRef:b}},[b]);return i.jsx(m.Provider,{value:c,children:a})}a.displayName=a.name+" [from "+f.id+"]";function b(){return j(m)}g.MWV2ComposerHasContentContextProvider=a;g.useComposerHasContext=b}),98);
__d("mwpLexicalCreateEditor",["CometLexicalEmojiNode","FBLogger","Lexical","MessengerLexicalActorNode","cometLexicalBaseTheme","cr:11494","mlcErrorHandler__INTERNAL"],(function(a,b,c,d,e,f,g){"use strict";var h=[d("MessengerLexicalActorNode").MessengerLexicalActorNode,d("CometLexicalEmojiNode").EmojiNode,b("cr:11494")==null?void 0:b("cr:11494").MessengerLexicalCommandNode],i=babelHelpers["extends"]({},c("cometLexicalBaseTheme"),{paragraph:"xat24cr xdj266r",text:{base:"x3jgonx"}});function a(a){var b,e=d("Lexical").createEditor({namespace:"MWPEditor",nodes:(b=a==null?void 0:a.nodes)!=null?b:h.filter(Boolean),onError:function(a){return c("mlcErrorHandler__INTERNAL")(a,e,function(b){c("FBLogger")("messenger_web").catching(a).mustfix("Lexical Error MWP: %s",b)})},theme:(b=a==null?void 0:a.theme)!=null?b:i});return e}g["default"]=a}),98);
__d("useIsMessengerPWA",["ExecutionEnvironment","isMessengerPWA","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=i||d("react");var j=b.useEffect,k=b.useState;function a(){var a=k(c("isMessengerPWA")),b=a[0],d=a[1];j(function(){if(!(h||(h=c("ExecutionEnvironment"))).canUseDOM||!matchMedia)return;var a=matchMedia("(display-mode: standalone)"),b=function(a){d(a.matches)};a.addListener(b);return function(){a.removeListener(b)}},[]);return b}g["default"]=a}),98);
__d("useMWIsOffline",["CometSSRRenderingStateHooks","NetworkStatus","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useState;function a(){var a=d("CometSSRRenderingStateHooks").useIsServerRenderingOrHydrating();a=j(!c("NetworkStatus").isOnline()&&!a);var b=a[0],e=a[1];i(function(){var a=c("NetworkStatus").onChange(function(a){a=a.online;e(!a)});return function(){a.remove()}},[]);return b}g["default"]=a}),98);
__d("MWInboxFocusTarget",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({THREAD_VIEW_AND_OR_COMPOSER:0,THREAD_LIST:1});c=a;f["default"]=c}),66);
__d("useMWGetInboxFocusTargetFromRoute",["CometRouteParams","MWInboxFocusTarget"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("CometRouteParams").useRouteParams();a=a.focus_target;if(a!=null){a=Number(a);return(a=c("MWInboxFocusTarget").cast(a))!=null?a:0}return 0}g["default"]=a}),98);
__d("useMWPComposerAutoFocus",["HiddenSubtreePassiveContext","MWChatFocusComposerContext","MWPReplyContext.react","MWV2IsTabFocusedContext.react","deepEquals","justknobx","react","useMWGetInboxFocusTargetFromRoute","usePrevious"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useContext,k=b.useEffect;function l(a,b){if(c("justknobx")._("4143")){b=b.getCurrentState();b=b.hiddenOrBackgrounded;if(b)return}b=(b=document.activeElement)==null||(b=b.attributes.getNamedItem("id"))==null?void 0:b.value;if(b!=null&&b.includes("prevent-composer-focus-steal"))return;return a.focus(function(){})}function a(a){var b=a.editor,e=a.focusEditorDelayed,f=a.hasUnsentAttachments,g=f===void 0?!1:f;f=a.isPreviewThread;f=f===void 0?!1:f;var h=a.isQuickchat,m=j(c("HiddenSubtreePassiveContext"));a=d("MWChatFocusComposerContext").useMWChatFocusComposer();a=a.setFocusComposer;var n=j(d("MWPReplyContext.react").MWPReplyContext),o=n.reply,p=c("usePrevious")(o);k(function(){(p==null?o!=null:!c("deepEquals")(p,o))&&(h&&e?e(b):l(b,m))},[b,o,p,e,h,m]);n=c("useMWGetInboxFocusTargetFromRoute")();var q=d("MWV2IsTabFocusedContext.react").useIsTabFocused(),r=n===0&&q&&!f;k(function(){r&&(h&&e?e(b):l(b,m))},[b,r,e,h,m]);k(function(){g&&(h&&e?e(b):l(b,m))},[b,g,e,h,m]);a(i(function(){h&&e?e(b):l(b,m)},[b,e,m,h]))}g["default"]=a}),98);
__d("MWPNewMessageDraftContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));c=h;e=c.createContext;var j=c.useContext,k=c.useRef,l=e();function a(a){a=a.children;var b=k("");return i.jsx(l.Provider,{value:b,children:a})}a.displayName=a.name+" [from "+f.id+"]";function b(){return j(l)}g.MWPNewMessageDraftContextProvider=a;g.useNewMessageDraftContext=b}),98);
__d("MWPreloadedText",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=(h||d("react")).createContext;b=a({text:null});g["default"]=b}),98);
__d("useMAWDeleteLinkPreviewXMATableData",["FBLogger","Int64Hooks","LSMessagingThreadTypeUtil","asyncToGeneratorRuntime","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var e=c("useAsyncReStore")(),g=a!=null&&d("LSMessagingThreadTypeUtil").isArmadilloSecure(a);return d("Int64Hooks").useCallbackInt64(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var d=a.draftId;if(!g)return;a=(yield e);a=(yield a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=null;yield a.e2ee_composer_draft_link_preview.get(d).then(function(a){a=JSON.parse((a=a==null?void 0:a.data)!=null?a:"{}");b=a.iframeMediaURL});yield a.e2ee_composer_draft_link_preview["delete"](d);return b});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":40"));if(a!=null)try{URL.revokeObjectURL(a)}catch(a){c("FBLogger")("messenger_web_sharing").mustfix("Failed to revoke the object URL with, failed with error: %s",a)}});return function(b){return a.apply(this,arguments)}}())}g["default"]=a}),98);
__d("MAWExternalLinkUtil",["FBLogger","MAWOembedHelper","MAWOembedIframeContainer.react","Promise","asyncToGeneratorRuntime","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i=[],j=["image/png","image/jpeg","image/jpg"],k=2*1e3;function l(a){return new(h||(h=b("Promise")))(function(b){return c("setTimeout")(b,a)})}function m(a){return(h||(h=b("Promise"))).race([a,l(k)])}function a(a){if(a==null)return null;var b=null;a=a.find(function(a){return Object.values(t).some(function(c){var d=c.schemes;c=c.url;d=d.some(function(b){return b.test(a.entity.url)});d&&(b=c);return d})});return a==null||b==null?null:{oEmbedRequest:b+"?url="+encodeURIComponent(a.entity.url)+"&format=json",oEmbedUrl:a.entity.url}}function e(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b,e=a.fallbackUrl,f=a.qplEvent;a=a.request;b=(b=window.frames["maw-intermediate-iframe"])!=null?b:null;if(b==null){d("MAWOembedIframeContainer.react").createMAWOembedIframeContainer();if(window.frames["maw-intermediate-iframe"]==null){f==null||f.addPoint("get_oembed_response_returned_null",{string:{get_oembed_response_return:"iframe cannot be found."}});c("FBLogger")("messenger_web_sharing").warn("[external link] Cannot find the iframe to request oembed url response.");return}}try{a=(yield m(d("MAWOembedIframeContainer.react").requestUrl(a,d("MAWOembedHelper").MAWOembedIFrameMessageType.OEMBED_REQUEST_URL,b)));if(a==null||a instanceof Blob){f==null||f.addPoint("get_oembed_response_returned_null",{string:{get_oembed_response_returned_null:"oembedResponse is null or an instance of Blob."}});c("FBLogger")("messenger_web").warn("[external link] Failed to fetch oEmbed response: expected json response but got blob.");return}return p({fallbackUrl:e,rawResponse:a})}catch(a){f==null||f.addPoint("get_oembed_response_returned_null",{string:{get_oembed_response_returned_null:"Error thrown when trying to fetch oembed response in iframe."}});c("FBLogger")("messenger_web").warn("[External link] Error thrown when trying to fetch oembed response in iframe.");return}});return n.apply(this,arguments)}function f(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.qplEvent;a=a.xmaData;if(a==null)return(h||(h=b("Promise"))).resolve();var f=u(a.url);f=i.includes(f);if(f)return(h||(h=b("Promise"))).resolve();f=a==null?void 0:a.thumbnail_url;if(f==null||!Boolean(f)){e==null||e.addPoint("get_image_blob_response_returned_null",{string:{get_image_blob_response_returned_null:"url was null or undefined"}});return(h||(h=b("Promise"))).resolve()}a=(a=window.frames["maw-intermediate-iframe"])!=null?a:null;if(a==null){d("MAWOembedIframeContainer.react").createMAWOembedIframeContainer();if(window.frames["maw-intermediate-iframe"]==null){e==null||e.addPoint("get_image_blob_response_returned_null",{string:{get_image_blob_response_returned_null:"iframe cannot be found."}});c("FBLogger")("messenger_web").warn("[external link] Cannot find the iframe to request image blob response.");return}}f=(yield m(d("MAWOembedIframeContainer.react").requestUrl(f,d("MAWOembedHelper").MAWOembedIFrameMessageType.THUMBNAIL_URL,a)));if(f instanceof Blob)return f;e==null||e.addPoint("get_image_blob_response_returned_null",{string:{get_image_blob_response_returned_null:"imageBlobResponse is not instance of Blob"}});c("FBLogger")("messenger_web").warn("[external link] Failed to fetch image blob response. ");return(h||(h=b("Promise"))).resolve()});return o.apply(this,arguments)}function p(a){var b,d=a.fallbackUrl;a=a.rawResponse;if(a.version!=="1.0")throw c("FBLogger")("messenger_web").mustfixThrow("Unsupported response version from oEmbed API");if(a.type==="photo"&&a.url==null)throw c("FBLogger")("messenger_web").mustfixThrow("Unsupported response from oEmbed API: photo does not have url field");return{author_name:a.author_name!=null?decodeURIComponent(a.author_name):void 0,height:a.height,thumbnail_height:a.thumbnail_height,thumbnail_url:a.thumbnail_url,thumbnail_width:a.thumbnail_width,title:a.title!=null?decodeURIComponent(a.title):void 0,type:a.type,url:(b=a.url)!=null?b:d,width:a.width}}function q(a){var b=s.some(function(b){return b.test(a)});return b?!0:Object.values(t).some(function(b){b=b.url;return a.startsWith(b)})}var r=new RegExp("^http(?:s)?:\\/\\/i\\.ytimg\\.com.+$"),s=[new RegExp("^http(?:s)?:\\/\\/i1\\.sndcdn\\.com.+$"),new RegExp("^http(?:s)?:\\/\\/i\\.scdn\\.co.+$"),new RegExp("^http(?:s)?:\\/\\/(?:#!)?[^#?\\/]+\\.cloudfront\\.net.+$"),new RegExp("^http(?:s)?:\\/\\/pi\\.tedcdn\\.com.+$"),new RegExp("^http(?:s)?:\\/\\/static01\\.nyt\\.com.+$"),new RegExp("^http(?:s)?:\\/\\/i\\.vimeocdn\\.com.+$"),new RegExp("^http(?:s)?:\\/\\/(?:#!)?[^#?\\/]+\\.tiktokcdn\\.com.+$"),r],t={NYTimes:{discovery:!0,schemes:[new RegExp("^http(?:s)?:\\/\\/www\\.nytimes\\.com\\/svc\\/oembed$"),new RegExp("^http(?:s)?:\\/\\/nytimes\\.com\\/.+$"),new RegExp("^http(?:s)?:\\/\\/(?:[-\\w]+\\.)?nytimes\\.com\\/.+$")],url:"https://www.nytimes.com/svc/oembed/json/"},SoundCloud:{schemes:[new RegExp("^http(?:s)?:\\/\\/soundcloud\\.com\\/.+$"),new RegExp("^http(?:s)?:\\/\\/on\\.soundcloud\\.com\\/.+$"),new RegExp("^http(?:s)?:\\/\\/soundcloud\\.app\\.goog\\.gl\\/.+$")],url:"https://soundcloud.com/oembed"},Spotify:{discovery:!0,schemes:[new RegExp("^http(?:s)?:\\/\\/open\\.spotify\\.com\\/.+$")],url:"https://open.spotify.com/oembed"},Spreaker:{discovery:!0,schemes:[new RegExp("^http(?:s)?:\\/\\/(?:[-\\w]+\\.)?spreaker\\.com\\/.+$")],url:"https://api.spreaker.com/oembed"},TED:{discovery:!0,schemes:[new RegExp("^http(?:s)?:\\/\\/ted\\.com\\/talks\\/.+$"),new RegExp("^http(?:s)?:\\/\\/www\\.ted\\.com\\/talks\\/.+$")],url:"https://www.ted.com/services/v1/oembed.json"},TikTok:{schemes:[new RegExp("^http(?:s)?:\\/\\/www\\.tiktok\\.com\\/.+$"),new RegExp("^http(?:s)?:\\/\\/www\\.tiktok\\.com\\/(?:#!)?[^#?\\/]+\\/video\\/.+$")],url:"https://www.tiktok.com/oembed"},Vimeo:{discovery:!0,schemes:[new RegExp("^http(?:s)?:\\/\\/vimeo\\.com\\/.+$"),new RegExp("^http(?:s)?:\\/\\/vimeo\\.com\\/album\\/(?:#!)?[^#?\\/]+\\/video\\/.+$"),new RegExp("^http(?:s)?:\\/\\/vimeo\\.com\\/channels\\/(?:#!)?[^#?\\/]+\\/.+$"),new RegExp("^http(?:s)?:\\/\\/vimeo\\.com\\/groups\\/(?:#!)?[^#?\\/]+\\/video\\/.+$"),new RegExp("^http(?:s)?:\\/\\/vimeo\\.com\\/ondemand\\/(?:#!)?[^#?\\/]+\\/.+$"),new RegExp("^http(?:s)?:\\/\\/player\\.vimeo\\.com\\/video\\/.+$")],url:"https://vimeo.com/api/oembed.json"},youtube:{discovery:!0,schemes:[new RegExp("^http(?:s)?:\\/\\/(?:[-\\w]+\\.)?youtube\\.com\\/watch.+$"),new RegExp("^http(?:s)?:\\/\\/(?:[-\\w]+\\.)?youtube\\.com\\/v\\/.+$"),new RegExp("^http(?:s)?:\\/\\/youtu\\.be\\/.+$"),new RegExp("^http(?:s)?:\\/\\/(?:[-\\w]+\\.)?youtube\\.com\\/playlist\\?list\\=.+$"),new RegExp("^http(?:s)?:\\/\\/youtube\\.com\\/playlist\\?list\\=.+$"),new RegExp("^http(?:s)?:\\/\\/(?:[-\\w]+\\.)?youtube\\.com\\/shorts.+$")],url:"https://www.youtube.com/oembed"}};function u(a){return Object.keys(t).find(function(b){return t[b].schemes.some(function(b){return b.test(a)})})}g.allowedPreviewTypes=j;g.findFirstAvailableOembedUrlAndRequestPair=a;g.getOembedResponse=e;g.getImageBlobResponse=f;g.isAllowedRequestForFbsbx=q}),98);
__d("MAWOembedHelper",["$InternalEnum","ConstUriUtils","FBLogger","MAWExternalLinkUtil","SecureMessageListener","SecurePostMessage","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h=["facebook.com","messenger.com","instagram.com","internalfb.com"];function i(a){if(a==null||typeof a!=="object")return null;var b=a.requestURL;a=a.requestMessageType;if(typeof a!=="string"||typeof b!=="string"||!d("ConstUriUtils").isValidUri(b))return null;a=j.cast(a);return a==null||a!==j.OEMBED_REQUEST_URL&&a!==j.THUMBNAIL_URL?null:[a,b]}function a(){var a=null,b=new(c("SecureMessageListener"))(window);function e(b){a=b.origin;b=b.data;b=i(b);if(b==null)return;var e=b[0],g=b[1];if(!d("MAWExternalLinkUtil").isAllowedRequestForFbsbx(g))return;c("promiseDone")(window.fetch(g).then(function(a){a.status!==200&&c("FBLogger")("messenger_web").mustfix("[external link] fbsbx page fetching for the response is not successful.");switch(e){case j.OEMBED_REQUEST_URL:return a.json();case j.THUMBNAIL_URL:return a.blob()}}).then(function(a){f({type:e,url:g,value:a})})["catch"](function(){c("FBLogger")("messenger_web").warn("[external link] Failed to fetch response in helper js.")}))}b.setEventHandler(e).setSupportedOrigins(h);b.beginListening();function f(b,d){var e=d!=null?d:1;if(a==null){e<=3&&window.setTimeout(function(){f(b,e+1)},250*Math.pow(2,e*e));return}c("SecurePostMessage").sendMessageToSpecificOrigin(window.parent,b,a)}}var j=b("$InternalEnum").Mirrored(["OEMBED_REQUEST_URL","THUMBNAIL_URL"]);g.init=a;g.MAWOembedIFrameMessageType=j}),98);
__d("XFBSbxMAWProxyPageControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/maw_proxy_page/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("MAWOembedIframeContainer.react",["CookieConsentIFrameConfig","FBLogger","MAWOembedHelper","Promise","SecureMessageListener","SecurePostMessage","WAResolvable","XFBSbxMAWProxyPageControllerRouteBuilder"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){return"www.fbsbx.com"}var j=new Map(),k=null;function a(a,e,f){var g=j.get(a);if(g!=null)return g.promise;g=n(i());if(g==null)return(h||(h=b("Promise"))).resolve();c("SecurePostMessage").sendMessageToSpecificOrigin(f.contentWindow,{requestMessageType:e,requestURL:a},g);f=new(d("WAResolvable").Resolvable)();j.set(a,f);return f.promise}function l(a){if(a==null||typeof a!=="object")return null;var b=a.url,e=a.value;a=a.type;if(b==null||e==null||a==null||typeof a!=="string")return null;var f=d("MAWOembedHelper").MAWOembedIFrameMessageType.cast(a);if(typeof b==="string"&&f!=null){if(f===d("MAWOembedHelper").MAWOembedIFrameMessageType.THUMBNAIL_URL&&e instanceof Blob)return{type:d("MAWOembedHelper").MAWOembedIFrameMessageType.THUMBNAIL_URL,url:b,value:e};if(f===d("MAWOembedHelper").MAWOembedIFrameMessageType.OEMBED_REQUEST_URL&&typeof e==="object"&&e.title!=null&&e.thumbnail_url!=null){f={author_name:typeof e.author_name==="string"?e.author_name:void 0,height:typeof e.height==="number"?e==null?void 0:e.height:150,thumbnail_height:typeof e.thumbnail_height==="number"?e.thumbnail_height:void 0,thumbnail_url:typeof e.thumbnail_url==="string"?e.thumbnail_url:void 0,thumbnail_width:typeof e.thumbnail_width==="number"?e.thumbnail_width:void 0,title:typeof e.title==="string"?e.title:void 0,type:typeof e.type==="string"?e.type:"photo",version:typeof e.version==="string"?e.version:"1.0",width:typeof e.width==="number"?e.width:200};return{type:d("MAWOembedHelper").MAWOembedIFrameMessageType.OEMBED_REQUEST_URL,url:b,value:f}}}c("FBLogger")("messenger_web").warn("Failed to handle message %s from fbsbx: cannot process event message in the correct format",a);return null}var m=function(a){a=l(a.data);if(a==null)return;var b=a.url;a=a.value;b=j.get(b);if(b==null){c("FBLogger")("messenger_web").warn("Failed to handle message from fbsbx: cannot find the resolvable promise for the url");return}b.resolve(a)};function e(){var a;a=(a=window.frames["maw-intermediate-iframe"])!=null?a:null;var b=n(i());if(a!=null){(a=k)==null||a.beginListening();return k}if(b==null){c("FBLogger")("messenger_web").warn("Failed to create maw-intermediate-iframe iFrame: cannot find the fbsbxUri");return}a=document.createElement("iframe");a.style.display="none";a.className="MAWOembedIframe";a.id="maw-intermediate-iframe";a.src=b;(b=document.body)==null||b.appendChild(a);k=new(c("SecureMessageListener"))(window).setEventHandler(m).setSupportedOrigins(["fbsbx.com"]);k.beginListening();return k}function n(a){var b;return(b=c("XFBSbxMAWProxyPageControllerRouteBuilder").buildUri({__cci:(b=c("CookieConsentIFrameConfig").consent_param)!=null?b:""}).setProtocol("https"))==null||(b=b.setDomain(a))==null?void 0:b.toString()}g.requestUrl=a;g.createMAWOembedIframeContainer=e}),98);
__d("MAWPreProcessLinkPreviewQPL",["MAWLoggerUtils","QPLUserFlow","justknobx","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h=c("qpl")._(1056840460,"718");function a(a){var b=a.draftId;a=a.url;b=b.concat(a);var e=d("MAWLoggerUtils").getInstanceKeyFromId(b);a=c("justknobx")._("2714");c("QPLUserFlow").start(h,{annotations:{string:{preprocess_type:"link_preview_xma"}},instanceKey:e,timeoutInMs:a});return{addAnnotations:function(a){c("QPLUserFlow").addAnnotations(h,a,{instanceKey:e})},addPoint:function(a,b){c("QPLUserFlow").addPoint(h,a,{instanceKey:e}),b!=null&&c("QPLUserFlow").addAnnotations(h,b,{instanceKey:e})},endCancel:function(a,b){c("QPLUserFlow").endCancel(h,{annotations:a,cancelReason:b,instanceKey:e})},endFail:function(a,b){c("QPLUserFlow").endFailure(h,a,{instanceKey:e}),b!=null&&c("QPLUserFlow").addAnnotations(h,b,{instanceKey:e})},endSuccess:function(){c("QPLUserFlow").endSuccess(h,{instanceKey:e})}}}g.startMediaPreProcessLinkPreviewQpl=a}),98);
__d("useMAWFetchAndWriteLinkPreviewXMATableData",["ConstUriUtils","E2EELinkPreviewXMADataStatus","E2EELinkPreviewXMADataType","FBLogger","I64","Int64Hooks","LSMessagingThreadTypeUtil","MAWExternalLinkUtil","MAWPreProcessLinkPreviewQPL","asyncToGeneratorRuntime","getRequestConstUri","isFacebookURI","promiseDone","useAsyncReStore","useMAWDeleteLinkPreviewXMATableData","useXMAPreviewsDisabledSetting"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(){var a=!1;return{abort:function(){a=!0},isAborted:function(){return a}}};function e(a){var e=a.threadKey;a=a.threadType;var f=c("useAsyncReStore")(),g=a!=null&&d("LSMessagingThreadTypeUtil").isArmadilloSecure(a),h=c("useMAWDeleteLinkPreviewXMATableData")(a),l=c("getRequestConstUri")(),n=c("useXMAPreviewsDisabledSetting")();return d("Int64Hooks").useCallbackInt64(function(a){var o=a.draftId,p=a.urls,q=i();a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(!g)return;var a=d("ConstUriUtils").getUri(p[0].entity.url);if(a==null)return;var b=d("MAWPreProcessLinkPreviewQPL").startMediaPreProcessLinkPreviewQpl({draftId:o,url:a.toString()}),i=c("isFacebookURI")(a),r=c("isFacebookURI")(l);r=i&&r;if(i&&n){j({abortToken:q,dbPromise:f,deleteLinkPreviewXMATableData:h,draftId:o,qplEvent:b,qplSubspanPoint:"write_fb_disabled",status:c("E2EELinkPreviewXMADataStatus").DISABLED,threadKey:e,xmaData:null});b.endCancel({string:{cancel_reason:"fb_xmas_disabled"}},706);return}j({abortToken:q,dbPromise:f,deleteLinkPreviewXMATableData:h,draftId:o,qplEvent:b,qplSubspanPoint:"write_loading_status",status:c("E2EELinkPreviewXMADataStatus").LOADING,threadKey:e,xmaData:{title:a.getDomain(),url:a.toString()}});b.addAnnotations({bool:{should_fetch_from_og:r},string:{link_type:i?"facebook":"external"}});i=r?yield k(a.toString(),b):yield m(p,b);r=i.dataType;a=i.xmaData;j({abortToken:q,dataType:r,dbPromise:f,deleteLinkPreviewXMATableData:h,draftId:o,qplEvent:b,qplSubspanPoint:"write_xma_data",status:c("E2EELinkPreviewXMADataStatus").LOADED,threadKey:e,xmaData:a})});return function(){return a.apply(this,arguments)}}();void a();return q})}function j(a){var b=a.abortToken,e=a.dataType,g=a.dbPromise,i=a.deleteLinkPreviewXMATableData,j=a.draftId,k=a.qplEvent,l=a.qplSubspanPoint,m=a.status,n=a.xmaData;k.addAnnotations({"int":{data_type:e}});if(b.isAborted()){k.endCancel({string:{cancel_reason:"fetch_aborted"}},706);return}k.addPoint(l+"_start");c("promiseDone")(g,function(a){return a.runInTransaction(function(a){return a.e2ee_composer_draft_link_preview.put({data:n!=null?JSON.stringify(n):void 0,dataType:e!=null?(h||(h=d("I64"))).of_int32(e):void 0,draftId:j,status:(h||(h=d("I64"))).of_int32(m)})},"readwrite",void 0,void 0,f.id+":213").then(function(a){b.isAborted()&&(k.endCancel({string:{cancel_reason:"fetch_aborted_delete"}},706),void i({draftId:a[0]})),k.addPoint(l+"_success"),l==="write_xma_data"&&k.endSuccess()})["catch"](function(a){k.endFail(l+"_failed",{string:{data_status:String(m),error:"Error thrown when writing Link Preview XMA data to LSDB table. Error: "+a}}),c("FBLogger")("messenger_web_sharing").catching(a).mustfix("Failed to write Link Preview XMA data to LSDB table.")})})}function k(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e;b.addPoint("fetch_fb_og_data_start");e=(e=(e=d("ConstUriUtils").getUri(a))==null?void 0:e.getDomain())!=null?e:a;try{var f;b.addPoint("http_request_start");var g=(yield window.fetch(a,{credentials:"omit",referrerPolicy:"no-referrer"}));b.addPoint("http_response_end");if(!g.ok){b.addPoint("fetch_fb_og_data_end",{string:{fetch_fb_og_data_end:"http_response_error",response_status_code:String(g.status),xma_data_returned:"fallback"}});return o(e,a)}g=(yield g.text());var h=new DOMParser();h=h.parseFromString(g,"text/html");h.querySelector("parsererror")&&b.addPoint("html_parsererror");g=(g=h.querySelector('meta[property="og:image"]'))==null?void 0:g.getAttribute("content");f=(f=h.querySelector('meta[name="description"]'))==null?void 0:f.getAttribute("content");h=(h=h.querySelector('meta[property="og:title"]'))==null?void 0:h.getAttribute("content");if(g==null&&f==null&&h==null){b.addPoint("fetch_fb_og_data_end",{string:{fetch_fb_og_data_end:"og_data_is_null",xma_data_returned:"fallback"}});return o(e,a)}b.addPoint("fetch_fb_og_data_success",{string:{xma_data_returned:"rich_xma"}});return{dataType:c("E2EELinkPreviewXMADataType").FB_CLIENT_FETCH,xmaData:{author_name:f!=null?f:void 0,iframeMediaURL:g,thumbnail_url:g!=null?g:void 0,title:h!=null?h:e,url:a}}}catch(c){b.addPoint("fetch_fb_og_data_end",{string:{fetch_fb_og_data_end:"failed_to_fetch_data",xma_data_returned:"fallback"}});return o(e,a)}});return l.apply(this,arguments)}function m(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,e){e.addPoint("fetch_external_link_oembed_data_start");var f=d("MAWExternalLinkUtil").findFirstAvailableOembedUrlAndRequestPair(b);b=b[0].entity.url;var g=null;if(f!=null){b=f.oEmbedUrl;try{e.addPoint("get_oembed_response_start"),g=(yield d("MAWExternalLinkUtil").getOembedResponse({fallbackUrl:b,qplEvent:e,request:f.oEmbedRequest})),e.addPoint("get_oembed_response_success")}catch(a){e.addPoint("get_oembed_response_returned_null",{string:{get_oembed_response_returned_null:"Error thrown when fetching oEmbed data for External Link XMA. Error message: "+a}}),e.addPoint("get_oembed_response_end"),c("FBLogger")("messenger_web_sharing").catching(a).mustfix("[External link] Error thrown when fetching oEmbed data for External Link XMA.")}}f=(f=d("ConstUriUtils").getUri(b))==null?void 0:f.getDomain();if(g==null){e.addPoint("fetch_external_link_oembed_data_success",{string:{xma_data_returned:"fallback"}});return o(f!=null?f:b,b)}e==null||e.addPoint("get_image_blob_response_start");var h=(yield d("MAWExternalLinkUtil").getImageBlobResponse({qplEvent:e,xmaData:g})),i=null;if(h!=null&&d("MAWExternalLinkUtil").allowedPreviewTypes.includes(h.type)){h=new File([h],"preview",{type:h.type});i=a.URL.createObjectURL(h)}e==null||e.addPoint("get_image_blob_response_end",{bool:{media_url_is_null:i==null}});e.addPoint("fetch_external_link_oembed_data_success",{string:{xma_data_returned:"rich_xma"}});return{dataType:c("E2EELinkPreviewXMADataType").OEMBED,xmaData:babelHelpers["extends"]({iframeMediaURL:i},g,{title:(h=g.title)!=null?h:f,url:(e=g.url)!=null?e:b})}});return n.apply(this,arguments)}function o(a,b){return{dataType:c("E2EELinkPreviewXMADataType").FALLBACK,xmaData:{title:a,url:b}}}g["default"]=e}),98);
__d("useMWLSSaveDrafts",["CometDebounce","Int64Hooks","LexicalText","MWDraftMessages.react","MWPComposerDraftMessages","MWPNewMessageDraftContext.react","isStringNullOrEmpty","justknobx","react","useMAWDeleteLinkPreviewXMATableData","useMAWFetchAndWriteLinkPreviewXMATableData"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback,j=c("justknobx")._("3119");function a(a){var b=a.editor,e=a.isPreviewThread,f=a.threadKey,g=a.threadType,h=d("MWDraftMessages.react").useMWUpdateDraft(),k=j,l=c("useMAWFetchAndWriteLinkPreviewXMATableData")({threadKey:f,threadType:g}),m=c("useMAWDeleteLinkPreviewXMATableData")(g),n=d("MWPNewMessageDraftContext.react").useNewMessageDraftContext(),o=i(function(a){e&&n!=null?n.current=a:(h==null||h(f,a),d("MWPComposerDraftMessages").updateDraftMessage({deleteLinkPreviewXMATableData:m,fetchAndWriteLinkPreviewXMA:l,message:a,threadKey:f,threadType:g}))},[h,m,l,e,n,f,g]);d("Int64Hooks").useEffectInt64(function(){b.registerUpdateListener(c("CometDebounce")(function(a){a=a.editorState;a=a.read(function(){return d("LexicalText").$rootTextContent()});if(c("isStringNullOrEmpty")(a)){o(a);return}o(a)},{wait:k}))},[k,b,o]);d("Int64Hooks").useEffectInt64(function(){var a=b.getEditorState().read(function(){return d("LexicalText").$rootTextContent()});o(a)},[b,o])}g["default"]=a}),98);
__d("useMWPComposerEditorDraftText",["MWPComposerDraftMessages","MWPNewMessageDraftContext.react","MWPreloadedText","react","useMWLSSaveDrafts","usePrepopulateLexicalEditor"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useContext;function a(a){var b=a.editor,e=a.isPreviewThread;e=e===void 0?!1:e;var f=a.isQuickchat;f=f===void 0?!1:f;var g=a.threadKey;a=a.threadType;var h=d("MWPNewMessageDraftContext.react").useNewMessageDraftContext(),j=i(c("MWPreloadedText"));h=j.text!=null?j.text:h!=null?h.current:(j=d("MWPComposerDraftMessages").getDraftMessage(g))==null?void 0:j.messageText;c("useMWLSSaveDrafts")({editor:b,isPreviewThread:e,threadKey:g,threadType:a});c("usePrepopulateLexicalEditor")(b,f?void 0:h);return h}g["default"]=a}),98);
__d("useMWPLexicalCommitMessageOnEnter",["Lexical","MLCInstrumentationCommands","MLCKeyBindingUtil","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useLayoutEffect,j=b.useRef,k=250;function a(a,b){var e=j(null);i(function(){return a.registerCommand(d("Lexical").KEY_ENTER_COMMAND,function(f){f=f;if(d("MLCKeyBindingUtil").hasCommandModifier(f)&&c("gkx")("13931")&&!c("gkx")("23402"))return!1;if(f!=null&&!f.shiftKey&&!f.altKey&&(!c("gkx")("23402")||d("MLCKeyBindingUtil").hasCommandModifier(f))){f.preventDefault();var g=e.current;if(g!=null&&f.timeStamp-g<=k&&c("gkx")("15485")){e.current=f.timeStamp;return!0}a.dispatchCommand(d("MLCInstrumentationCommands").COMMIT_COMMAND,"create");b();e.current=f.timeStamp;return!0}return!1},d("Lexical").COMMAND_PRIORITY_LOW)},[a,b])}g["default"]=a}),98);
__d("useMWXLexicalHasText",["LexicalText","react"],(function(a,b,c,d,e,f,g){"use strict";var h;c=h||d("react");var i=c.useCallback,j=c.useEffect,k=c.useRef,l=c.useState;function m(a){return a.getEditorState().read(d("LexicalText").$isRootTextContentEmptyCurry(a.isComposing()))}function n(a){var b=l(function(){return!m(a)}),c=b[0],d=b[1];j(function(){return a.registerUpdateListener(function(){d(!m(a))})},[a]);return c}function a(a){var b=a.editor;a=a.initialValue;var c=k(a);return{useHasText:i(function(){var a,d=k((a=c.current)!=null?a:!1);j(function(){d.current=!1},[]);return n(b)||d.current},[b])}}function b(a){var b=a.editor;a=a.initialValue;a=k(a);var c=k((a=a.current)!=null?a:!1);j(function(){c.current=!1},[]);return n(b)||c.current}g.useMWXLexicalHasText_DEPRECATED=a;g.useMWXLexicalHasText=b}),98);
__d("MWXUseLatch",["CometThrottle","Run","debounce","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useMemo;function a(a,b,e){var f=b!=null?b:!1;i(function(){if(!f)return;var b=d("Run").onUnload(function(){return a(!1)});return function(){return b.remove()}},[f,a]);return j(function(){var b={contents:!1},d=c("debounce")(function(){if(!b.contents)return a(!1)},e|0),f=c("CometThrottle")(function(){return a(!0)},3e3,{leading:!0,trailing:!1}),g=function(){a(!1),b.contents=!0},h=function(){f();return d()};return[h,g]},[a,e])}g.useLatch=a}),98);
__d("useMWXLexicalOnTypingChanged",["LexicalText","MWXUseLatch","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useRef;function a(a){var b=a.editor;a=a.onTypingStateChanged;a=d("MWXUseLatch").useLatch(a,!0,5e3);var c=a[0],e=a[1],f=j("");i(function(){var a=function(a){a=a.editorState.read(function(){return d("LexicalText").$rootTextContent()});if(a!==f.current){f.current=a;if(a==="")return e();else return c()}};return b.registerUpdateListener(a)},[c,e,b]);return{}}g["default"]=a}),98);
__d("useMWPComposerEditor",["I64","Int64Hooks","Lexical","LexicalText","MWChatMessagesOnChatTabLoadTracker","MWDraftMessages.react","MWFBLogger","MWPComposerDraftMessages","MWV2ChatComposerGetViewContent","MWV2ComposerActionsContext.react","MWV2ComposerHasContentContext.react","cr:7101","emptyFunction","mwpLexicalCreateEditor","react","useIsMessengerPWA","useLexicalInitializeEditor__DEPRECATED","useMWIsOffline","useMWPComposerAutoFocus","useMWPComposerEditorDraftText","useMWPLexicalClearEditor","useMWPLexicalCommitMessageOnEnter","useMWXLexicalHasText","useMWXLexicalOnTypingChanged"],(function(a,b,c,d,e,f,g){"use strict";var h,i;f=h||d("react");var j=f.useContext,k=f.useEffect,l=f.useMemo,m=f.useRef;function a(a){return}var n=b("cr:7101")==null?a:b("cr:7101").useMWComposerKeyCommandFocusRegister,o=[],p=function(a){return a.read(function(){return d("LexicalText").$rootTextContent()})};function e(a){var b=a.customizedRanges,e=a.getTextFromEditorState,f=e===void 0?p:e;e=a.isPreviewThread;e=e===void 0?!1:e;var g=a.isSendDisabled;g=g===void 0?!1:g;var h=a.mediaStaging;h=h===void 0?o:h;var q=a.onSendMessage,r=a.onTypingStateChanged,s=a.threadKey,t=a.clearFormatAfterSend,u=a.isQuickchat;u=u===void 0?!1:u;var v=a.focusEditorDelayed,w=a.editorNodes,x=a.editorTheme,y=a.threadType,z=a.composerEntrypointForLogging;a=m(null);var A=l(function(){return c("mwpLexicalCreateEditor")({nodes:w,theme:x})},[w,x]);h=h.length>0;c("useLexicalInitializeEditor__DEPRECATED")(A);c("useMWPLexicalClearEditor")(A,t);c("useMWPComposerAutoFocus")({editor:A,focusEditorDelayed:v,hasUnsentAttachments:h,isPreviewThread:e,isQuickchat:u});t=c("useMWPComposerEditorDraftText")({editor:A,isPreviewThread:e,isQuickchat:u,threadKey:s,threadType:y});var B=d("MWDraftMessages.react").useMWUpdateDraft(),C=d("useMWXLexicalHasText").useMWXLexicalHasText({editor:A,initialValue:t!=null&&t!==""}),D=C||h;v=d("MWV2ComposerHasContentContext.react").useComposerHasContext();var E=v.hasContentRef;k(function(){if(E==null)return;E.current=C},[C,E]);c("useMWXLexicalOnTypingChanged")({editor:A,onTypingStateChanged:r});e=j(d("MWV2ComposerActionsContext.react").MWV2ComposerActionsContext);var F=e.onMessageSendAttempt;u=c("useMWIsOffline")();y=c("useIsMessengerPWA")();var G=u&&y;t=d("Int64Hooks").useCallbackInt64(function(){var a;if(G)return;a=(a=d("MWPComposerDraftMessages").getDraftMessage(s))==null?void 0:a.id;d("MWPComposerDraftMessages").updateDraftMessage({message:null,threadKey:s});B==null||B(s,null);F==null||F(D);if(!D)return;d("MWChatMessagesOnChatTabLoadTracker").trackSendFor(s);d("MWFBLogger").MWLogger.tags(["MWPComposerEditor","Composer"]).debug("Calling onSendMessage");var e=b!=null?b(A,(i||(i=d("I64"))).to_string(s)):c("MWV2ChatComposerGetViewContent").getRanges(A),g=A.getEditorState();g=f(g);A.dispatchCommand(d("Lexical").CLEAR_EDITOR_COMMAND);q(g,e,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,a,z);A.focus()},[B,G,F,D,A,s,b,f,q,z]);h=g?c("emptyFunction"):t;c("useMWPLexicalCommitMessageOnEnter")(A,h);n(a.current);return{editor:A,editorElementRef:a,hasStuffToSend:D,sendMessage:h}}g["default"]=e}),98);
__d("useMWIsHDMediaEnabled",["MWPActor.react","MessengerWebPrivacySettings","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=(h||(h=c("useReStore")))(),b=d("MWPActor.react").useActor(),e=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(a.tables.messaging_privacy_settings).getKeyRange(b)},[a,b],f.id+":22");return e==null?c("MessengerWebPrivacySettings").e2ee_hd_media_enabled:(e=e==null?void 0:e.e2eeHdMediaEnabled)!=null?e:!1}g["default"]=a}),98);
__d("useMWV2FileDropzoneRegisterHandler",["MWV2FileDropzone.react","react","useMWIsHDMediaEnabled"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useContext,j=b.useEffect;function a(a){var b=i(d("MWV2FileDropzone.react").mWV2FileDropzoneContext),e=c("useMWIsHDMediaEnabled")();j(function(){var c={enabled:!0,handler:function(b){return a(b,e)}};b.current=c;return function(){c.enabled=!1,c.handler=null}},[b,a,e])}g["default"]=a}),98);
__d("MessengerClickImpressionEventsLoggerUtils",["$InternalEnum","I64","MWPActor.react","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;e=b("$InternalEnum").Mirrored(["CLICK","IMPRESSION","CONVERSION"]);function a(a,b){var e=(i||(i=c("useReStore")))(),g=d("MWPActor.react").useActor();b=(h||(h=d("I64"))).to_int32(b!=null?b:(h||(h=d("I64"))).zero);var j=b===1||b===15;b=d("ReQLSuspense").useArray(function(){return j&&a!=null?d("ReQL").fromTableAscending(e.tables.participants).getKeyRange(a):d("ReQL").empty()},[e,a,j],f.id+":72");if(a==null)return null;if(j){b=b.map(function(a){return(h||(h=d("I64"))).to_string(a.contactId)}).filter(function(a){return a!==(h||(h=d("I64"))).to_string(g)})[0];return b}else return(h||(h=d("I64"))).to_string(a)}g.EventTypeEnum=e;g.useGetUniqueThreadID=a}),98);
__d("MessengerInboxTrayConversionClickEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("3905");b=d("FalcoLoggerInternal").create("messenger_inbox_tray_conversion_click_event",a);e=b;g["default"]=e}),98);
__d("MessengerInboxTrayEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("3476");b=d("FalcoLoggerInternal").create("messenger_inbox_tray_event",a);e=b;g["default"]=e}),98);
__d("MessengerInboxTrayClickImpressionEventsLoggerImpl",["MessengerClickImpressionEventsLoggerUtils","MessengerInboxTrayConversionClickEventFalcoEvent","MessengerInboxTrayEventFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";function a(a){h(a,d("MessengerClickImpressionEventsLoggerUtils").EventTypeEnum.CLICK)}function b(a,b){h(a,d("MessengerClickImpressionEventsLoggerUtils").EventTypeEnum.CONVERSION,b)}function e(a){h(a,d("MessengerClickImpressionEventsLoggerUtils").EventTypeEnum.IMPRESSION)}function h(a,b,e){var f=a.id,g=a.isOnline,h=a.messageThreadId,i=a.position,j=a.storyIds,k=a.surface;a=a.targetType;var l;if(b===d("MessengerClickImpressionEventsLoggerUtils").EventTypeEnum.CLICK)l="single_click";else if(b===d("MessengerClickImpressionEventsLoggerUtils").EventTypeEnum.CONVERSION)l="single_click";else if(b===d("MessengerClickImpressionEventsLoggerUtils").EventTypeEnum.IMPRESSION)l="one_px_impression";else return;var m={event_type:l,surface:{entry_point:k.entry_point,major_surface:k.major_surface,minor_surface:k.minor_surface},target:{ranking:{absolute_position:i!=null?i.toString():"-1"},type:a,user:{id:f}}};g!=null&&(m=babelHelpers["extends"]({},m,{target:babelHelpers["extends"]({},m.target,{presence:{status:g?1:0}})}));if((j==null?void 0:j.firstCardId)!=null&&(j==null?void 0:j.bucketId)!=null){l=atob(j.firstCardId);k=null;l!=null&&l.includes("S:_ISC:")&&(k=l.split("S:_ISC:")[1]);m=babelHelpers["extends"]({},m,{target:babelHelpers["extends"]({},m.target,{story:{bucket_id:(i=j.bucketId)!=null?i:null,first_card_id:k!=null?k:null}})})}b===d("MessengerClickImpressionEventsLoggerUtils").EventTypeEnum.CLICK?c("MessengerInboxTrayEventFalcoEvent").log(function(){return m}):b===d("MessengerClickImpressionEventsLoggerUtils").EventTypeEnum.CONVERSION?(m=babelHelpers["extends"]({},m,{target:babelHelpers["extends"]({},m.target,{button:e!=null?{type:e}:void 0,message_thread:h!=null?{consistent_thread_fbid:h}:void 0})}),c("MessengerInboxTrayConversionClickEventFalcoEvent").log(function(){return m})):b===d("MessengerClickImpressionEventsLoggerUtils").EventTypeEnum.IMPRESSION&&c("MessengerInboxTrayEventFalcoEvent").log(function(){return m})}g.logClickEvent=a;g.logConversionClickEvent=b;g.logImpressionEvent=e}),98);
__d("MessengerSidebarClickEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2305");b=d("FalcoLoggerInternal").create("messenger_sidebar_click_event",a);e=b;g["default"]=e}),98);
__d("MessengerSidebarConversionClickEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2306");b=d("FalcoLoggerInternal").create("messenger_sidebar_conversion_click_event",a);e=b;g["default"]=e}),98);
__d("MessengerSidebarImpressionEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2307");b=d("FalcoLoggerInternal").create("messenger_sidebar_impression_event",a);e=b;g["default"]=e}),98);
__d("MessengerSidebarClickImpressionEventsLoggerImpl",["MessengerClickImpressionEventsLoggerUtils","MessengerSidebarClickEventFalcoEvent","MessengerSidebarConversionClickEventFalcoEvent","MessengerSidebarImpressionEventFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";f={scrollMargin:-33};function a(a){h(a,d("MessengerClickImpressionEventsLoggerUtils").EventTypeEnum.CLICK)}function b(a){h(a,d("MessengerClickImpressionEventsLoggerUtils").EventTypeEnum.CONVERSION)}function e(a){h(a,d("MessengerClickImpressionEventsLoggerUtils").EventTypeEnum.IMPRESSION)}function h(a,b){var e=a.id,f=a.isOnline,g=a.position,h=a.storyIds,i=a.surface;a=a.targetType;var j;if(b===d("MessengerClickImpressionEventsLoggerUtils").EventTypeEnum.CLICK)j="single_click";else if(b===d("MessengerClickImpressionEventsLoggerUtils").EventTypeEnum.CONVERSION)j="single_click";else if(b===d("MessengerClickImpressionEventsLoggerUtils").EventTypeEnum.IMPRESSION)j="vpvd_impression";else return;var k={event_type:j,surface:{entry_point:i.entry_point,major_surface:i.major_surface,minor_surface:i.minor_surface},target:{ranking:{absolute_position:g!=null?g.toString():"-1"},type:a,user:{id:e}}};f!=null&&(k=babelHelpers["extends"]({},k,{target:babelHelpers["extends"]({},k.target,{presence:{status:f?1:0}})}));if((h==null?void 0:h.firstCardId)!=null&&(h==null?void 0:h.bucketId)!=null){j=atob(h.firstCardId);i=null;j!=null&&j.includes("S:_ISC:")&&(i=j.split("S:_ISC:")[1]);k=babelHelpers["extends"]({},k,{target:babelHelpers["extends"]({},k.target,{story:{bucket_id:(g=h.bucketId)!=null?g:null,first_card_id:i!=null?i:null}})})}b===d("MessengerClickImpressionEventsLoggerUtils").EventTypeEnum.CLICK?c("MessengerSidebarClickEventFalcoEvent").log(function(){return k}):b===d("MessengerClickImpressionEventsLoggerUtils").EventTypeEnum.CONVERSION?c("MessengerSidebarConversionClickEventFalcoEvent").log(function(){return k}):b===d("MessengerClickImpressionEventsLoggerUtils").EventTypeEnum.IMPRESSION&&c("MessengerSidebarImpressionEventFalcoEvent").log(function(){return k})}g.IMPRESSION_LOG_OPTIONS=f;g.logClickEvent=a;g.logConversionClickEvent=b;g.logImpressionEvent=e}),98);
__d("useIGDChatTabsMessagingSource.react",["I64","IGDChatTabsStateContext.react","IGDChatTabsStateTypes","MWLSThreadDisplayContext"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),c=d("IGDChatTabsStateContext.react").useIGDChatTabsState();if(b==="ChatTab"){b=c==null?void 0:c.openedTabs.get((h||(h=d("I64"))).to_string(a));return(c=b==null?void 0:b.source)!=null?c:d("IGDChatTabsStateTypes").IGDChatTabsMessagingInitiationSource.Unknown}return null}g["default"]=a}),98);
__d("MessengerIntent",["WebStorage","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i="mw_sent_message";function j(){return c("justknobx")._("1630")}function a(){(h||(h=c("WebStorage"))).setItemGuarded(h.getLocalStorage(),i,String(Date.now()))}function b(){var a=(h||(h=c("WebStorage"))).getLocalStorage();return Date.now()-Number(a==null?void 0:a.getItem(i))<j()}g.sentMessage=a;g.hasSentMessagesRecently=b}),98);
__d("MWLSLogSend",["CometHeroLogging","I64","MWChatInteraction","MWSharedS2SBaseAnnotations","MessengerIntent"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e){var f=e.isCommunityEvent,g=e.isMessageRequest,i=e.source;e=e.threadType;var j=c("CometHeroLogging").genHeroInteractionUUIDAndMarkStart(a.getTraceId());d("MWChatInteraction").set(b,j);j={entrypoint:d("MWSharedS2SBaseAnnotations").getEntrypointAnnotation(i),is_community_event:f===!0?"true":"false",is_message_request:g===!0?"true":"false",thread_type:e==null?"unknown":(h||(h=d("I64"))).to_string(e)};Object.entries(j).forEach(function(b){var c=b[0];b=b[1];a.addMetadata(c,String(b))});d("MessengerIntent").sentMessage();return a.onComplete(function(){delete d("MWChatInteraction").interactions[b]})}g.logSentHeroInteraction=a}),98);
__d("MWV2SetupS2SLoggingShared",["I64","LSIntEnum","MWChatInteraction","MWLSLogSend","MWSharedS2SBaseAnnotations","MWVersion","ReQL","ReQLSubscribe","asyncToGeneratorRuntime","err","sendToSentQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b){d("sendToSentQPLLogger").markSendToSentPoint(a,"received_successful_server_ack"),d("sendToSentQPLLogger").markSendToSentSuccess(a),d("MWChatInteraction").remove(d("MWChatInteraction").s2sKey(b))}function k(a,b){d("sendToSentQPLLogger").markSendToSentFail(a,"send_message_server_error",c("err")("send_message_server_error")),d("MWChatInteraction").remove(d("MWChatInteraction").s2sKey(b))}function l(a){d("sendToSentQPLLogger").markSendToSentPoint(a,"sending_message")}function a(a){var c=a.db,e=a.isCommunityEvent,f=a.isMessageRequest,g=a.s2sInstanceKey,m=a.source,n=a.threadType,o=a.traceSendMessageAPI,p={isCommunityEvent:e,isMessageRequest:f,mwVersion:d("MWVersion").v2,source:m,threadType:n};return function(a){d("MWLSLogSend").logSentHeroInteraction(o,a,p);d("MWChatInteraction").set(d("MWChatInteraction").s2sKey(a),String(g));d("sendToSentQPLLogger").addSendToSentAnnotations(g,{bool:{subscription_points_gk:!0},string:{entrypoint:d("MWSharedS2SBaseAnnotations").getEntrypointAnnotation(m),is_community_event:e===!0?"true":"false",is_message_request:f===!0?"true":"false",thread_type:n==null?"unknown":(h||(h=d("I64"))).to_string(n)}});var q=!1,r=d("ReQL").fromTableAscending(c.tables.messages.index("optimistic")).getKeyRange(a),s=d("ReQLSubscribe").subscribeToFirst(r,function(b){b!=null&&(h||(h=d("I64"))).equal(b.sendStatusV2,(i||(i=d("LSIntEnum"))).ofNumber(2))?(q=!0,j(g,a),s()):b!=null&&(h||(h=d("I64"))).equal(b.sendStatusV2,(i||(i=d("LSIntEnum"))).ofNumber(4))?(q=!0,k(g,a),s()):b!=null&&(h||(h=d("I64"))).equal(b.sendStatusV2,(i||(i=d("LSIntEnum"))).ofNumber(1))&&l(g)});window.setTimeout(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(!q){var a=(yield d("ReQL").firstAsync(r));q||d("sendToSentQPLLogger").addSendToSentAnnotations(g,{string:{status_after_10s:a?""+(i||(i=d("LSIntEnum"))).toNumber(a.sendStatusV2):"none"}})}}),1e4);window.setTimeout(function(){s()},6e4)}}g["default"]=a}),98);
__d("useMWLSDefaultThreadSourceWithResetBasedOnThreadType",["LSThreadAttributionTypeUtil","MWGenAIUtils","react","useLSMessagingSource"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(){var a=c("useLSMessagingSource")();return i(function(b){return d("MWGenAIUtils").isMetaAIThread(b)?d("LSThreadAttributionTypeUtil").getSourceWithoutReset(b,a):d("LSThreadAttributionTypeUtil").getSourceAndResetAttribution(b,a)},[a])}g["default"]=a}),98);
__d("IGDGetMessagePluginInfo",["IGDInstamadilloUtils","LSIntEnum","LSPendingTasksPluginType","asyncToGeneratorRuntime","isInstamadillo"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c){return b?i(a,b):c()}function i(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(!c("isInstamadillo")())return{openEb:!1,pluginType:void 0};var e=(yield a.messages.index("messageId").get(b.messageId));if(!d("IGDInstamadilloUtils").isInstamadilloMessage(e))return{openEb:!1,pluginType:void 0};e=(yield a.e2ee_igMessageAuxiliaryInfo.get(b.messageId));a=Boolean(e==null?void 0:e.openEb);return{openEb:a,pluginType:(h||(h=d("LSIntEnum"))).ofNumber(c("LSPendingTasksPluginType").IGD_INSTAMADILLO)}});return j.apply(this,arguments)}g.IGDGetMessagePluginInfo=a}),98);
__d("MWPSendMessageLogger",["LSIntEnum","LSPendingTasksPluginType","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("MWLogSend").__setRef("MWPSendMessageLogger");function a(a,b,e,f,g,j,k,l,m,n,o,p){var q=n!=null&&(h||(h=d("LSIntEnum"))).unwrapIntEnum(n)===c("LSPendingTasksPluginType").IGD_INSTAMADILLO,r=q?1:0;i.onReady(function(c){return c.log(a,{actor:f,additionalTags:q?["armadillo_express"]:void 0,attachmentFbids:j,attachmentType:l,backend:r,ephemeralDurationInSec:p,hasReply:m,isInstamadilloTTLC:o,offlineThreadingId:g,sendType:0,source:k,threadKey:b,threadType:e})})}g.log=a}),98);
__d("useMWV2SendOpenMessageImplShared",["ArmadilloDataTraceCheckPoint","I64","IGDGetMessagePluginInfo","IGDThreadTTLCUtils","Int64Hooks","LSAppendDataTraceAddonStoredProcedure","LSAuthorityLevel","LSFactory","LSIntEnum","LSMailboxType","LSMessageReplySourceType","LSMessageReplySourceTypeV2","LSOptimisticSendMessageV2StoredProcedure","LSPendingTasksPluginType","LSShape","MWPActor.react","MWPReplyContext.react","MWPSendMessageLogger","MessagePowerUp","MessagingAttachmentType","Promise","ReQL","ReQLSuspense","asyncToGeneratorRuntime","gkx","isMWBumpMessage","justknobx","react","sendToSentQPLLogger","useLSMessagingInitiatingSource","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=(k||d("react")).useContext;function n(a,b,c){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){e!=null&&c("gkx")("23995")&&(yield c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:d("ArmadilloDataTraceCheckPoint").armadilloTlcControlOpenThread,dataTraceId:e,syncChannel:(l||(l=d("I64"))).minus_one,tags:b}))});return o.apply(this,arguments)}function a(a){var e=a.authorityLevel,g=a.disableMarkRead,k=a.ephemeralDurationInSec,o=a.onOptimisticMessageCreation,p=a.skipUrlPreviewGen,q=a.threadKey,r=a.threadType,s=d("MWPActor.react").useActor();a=m(d("MWPReplyContext.react").MWPReplyContext);var t=a.reply,u=c("useLSMessagingInitiatingSource")(),v=(i||(i=c("useReStore")))();a=d("ReQLSuspense").useFirst(function(){return(t==null?void 0:t.messageId)==null?d("ReQL").empty():d("ReQL").fromTableAscending(v.tables.messages.index("messageId")).getKeyRange(t.messageId)},[t==null?void 0:t.messageId,v.tables.messages],f.id+":134");var w=c("isMWBumpMessage")(a==null?void 0:a.replyType)?a==null?void 0:a.replySourceId:t==null?void 0:t.messageId;return d("Int64Hooks").useCallbackInt64(function(a,f){var i=f.accessibilityLabel,m=f.afterSend,x=f.attributionAppId,y=f.dataclassParams,z=f.dataTraceId,A=f.externalAttachmentUrl,B=f.hotEmojiSize,C=f.logSendPoint,D=f.mentionData,E=f.messageText,F=f.messageTypeParams,G=f.multitabEnv,H=f.optimisticAttachmentPreview,I=f.platformToken,J=f.pluginType,K=f.profileRanges,L=f.richTextFormatType,M=f.s2sInstanceKey,N=f.setupS2SLogging,O=f.source,P=f.stickerID,Q=f.traceSendMessageAPI,R=f.transaction;return S(R);function S(a){return T.apply(this,arguments)}function T(){T=b("asyncToGeneratorRuntime").asyncToGenerator(function*(f){var v=c("LSFactory")(f),S=c("gkx")("24135");yield n(f,(l||(l=d("I64"))).to_string(q),z);var T=F.hasAttachment;T=T===void 0?!1:T;var U=F.hasGif;U=U===void 0?!1:U;var V=F.hasHotEmoji;V=V===void 0?!1:V;var W=F.hasLinks;W=W===void 0?!1:W;var X=F.hasSticker;X=X===void 0?!1:X;var Y=F.hasText;Y=Y===void 0?!1:Y;var Z=(yield f.threads.get(q)),$=W?d("IGDThreadTTLCUtils").isInstamadilloTTLCLinkEnabled(Z):d("IGDThreadTTLCUtils").isInstamadilloTTLCTextEnabled(Z);Z=(yield d("IGDGetMessagePluginInfo").IGDGetMessagePluginInfo(f,t,function(){return(h||(h=b("Promise"))).resolve({openEb:$,pluginType:$?(j||(j=d("LSIntEnum"))).ofNumber(c("LSPendingTasksPluginType").IGD_INSTAMADILLO):J})}));f=Z.openEb;Z=Z.pluginType;v=(yield c("LSOptimisticSendMessageV2StoredProcedure")(v,{dataclassParams:y!=null?JSON.stringify(y):void 0,extraSendMessageParams:d("LSShape").ofRecord({attribution_app_id:x,calculate_denormalizations:!1,data_trace_id:z!=null?z:void 0,ephemeral_duration_in_sec:k,external_attachment_url:A,hot_emoji_size:B,initiating_source:u,mark_read:g===!0?!1:(l||(l=d("I64"))).ge(e,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE)),mention_data:D,multitab_env:G,openEb:f,optimistic_attachment_preview:H,platform_token:I,plugin_type:Z,power_up_style:(j||(j=d("LSIntEnum"))).ofNumber(c("MessagePowerUp").NONE),qpl_instance_key:M.toString(),reply_source_id:w,reply_source_type:t!=null?(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceType").MESSAGE):void 0,reply_source_type_v2:t!=null?(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE):void 0,rich_text_format_type:L,skip_url_preview_gen:p,source:O,sticker_id:P,text_has_links:W&&S}),mailboxType:j.ofNumber(c("LSMailboxType").MESSENGER),metadataDataclass:c("justknobx")._("4710")?JSON.stringify({media_accessibility_metadata:{alt_text:U?i:null}}):null,senderId:s,text:E,threadKey:q,threadType:r}));C("create_optimistic_message_end");d("MWPSendMessageLogger").log(a,q,r,s,void 0,[],O,c("MessagingAttachmentType").NONE,t!=null,Z,$,k);if(!T||U||X||V){S=v[0];N(S);Q.addAnnotationBoolean("is_instamadillo_ttlc",$&&f===!0);d("sendToSentQPLLogger").addSendToSentAnnotations(M,{bool:{is_instamadillo_ttlc:$&&f===!0}})}o!=null&&o({TAG:0,hasLink:W,hasMention:K!=null&&K.length>0,isGIF:U,isReply:!!(t&&t.messageId!==""),isSticker:X,isText:Y,offlineThreadingId:v[0]});m!=null&&(yield m(R));return v});return T.apply(this,arguments)}},[q,t,k,u,g,e,w,p,s,r,o])}g["default"]=a}),98);
__d("useMWV2SendOpenMessageImpl",["useMWV2SendOpenMessageImplShared"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.disableMarkRead,d=a.ephemeralDurationInSec,e=a.onOptimisticMessageCreation,f=a.skipUrlPreviewGen;a=a.thread;return c("useMWV2SendOpenMessageImplShared")({authorityLevel:a.authorityLevel,disableMarkRead:b,ephemeralDurationInSec:d,onOptimisticMessageCreation:e,skipUrlPreviewGen:f,threadKey:a.threadKey,threadType:a.threadType})}g["default"]=a}),98);
__d("MessagingLoggingUtils",["I64","MessagingAttachmentType"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){a=(h||(h=d("I64"))).to_int32(a);switch(a){case c("MessagingAttachmentType").NONE:return 1;case c("MessagingAttachmentType").STICKER:return 4;case c("MessagingAttachmentType").IMAGE:return 8;case c("MessagingAttachmentType").ANIMATED_IMAGE:return 6;case c("MessagingAttachmentType").VIDEO:return 10;case c("MessagingAttachmentType").AUDIO:return 11;case c("MessagingAttachmentType").FILE:return 9;case c("MessagingAttachmentType").XMA:return 13;case c("MessagingAttachmentType").EPHEMERAL_IMAGE:return 8;case c("MessagingAttachmentType").EPHEMERAL_VIDEO:return 5;case c("MessagingAttachmentType").SELFIE_STICKER:return 22;case c("MessagingAttachmentType").SOUND_BITE:return 23;default:return 1}}g.convertI64ToAttachmentType=a}),98);
__d("MWMediaTraceHandler",["I64","LSAppendDataTraceAddonStoredProcedure","LSDataTraceCheckPoint","LSDataTraceType","LSFactory","LSIntEnum","MAWTimeUtils","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b){return a.data_trace_meta.add({contextOne:void 0,contextThree:void 0,contextTwo:void 0,foregroundTimestampMs:(h||(h=d("I64"))).zero,initTimestampMs:d("MAWTimeUtils").toTimestamp(d("WATimeUtils").unixTime()),predefinedId:void 0,shouldFlush:!1,traceId:b,traceType:(i||(i=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").TASK)})}function a(a,b,e,f){return j(a,b).then(function(){return c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:(i||(i=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").RICH_MEDIA_UPLOAD_START),dataTraceId:b,syncChannel:(h||(h=d("I64"))).neg_one,tags:h.to_string(e)+","+h.to_string(f)})})}g.logMediaSendStart=a}),98);
__d("issueLSMediaSendJobs",["ArmadilloDataTraceCheckPoint","I64","LSAppendDataTraceAddonStoredProcedure","LSFactory","LSGenerateTraceId","LSInsertNewMediaSendStoredProcedure","LSMarkSubJobCompletedV2StoredProcedure","MWConsole","MWMediaTraceHandler","MWPOpenComposerUtils","MessagingLoggingUtils","Promise","asyncToGeneratorRuntime","gkx","updateAndFlushLSDataTrace"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b,c,d){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){b!=null&&(yield d("MWMediaTraceHandler").logMediaSendStart(a,b,c,(i||(i=d("I64"))).of_int32(e)))});return k.apply(this,arguments)}function l(a,b,c){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){e!=null&&c("gkx")("23995")&&(yield c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:d("ArmadilloDataTraceCheckPoint").armadilloTlcControlOpenThread,dataTraceId:e,syncChannel:(i||(i=d("I64"))).minus_one,tags:b}))});return m.apply(this,arguments)}function a(a,b,c,d,e){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,k){var m=c("LSGenerateTraceId")(),n=k[0];n=d("MessagingLoggingUtils").convertI64ToAttachmentType(n.attachmentType);yield j(a,m,(i||(i=d("I64"))).of_int32(g.length),n);var o=0;n=g.map(function(){var g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,g){yield c("LSInsertNewMediaSendStoredProcedure")(c("LSFactory")(a),{attachmentType:b.attachment_type,inMessageIndex:(i||(i=d("I64"))).of_int32(g),isSecure:!1,offlineAttachmentId:b.attachment_fbid,offlineThreadingId:f,sendByServer:!1,shouldTranscode:!1,useDoublePhase:!1});yield d("MWPOpenComposerUtils").updateMediaStaging(a,b.attachment_fbid,function(a){return babelHelpers["extends"]({},a,{isSent:!0})});g=k.find(function(a){return a.offlineAttachmentId===b.offline_attachment_id});if(g!=null){var h=g.fbid;h!=null&&(yield c("LSMarkSubJobCompletedV2StoredProcedure")(c("LSFactory")(a),{fbid:h,offlineAttachmentId:b.attachment_fbid}),yield d("MWPOpenComposerUtils").deleteMediaStaging(a,b.attachment_fbid),yield d("MWPOpenComposerUtils").updateAttachment(a,e,f,b.attachment_fbid,function(a){return babelHelpers["extends"]({},a,{attachmentFbid:(i||(i=d("I64"))).to_string(h)})}),o++)}c("gkx")("24136")&&(yield d("MWPOpenComposerUtils").updateAttachment(a,e,f,b.attachment_fbid,function(a){return babelHelpers["extends"]({},a,{previewHeight:void 0,previewWidth:void 0})}))});return function(a,b){return g.apply(this,arguments)}}());yield (h||(h=b("Promise"))).allSettled(n);yield d("MWPOpenComposerUtils").resumeSendJob(c("LSFactory")(a),f,m);yield l(a,i.to_string(e),m);yield c("updateAndFlushLSDataTrace")(a,m);return{sentWithAllFilesUploaded:o===g.length}});return n.apply(this,arguments)}g["default"]=a}),98);
__d("issueSendInstamadilloMediaMessage",["IGDBridgedAPI","MWPOpenComposerUtils","Promise","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){c("promiseDone")(c("IGDBridgedAPI").sendMediaMessage({offlineThreadingId:f}));f=e.map(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){yield d("MWPOpenComposerUtils").updateMediaStaging(a,b.attachment_fbid,function(a){return babelHelpers["extends"]({},a,{isSent:!0})})});return function(a){return c.apply(this,arguments)}}());yield (h||(h=b("Promise"))).allSettled(f)});return i.apply(this,arguments)}g["default"]=a}),98);
__d("useMWV2SendOpenStagedMedia",["I64","IGDGetMessagePluginInfo","IGDThreadTTLCUtils","Int64Hooks","LSFactory","LSIntEnum","LSLocalApplyOptimisticMessageWithAttachmentsV2StoredProcedure","LSMessageReplySourceType","LSMessageReplySourceTypeV2","LSMessagingThreadTypeUtil","LSPendingTasksPluginType","LSShape","LSThreadBitOffset","LSVec","MWConsole","MWPActor.react","MWPComposerMediaUploadUtil","MWPReplyContext.react","MWPSendMessageLogger","MessagingAttachmentType","MessagingLoggingUtils","MessengerWebEventsFalcoEvent","MessengerWebUXLogger","Promise","asyncToGeneratorRuntime","issueLSMediaSendJobs","issueSendInstamadilloMediaMessage","react","sendToSentQPLLogger","useLSMessagingInitiatingSource"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(i||d("react")).useContext;function a(a,e,f,g){var i=d("MWPActor.react").useActor(),m=l(d("MWPReplyContext.react").MWPReplyContext),n=m.reply,o=c("useLSMessagingInitiatingSource")(),p=d("LSThreadBitOffset").has(40,f),q=c("MessengerWebUXLogger").useInteractionLogger();return d("Int64Hooks").useCallbackInt64(function(){var l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(l,m){var r=m.isFirstMessage;r=r===void 0?!1:r;var s=m.isFirstMessageText,t=m.mediaStagings,u=m.metadataDataclass,v=m.pluginType,w=m.s2sInstanceKey,x=m.sendFirstMessageSeparately;x=x===void 0?!1:x;var y=m.setupS2SLogging,z=m.source,A=m.traceSendMessageAPI;m=m.transaction;if(t.length===0)return;var B=!1;if(t.length===1){var C=t[0];(k||(k=d("I64"))).to_int32(C.attachmentType)===c("MessagingAttachmentType").IMAGE?B=d("IGDThreadTTLCUtils").isInstamadilloTTLCImageEnabled(f):(k||(k=d("I64"))).to_int32(C.attachmentType)===c("MessagingAttachmentType").VIDEO&&(B=d("IGDThreadTTLCUtils").isInstamadilloTTLCVideoEnabled(f))}C=(yield d("IGDGetMessagePluginInfo").IGDGetMessagePluginInfo(m,n,function(){return(h||(h=b("Promise"))).resolve({openEb:B,pluginType:B?(j||(j=d("LSIntEnum"))).ofNumber(c("LSPendingTasksPluginType").IGD_INSTAMADILLO):v})}));var D=C.openEb;C=C.pluginType;var E=t[0];E=d("MessagingLoggingUtils").convertI64ToAttachmentType(E.attachmentType);var F=d("MWPComposerMediaUploadUtil").createPartitionedAttachments(t,p,g),G=!0;for(var H=0;H<F.length;H++)if(!r||!x||H===0&&r&&!s){var I=F[H],J=(yield c("LSLocalApplyOptimisticMessageWithAttachmentsV2StoredProcedure")(c("LSFactory")(m),{extraSendMessageParams:d("LSShape").ofRecord({attachments:c("LSVec").ofArray(I.map(d("LSShape").ofRecord)),ephemeral_duration_in_sec:a,external_attachment_url:void 0,initiating_source:o,mark_read:!1,platform_ref:void 0,platform_token:void 0,plugin_type:C,reply_source_id:n==null?void 0:n.messageId,reply_source_type:n!=null?(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceType").MESSAGE):void 0,reply_source_type_v2:n!=null?(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE):void 0,source:z}),senderId:i,threadKey:f.threadKey,threadType:f.threadType}));J=J[0];H===0&&(y(J),A.addAnnotationBoolean("is_instamadillo_ttlc",B&&D===!0),d("sendToSentQPLLogger").addSendToSentAnnotations(w,{bool:{is_instamadillo_ttlc:B&&D===!0}}));yield m.messages_optimistic_context.add({externalAttachmentUrl:void 0,initiatingSource:o,markThreadRead:!1,messageId:void 0,metadataDataclass:u,offlineThreadingId:J,openEb:D,platformRef:void 0,platformToken:void 0,replySourceId:void 0,replySourceType:void 0,sendType:void 0,skipUrlPreviewGen:void 0,taskId:(k||(k=d("I64"))).of_string(J),threadAttributionSource:z,threadKey:f.threadKey});e==null||e({TAG:2,numberOfAttachments:I.length,offlineThreadingId:J});if(C!=null&&(j||(j=d("LSIntEnum"))).unwrapIntEnum(C)===c("LSPendingTasksPluginType").IGD_INSTAMADILLO)yield c("issueSendInstamadilloMediaMessage")(m,I,J);else{var K=(yield c("issueLSMediaSendJobs")(m,f.threadKey,J,I,t));G=G&&K.sentWithAllFilesUploaded}d("MWPSendMessageLogger").log(l,f.threadKey,f.threadType,i,J,I.map(function(a){return a.attachment_fbid}),z,E,n!=null,C,B,a)}p===!1&&(q==null||q({eventName:"media_collection_message_sent"}));K=(k||(k=d("I64"))).to_string(f.threadKey);J=d("LSMessagingThreadTypeUtil").isGroup(f.threadType)?[K,null]:[null,K];var L=J[0],M=J[1];c("MessengerWebEventsFalcoEvent").log(function(){return{event_name:G?"hit_send_message_with_all_files_uploaded":"hit_send_message_with_files_pending",extra_data:null,other_user_fbid:M,thread_fbid:L}})});return function(a,b){return l.apply(this,arguments)}}(),[n,p,f,a,o,i,e,q,g])}g["default"]=a}),98);
__d("issueLSAudioMediaSendJob",["I64","LSDatabaseSingletonLazyWrapper","LSFactory","LSInsertNewMediaSendStoredProcedure","LSMarkSubJobCompletedV2StoredProcedure","MWPComposerMediaUploadUtil","MWPOpenComposerUtils","ReQL","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,b,c,e){if(a==null)return;if(!a.startsWith("blob:"))return;var f={contents:function(){}};f.contents=d("ReQL").fromTableAscending(c.tables.attachments).getKeyRange(e).subscribe(function(c,d){if(d.operation==="put"){c=d.value;if(c.attachmentFbid!==b.toString())return;d=c.playableUrl;d!=null&&!d.startsWith("blob:")&&(f.contents(),URL.revokeObjectURL(a))}})}function a(a,b,c,d,e,f,g,h,i,k,l){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,g,j,k,l,m,n,o,p,q){yield c("LSInsertNewMediaSendStoredProcedure")(c("LSFactory")(a),{attachmentType:m.attachment_type,inMessageIndex:(h||(h=d("I64"))).zero,isSecure:!1,offlineAttachmentId:k,offlineThreadingId:l,sendByServer:!1,shouldTranscode:!1,useDoublePhase:!1});a=function(a,g){if(g==null||g.length===0)return;var n=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield c("LSDatabaseSingletonLazyWrapper")());return a.runInTransaction(function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=c("LSFactory")(b);yield c("LSMarkSubJobCompletedV2StoredProcedure")(b,{fbid:(h||(h=d("I64"))).of_string(g),offlineAttachmentId:k});yield d("MWPOpenComposerUtils").resumeSendJob(b,l,j);i(m.playable_url,g,a,e)});return function(a){return f.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":99")});return function(){return a.apply(this,arguments)}}();c("promiseDone")(n(),function(){p==null||p(a)})};var r=function(a,b){q==null||q((b=b.response.getErrorDescriptionString())!=null?b:"unknown_upload_failure",a)};yield d("MWPComposerMediaUploadUtil").startUpload(o,void 0,a,r,!0,[n.file],[k],void 0,void 0,n.waveformData,void 0,h.to_string(g))});return j.apply(this,arguments)}g["default"]=a}),98);
__d("useMWV2SendOpenVoiceClipImplShared",["I64","IGDGetMessagePluginInfo","IGDThreadTTLCUtils","Int64Hooks","LSFactory","LSIntEnum","LSLocalApplyOptimisticMessageWithAttachmentsV2StoredProcedure","LSMessageReplySourceType","LSMessageReplySourceTypeV2","LSPendingTasksPluginType","LSShape","LSVec","MWMediaTraceHandler","MWPActor.react","MWPComposerMediaUploadUtil","MWPReplyContext.react","MessagingLoggingUtils","OfflineThreadingId","Promise","asyncToGeneratorRuntime","issueLSAudioMediaSendJob","issueSendInstamadilloMediaMessage","react","sendToSentQPLLogger","useLSMessagingInitiatingSource"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(i||d("react")).useContext;function m(a,b,c,d){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){b!=null&&(yield d("MWMediaTraceHandler").logMediaSendStart(a,b,c,(k||(k=d("I64"))).of_int32(e)))});return n.apply(this,arguments)}function a(a){var e=a.ephemeralDurationInSec,f=a.onOptimisticMessageCreation,g=a.onUploadFailure,i=a.onUploadStart,n=a.onUploadSuccess,o=a.sendMessageLogger,p=a.skipUrlPreviewGen,q=a.threadKey,r=a.threadType,s=d("MWPActor.react").useActor();a=l(d("MWPReplyContext.react").MWPReplyContext);var t=a.reply,u=c("useLSMessagingInitiatingSource")();return d("Int64Hooks").useCallbackInt64(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,l){var v=l.dataTraceId,w=l.pluginType,x=l.s2sInstanceKey,y=l.setupS2SLogging,z=l.source,A=l.traceSendMessageAPI,B=l.transaction;l=l.voiceClip;var C=c("LSFactory")(B),D=d("OfflineThreadingId").createOfflineThreadingID(),E=d("MWPComposerMediaUploadUtil").getAudioAttachment(D,l.file,l.duration,l.waveformData);yield m(B,v,(k||(k=d("I64"))).one,2);var F=(yield B.threads.get(q)),G=d("IGDThreadTTLCUtils").isInstamadilloTTLCAudioEnabled(F);F=(yield d("IGDGetMessagePluginInfo").IGDGetMessagePluginInfo(B,t,function(){return(h||(h=b("Promise"))).resolve({openEb:G,pluginType:G?(j||(j=d("LSIntEnum"))).ofNumber(c("LSPendingTasksPluginType").IGD_INSTAMADILLO):w})}));var H=F.openEb;F=F.pluginType;C=(yield c("LSLocalApplyOptimisticMessageWithAttachmentsV2StoredProcedure")(C,{extraSendMessageParams:d("LSShape").ofRecord({attachments:c("LSVec").ofArray([d("LSShape").ofRecord(E)]),ephemeral_duration_in_sec:e,external_attachment_url:void 0,initiating_source:u,mark_read:!1,platform_ref:void 0,platform_token:void 0,plugin_type:F,reply_source_id:t==null?void 0:t.messageId,reply_source_type:t!=null?(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceType").MESSAGE):void 0,reply_source_type_v2:t!=null?(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE):void 0,source:z}),senderId:s,threadKey:q,threadType:r}));C=C[0];y(C);A.addAnnotationBoolean("is_instamadillo_ttlc",G&&H===!0);d("sendToSentQPLLogger").addSendToSentAnnotations(x,{bool:{is_instamadillo_ttlc:G&&H===!0}});yield B.messages_optimistic_context.add({externalAttachmentUrl:void 0,initiatingSource:u,markThreadRead:!1,messageId:void 0,offlineThreadingId:C,openEb:H,platformRef:void 0,platformToken:void 0,replySourceId:void 0,replySourceType:void 0,sendType:void 0,skipUrlPreviewGen:p,taskId:k.of_string(C),threadAttributionSource:z,threadKey:q});f!=null&&f({TAG:1,offlineThreadingId:C});F!=null&&(j||(j=d("LSIntEnum"))).unwrapIntEnum(F)===c("LSPendingTasksPluginType").IGD_INSTAMADILLO?yield c("issueSendInstamadilloMediaMessage")(B,[E],C):yield c("issueLSAudioMediaSendJob")(B,q,s,v,D,C,E,l,i,n,g);o(a,{actor:s,attachmentFbids:[E.attachment_fbid],attachmentType:d("MessagingLoggingUtils").convertI64ToAttachmentType(E.attachment_type),hasReply:t!=null,isInstamadilloTTLC:H,key:q,offlineThreadingId:C,pluginType:F,source:z,type:r})});return function(b,c){return a.apply(this,arguments)}}(),[q,e,u,t,s,r,p,f,o,i,n,g])}g["default"]=a}),98);
__d("useMWV2SendOpenVoiceClip",["Int64Hooks","MWPSendMessageLogger","useMWV2SendOpenVoiceClipImplShared"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.ephemeralDurationInSec,e=a.onOptimisticMessageCreation,f=a.onUploadFailure,g=a.onUploadStart,h=a.onUploadSuccess,i=a.skipUrlPreviewGen;a=a.thread;var j=d("Int64Hooks").useCallbackInt64(function(a,c){var e=c.actor,f=c.attachmentFbids,g=c.attachmentType,h=c.hasReply,i=c.isInstamadilloTTLC,j=c.key,k=c.offlineThreadingId,l=c.pluginType,m=c.source;c=c.type;e!=null&&d("MWPSendMessageLogger").log(a,j,c,e,k,f,m,g,h,l,i,b)},[b]);return c("useMWV2SendOpenVoiceClipImplShared")({ephemeralDurationInSec:b,onOptimisticMessageCreation:e,onUploadFailure:f,onUploadStart:g,onUploadSuccess:h,sendMessageLogger:j,skipUrlPreviewGen:i,threadKey:a.threadKey,threadType:a.threadType})}g["default"]=a}),98);
__d("useMWV2SendOpenMessage",["I64","Int64Hooks","LSGenerateTraceId","LSIntEnum","LSMessagingThreadTypeUtil","LSShape","MWPReplyContext.react","MWSharedMsgLogUtils","MWSharedS2SBaseAnnotations","MWV2ComposerActionsContext.react","MWV2SetupS2SLoggingShared","MultipleTabsLogger","ReQL","asyncToGeneratorRuntime","react","sendToSentQPLLogger","useAsyncReStore","useMWLSDefaultThreadSourceWithResetBasedOnThreadType","useMWV2SendOpenMessageImpl","useMWV2SendOpenStagedMedia","useMWV2SendOpenVoiceClip"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(h||d("react")).useContext;function a(a){var e=a.disableMarkRead,g=a.ephemeralDurationInSec,h=a.isIGDW,l=a.onOptimisticMessageCreation,m=a.onUploadFailure,n=a.onUploadStart,o=a.onUploadSuccess,p=a.pluginType,q=a.skipUrlPreviewGen,r=a.thread,s=c("useAsyncReStore")();a=k(d("MWPReplyContext.react").MWPReplyContext);var t=a.reply,u=c("useMWLSDefaultThreadSourceWithResetBasedOnThreadType")(),v=c("useMWV2SendOpenVoiceClip")({ephemeralDurationInSec:g,onOptimisticMessageCreation:l,onUploadFailure:m,onUploadStart:n,onUploadSuccess:o,skipUrlPreviewGen:q,thread:r}),w=c("useMWV2SendOpenStagedMedia")(g,l,r,h),x=c("useMWV2SendOpenMessageImpl")({disableMarkRead:e!=null?e:!1,ephemeralDurationInSec:g,onOptimisticMessageCreation:l,skipUrlPreviewGen:q,thread:r}),y=d("LSMessagingThreadTypeUtil").isMessageRequest(r);a=k(d("MWV2ComposerActionsContext.react").MWV2ComposerActionsContext);var z=a.onMessageSendAttempt;return d("Int64Hooks").useCallbackInt64(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,g,h,k,l,m,n,o,q,A,B,C,D,E,F,G,H,I,J){A===void 0&&(A=!1);B===void 0&&(B=!1);var K=!1;z==null||z(!0);function L(a){C.addMarkerPoint(a,"AppTiming"),d("sendToSentQPLLogger").markSendToSentPoint(D,a)}var M=u(r.threadKey),N=c("LSGenerateTraceId")(),O={contents:1};E=r.eventStartTimestampMs!=null;G=r.threadType;var P=(yield s),Q=c("MWV2SetupS2SLoggingShared")({db:P,isCommunityEvent:E,isMessageRequest:y,s2sInstanceKey:D,source:(i||(i=d("LSIntEnum"))).unwrapIntEnum(M),threadType:G,traceSendMessageAPI:C});H=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(P.tables.media_staging).filter(function(a){return!a.isSent&&(j||(j=d("I64"))).equal(a.threadKey,r.threadKey)})));var R=d("MWSharedS2SBaseAnnotations").getMessageTypeParams({externalAttachmentUrl:l,hotEmojiSize:h,mediaStagings:H,messageText:a,reply:t,stickerId:g,threadType:r.threadType,voiceClip:n}),S=(yield d("MWSharedMsgLogUtils").getSendToSentAnnotations(r,R,i.unwrapIntEnum(M))),T=(yield d("MultipleTabsLogger").hasMultipleTabs());return P.runInTransaction(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){d("MWSharedMsgLogUtils").addSendMessageMetadataForInteractionTrace(C,R,r);d("sendToSentQPLLogger").addSendToSentAnnotations(D,S);if(n!=null){(A===!1||B===!0)&&(yield v(P,{dataTraceId:N,pluginType:p,s2sInstanceKey:D,setupS2SLogging:Q,source:M,traceSendMessageAPI:C,transaction:b,voiceClip:n}));return}var c=R.hasGif;c=c===void 0?!1:c;var f=R.hasHotEmoji;f=f===void 0?!1:f;var i=R.hasSticker;i=i===void 0?!1:i;var s=R.hasText;s=s===void 0?!1:s;i||f?O.contents=4:c&&(O.contents=6);var t=e!=null?d("LSShape").ofRecord({mention_ids:e.map(function(a){return a.id}).join(","),mention_lengths:e.map(function(a){return String(a.length)}).join(","),mention_offsets:e.map(function(a){return String(a.offset)}).join(","),mention_types:e.length!==0?e.map(function(a){return a.type}).join(","):void 0}):void 0;L("create_optimistic_message_start");if(s||i||f||c){K=!0;if(A===!1||B===!0){yield x(P,{accessibilityLabel:J,afterSend:q,attributionAppId:k,dataclassParams:I,dataTraceId:N,externalAttachmentUrl:l,hotEmojiSize:h,logSendPoint:L,mentionData:t,messageText:a,messageTypeParams:R,multitabEnv:T,optimisticAttachmentPreview:m,platformToken:o,pluginType:p,profileRanges:e,richTextFormatType:F,s2sInstanceKey:D,setupS2SLogging:Q,source:M,stickerID:g,traceSendMessageAPI:C,transaction:b});if(A===!0)return}}else q!=null&&(yield q(b));!i&&!c&&!f&&(yield w(P,{isFirstMessage:B,isFirstMessageText:K,mediaStagings:yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(b.media_staging).filter(function(a){return!a.isSent&&(j||(j=d("I64"))).equal(a.threadKey,r.threadKey)})),pluginType:p,s2sInstanceKey:D,sendFirstMessageSeparately:A,setupS2SLogging:Q,source:M,traceSendMessageAPI:C,transaction:b}))});return function(a){return c.apply(this,arguments)}}(),"readwrite","ui",void 0,f.id+":237")});return function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){return a.apply(this,arguments)}}(),[z,u,r,s,y,t,v,x,w,p])}g["default"]=a}),98);
__d("useMWV2OnSendOpenMessage",["I64","IGDThreadListNewMessageLoggingDataContext","Int64Hooks","LSContactListConversionAttributionStore","LSContactViewerRelationship","LSIntEnum","LSMessagingThreadTypeUtil","MWCMThreadTypes.react","MWLSThreadDisplayContext","MWPActor.react","MWPReplyContext.react","MessageRequestsLog","MessengerClickImpressionEventsLoggerUtils","MessengerInboxTrayClickImpressionEventsLoggerImpl","MessengerSidebarClickImpressionEventsLoggerImpl","MessengerWebUXLogger","ReQL","asyncToGeneratorRuntime","getInstamadilloLoggingExtraData","promiseDone","qpl","react","sendToSentQPLLogger","useCometInteractionTracing","useIGDChatTabsMessagingSource.react","useMWLSAcceptMessageRequest","useMWV2SendOpenMessage"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;e=h||d("react");var k=e.useContext,l=e.useMemo;function a(a){var e=a.afterSendMessage,f=a.checkWAStorageForLogging,g=a.disableMarkRead,h=a.ephemeralDurationInSec,m=a.isIGDW,n=a.onOptimisticMessageCreation,o=a.onUploadFailure,p=a.onUploadStart,q=a.onUploadSuccess,r=a.pluginType,s=a.skipUrlPreviewGen,t=a.thread,u=d("MWPActor.react").useActor(),v=d("MessengerClickImpressionEventsLoggerUtils").useGetUniqueThreadID(t.threadKey,t.threadType);a=k(d("MWPReplyContext.react").MWPReplyContext);var w=a.clearReply,x=t.threadSubtype,y=l(function(){return{is_community_event:(t.eventStartTimestampMs!=null).toString(),is_cutover:(!1).toString(),is_secure:(!1).toString(),thread_id:(i||(i=d("I64"))).to_string(t.threadKey),thread_subtype:x!=null&&d("MWCMThreadTypes.react").isIGBroadcastChannelThread(x)?(i||(i=d("I64"))).to_string(x):"",thread_type:i.to_string(t.threadType)}},[t,x]),z=c("useMWLSAcceptMessageRequest")(t.threadKey),A=c("useCometInteractionTracing")(c("qpl")._(30605384,"573"),"fast","INTERACTION",void 0,y),B=c("useMWV2SendOpenMessage")({disableMarkRead:g,ephemeralDurationInSec:h,isIGDW:m,onOptimisticMessageCreation:n,onUploadFailure:o,onUploadStart:p,onUploadSuccess:q,pluginType:r,skipUrlPreviewGen:s,thread:t}),C=c("MessengerWebUXLogger").useInteractionLogger(),D=d("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceIdContext(),E=c("getInstamadilloLoggingExtraData")(t),F=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),G=c("useIGDChatTabsMessagingSource.react")(t.threadKey);return d("Int64Hooks").useCallbackInt64(function(a,g,h,k,l,n,o,p,q,r,s,x,H,I,J,K,L,M){s===void 0&&(s=!1);x===void 0&&(x=!1);if(m===!0){H=F==="ChatTab"&&G!=null?babelHelpers["extends"]({},E,{messaging_source:String(G)}):E;C==null||C({eventName:"send_message",extraData:H,flowInstanceId:D})}var N=d("LSMessagingThreadTypeUtil").isMessageRequest(t);A(function(m){var A=d("sendToSentQPLLogger").markSendToSentStart(f);d("sendToSentQPLLogger").addSendToSentAnnotations(A,{string:y});c("promiseDone")(B(a,g,h,k,l,n,o,p,q,function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;r==null||r();if(!d("LSMessagingThreadTypeUtil").isOneToOne(t.threadType))return;b=(b=(yield d("ReQL").firstAsync(d("ReQL").mergeJoin(d("ReQL").fromTableAscending(a.participants,[]).getKeyRange(t.threadKey),d("ReQL").fromTableAscending(a.contacts)).filter(function(a){a[0];a=a[1];return!(i||(i=d("I64"))).equal(a.id,u)}))))==null?void 0:b[1];if(b==null)return;!(i||(i=d("I64"))).to_float(b.contactViewerRelationship)!==c("LSContactViewerRelationship").CONTACT_OF_VIEWER&&(yield a.contacts.put(babelHelpers["extends"]({},b,{contactViewerRelationship:(j||(j=d("LSIntEnum"))).ofNumber(c("LSContactViewerRelationship").CONTACT_OF_VIEWER)})))});return function(b){return a.apply(this,arguments)}}(),s,x,m,A,void 0,I,J,K,L,M),function(){var a=d("LSContactListConversionAttributionStore").getAttribution(v);a!=null&&(a.surface.entry_point==="comet_home_sidebar"?d("MessengerSidebarClickImpressionEventsLoggerImpl").logConversionClickEvent(a):a.surface.entry_point==="inbox_tray"&&d("MessengerInboxTrayClickImpressionEventsLoggerImpl").logConversionClickEvent(a),d("LSContactListConversionAttributionStore").resetAttribution(v));e();w(t.threadKey,!1);N&&(z(),d("MessageRequestsLog").logActionConfirmed(t,1))})})},[z,m,t,A,F,G,E,C,D,f,y,B,u,e,w,v])}g["default"]=a}),98);
__d("LSSendTypingIndicator",["LSIssueNewFireAndForgetTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[8]=b.syncGroup,c.i64.neq(d[8],void 0)?d[7]=d[8]:d[7]=c.i64.cast([0,1]),d[0]=d[7])})},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[2]=void 0:(b=a.item,d[2]=b.threadType)})},function(b){return d[6]=["typing","_",c.i64.to_string(a[0])].join(""),c.forEach(c.filter(c.db.table(5).fetch(),function(a){return d[6]===a.queueName}),function(a){return a["delete"]()})},function(e){return d[4]=new c.Map(),d[4].set("thread_key",a[0]),d[4].set("is_group_thread",a[1]),d[4].set("is_typing",a[2]),d[4].set("attribution",c.i64.cast([0,0])),d[4].set("sync_group",d[0]),d[4].set("thread_type",d[2]),d[5]=c.toJSON(d[4]),c.storedProcedure(b("LSIssueNewFireAndForgetTask"),d[6],c.i64.cast([0,3]),d[5])}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSTypingSendTypingIndicatorStoredProcedure";a.__tables__=["threads","pending_fire_and_forget_tasks"];e.exports=a}),null);
__d("LSSendTypingIndicatorStoredProcedure",["LSSendTypingIndicator","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSSendTypingIndicator"),e.threadKey,e.isGroupThread,e.isTyping);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSTypingIndicatorSettingState",[],(function(a,b,c,d,e,f){a=Object.freeze({DEFAULT:0,DISABLED:1,ENABLED:2});f["default"]=a}),66);
__d("useOnTypingStateChanged",["I64","Int64Hooks","LSAuthorityLevel","LSContactBlockedByViewerStatus","LSFactory","LSIntEnum","LSMessagingThreadTypeUtil","LSSendTypingIndicatorStoredProcedure","LSTypingIndicatorSettingState","MWPActor.react","MessengerWebUXLogger","Promise","ReQL","asyncToGeneratorRuntime","mwCMIsAnyCMThread","promiseDone","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function l(a,b,c,d){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){if((j||(j=d("I64"))).equal(f,(k||(k=d("LSIntEnum"))).ofNumber(1))&&!(j||(j=d("I64"))).equal(e,g)){e=(yield (i||(i=b("Promise"))).all([d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.threads,["typingIndicatorDisabled"]).getKeyRange(e)),d("ReQL").firstAsync(d("ReQL").mergeJoin(d("ReQL").fromTableAscending(a.tables.participants).getKeyRange(e),d("ReQL").fromTableAscending(a.tables.contacts.index("blockedByViewerStatusId")).getKeyRange((k||(k=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED))).filter(function(a){var b=a[0];a[1];return!(j||(j=d("I64"))).equal(b.contactId,g)}))]));a=e[0];e=e[1];a=a==null?void 0:a.typingIndicatorDisabled;a=a!=null?(j||(j=d("I64"))).equal((k||(k=d("LSIntEnum"))).ofNumber(c("LSTypingIndicatorSettingState").DISABLED),a):!1;return e!=null&&!a}else return!c("mwCMIsAnyCMThread")(f)});return m.apply(this,arguments)}function a(a){var b=(h||(h=c("useReStore")))(),e=d("MWPActor.react").useActor(),g=c("MessengerWebUXLogger").useInteractionLogger();return d("Int64Hooks").useCallbackInt64(function(h){if(!(j||(j=d("I64"))).ge(a.authorityLevel,(k||(k=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE)))return;c("promiseDone")(l(b,a.threadKey,a.threadType,e).then(function(e){if(e){g==null||g({eventName:"send_typing_indicators",threadKey:a.threadKey,threadType:a.threadType});return b.runInTransaction(function(b){return c("LSSendTypingIndicatorStoredProcedure")(c("LSFactory")(b),{isGroupThread:d("LSMessagingThreadTypeUtil").isGroup(a.threadType),isTyping:h,threadKey:a.threadKey})},"readwrite",void 0,void 0,f.id+":134")}}))},[a.authorityLevel,a.threadKey,a.threadType,b,e,g])}g["default"]=a}),98);
__d("IGDComposer.react",["fbt","CometComponentWithKeyCommands.react","CometKeys","DisappearingMessagesMode","I64","IGDAiAgentsUtils","IGDChatTabsEnv","IGDChatTabsStateContext.react","IGDComposerEditContainer.react","IGDComposerReplyView.react","IGDComposerView.react","IGDDMModeContextProvider","IGDEqualityUtils","IGDInstamadilloUtils","IGDSupportedFileTypes","IGDThreadlineContext","LSIntEnum","LSPendingTasksPluginType","MAWEditMessageContext.react","MWMediaManager","MWPReplyContext.react","PolarisUA","react","react-compiler-runtime","useIGDMediaMangerUploadFailedToast","useMWPComposerEditor","useMWV2FileDropzoneRegisterHandler","useMWV2OnSendOpenMessage","useOnTypingStateChanged","useStableCallback","useStableValue"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=i||(i=d("react"));b=i;b.useCallback;var m=b.useContext;b.useMemo;function n(a){var b=d("react-compiler-runtime").c(53),e=a.onSendMessage;a=a.thread;var f=m(d("MWPReplyContext.react").MWPReplyContext),g=f.clearReply,i=f.reply;f=m(d("MAWEditMessageContext.react").Context);var k=f.editMessageData,n=f.setEditMessageData;f=m(d("IGDThreadlineContext").IGDThreadlineContext);f=f.isThreadlineComposerFocused;var p=c("useIGDMediaMangerUploadFailedToast")(),q;b[0]!==p||b[1]!==a?(q={showUploadFailureToast:p,thread:a},b[0]=p,b[1]=a,b[2]=q):q=b[2];p=d("MWMediaManager").useMediaManager(q);q=p.handleFileSelect;var r=c("useOnTypingStateChanged")(a),s=a.threadSubtype,t;b[3]!==s?(t=d("IGDAiAgentsUtils").isAiThread(s),b[3]=s,b[4]=t):t=b[4];s=t;c("useMWV2FileDropzoneRegisterHandler")(q);b[5]!==p.mediaStaging||b[6]!==e||b[7]!==r||b[8]!==a.threadKey?(t={composerEntrypointForLogging:"IGDOpenComposer",isPreviewThread:!1,mediaStaging:p.mediaStaging,onSendMessage:e,onTypingStateChanged:r,threadKey:a.threadKey},b[5]=p.mediaStaging,b[6]=e,b[7]=r,b[8]=a.threadKey,b[9]=t):t=b[9];p=c("useMWPComposerEditor")(t);var u=p.editor;r=p.editorElementRef;t=p.hasStuffToSend;p=p.sendMessage;var v;b[10]!==u||b[11]!==e?(v=function(){for(var b=arguments.length,a=new Array(b),c=0;c<b;c++)a[c]=arguments[c];var d=a;e.apply(void 0,d);u.focus(o)},b[10]=u,b[11]=e,b[12]=v):v=b[12];v=v;var w=a.threadKey,x=d("IGDChatTabsStateContext.react").useIGDChatTabsDispatch(),y=d("IGDChatTabsEnv").useIsChatTabsDisplay(),z;b[13]!==g||b[14]!==x||b[15]!==k||b[16]!==y||b[17]!==i||b[18]!==n||b[19]!==w?(z=function(){if(!i&&!k)if(y)x==null||x({threadKey:(j||(j=d("I64"))).to_string(w),type:"close_tab"});else return;k?n(null):i&&g(w,!0)},b[13]=g,b[14]=x,b[15]=k,b[16]=y,b[17]=i,b[18]=n,b[19]=w,b[20]=z):z=b[20];z=z;var A;b[21]===Symbol["for"]("react.memo_cache_sentinel")?(A={key:c("CometKeys").ESCAPE},b[21]=A):A=b[21];var B;b[22]!==k||b[23]!==y||b[24]!==i?(B=!i&&y&&h._(/*BTDS*/"Close chat tab")||i&&h._(/*BTDS*/"Cancel reply")||k&&h._(/*BTDS*/"Cancel edit")||"",b[22]=k,b[23]=y,b[24]=i,b[25]=B):B=b[25];b[26]!==z||b[27]!==B?(A=[{command:A,description:B,handler:z,triggerFromInputs:!0}],b[26]=z,b[27]=B,b[28]=A):A=b[28];z=A;B=z;b[29]!==f||b[30]!==i||b[31]!==a?(A=i!=null&&!f?l.jsx(c("IGDComposerReplyView.react"),{messageId:i.messageId,messageTimestamp:i.timestampMs,thread:a}):null,b[29]=f,b[30]=i,b[31]=a,b[32]=A):A=b[32];b[33]!==k||b[34]!==a?(z=k!=null&&l.jsx(c("IGDComposerEditContainer.react"),{editMessageData:k,thread:a}),b[33]=k,b[34]=a,b[35]=z):z=b[35];var C;b[36]!==k||b[37]!==u||b[38]!==r||b[39]!==t||b[40]!==s||b[41]!==f||b[42]!==q||b[43]!==v||b[44]!==i||b[45]!==p||b[46]!==a?(C=k==null?l.jsx(c("IGDComposerView.react"),{attachmentsSupported:i==null||f,editor:u,editorElementRef:r,emojisSupported:!d("PolarisUA").isMobile()&&!s,hasStuffToSend:t,onAttachmentsAdded:q,onSendMessage:v,policyProduct:"messaging_lightswitch",sendMessage:p,supportedFileTypes:d("IGDSupportedFileTypes").getIGDSupportedFileTypes(d("PolarisUA").isMobile()),surface:"mwp_igd_composer",thread:a}):null,b[36]=k,b[37]=u,b[38]=r,b[39]=t,b[40]=s,b[41]=f,b[42]=q,b[43]=v,b[44]=i,b[45]=p,b[46]=a,b[47]=C):C=b[47];b[48]!==B||b[49]!==z||b[50]!==C||b[51]!==A?(r=l.jsx("div",{children:l.jsxs(c("CometComponentWithKeyCommands.react"),{commandConfigs:B,children:[A,z,C]})}),b[48]=B,b[49]=z,b[50]=C,b[51]=A,b[52]=r):r=b[52];return r}function o(){}function a(a){var b=d("react-compiler-runtime").c(19),e=a.afterSendMessage;a=a.thread;var f=m(d("IGDDMModeContextProvider").IGDDMModeContext),g=f.dmMode;f=f.lastSetTtlSec;var h;b[0]!==a?(h=d("IGDInstamadilloUtils").isInstamadilloTransportEnabled(a)?(k||(k=d("LSIntEnum"))).ofNumber(c("LSPendingTasksPluginType").IGD_INSTAMADILLO):void 0,b[0]=a,b[1]=h):h=b[1];h=h;var i;b[2]!==g||b[3]!==f?(i=g===c("DisappearingMessagesMode").ON&&f!=null?(j||(j=d("I64"))).of_int32(f):void 0,b[2]=g,b[3]=f,b[4]=i):i=b[4];g=p(a,e,h,i);b[5]!==a.authorityLevel||b[6]!==a.capabilities||b[7]!==a.capabilities2||b[8]!==a.capabilities3||b[9]!==a.capabilities4||b[10]!==a.capabilities5||b[11]!==a.consistentThreadFbid||b[12]!==a.threadKey||b[13]!==a.threadSubtype||b[14]!==a.threadType?(f={authorityLevel:a.authorityLevel,capabilities:a.capabilities,capabilities2:a.capabilities2,capabilities3:a.capabilities3,capabilities4:a.capabilities4,capabilities5:a.capabilities5,consistentThreadFbid:a.consistentThreadFbid,threadKey:a.threadKey,threadSubtype:a.threadSubtype,threadType:a.threadType},b[5]=a.authorityLevel,b[6]=a.capabilities,b[7]=a.capabilities2,b[8]=a.capabilities3,b[9]=a.capabilities4,b[10]=a.capabilities5,b[11]=a.consistentThreadFbid,b[12]=a.threadKey,b[13]=a.threadSubtype,b[14]=a.threadType,b[15]=f):f=b[15];e=d("useStableValue").useStableValue(f,d("IGDEqualityUtils").shallowEqualI64);b[16]!==g||b[17]!==e?(h=l.jsx(n,{onSendMessage:g,thread:e}),b[16]=g,b[17]=e,b[18]=h):h=b[18];i=h;return i}function p(a,b,e,f){var g=d("react-compiler-runtime").c(5),h;g[0]!==b||g[1]!==f||g[2]!==e||g[3]!==a?(h={afterSendMessage:b,ephemeralDurationInSec:f,isIGDW:!0,pluginType:e,skipUrlPreviewGen:!1,thread:a},g[0]=b,g[1]=f,g[2]=e,g[3]=a,g[4]=h):h=g[4];b=c("useMWV2OnSendOpenMessage")(h);return c("useStableCallback")(b)}g["default"]=a}),226);
__d("IGDDisappearingMessagesBlockedComposer.react",["fbt","MWXComposerBanner.react","MessengerWebUXLogger","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(7),e=a.extraLoggingData;a=a.loggingEventName;var f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=h._(/*BTDS*/"Disappearing messages aren't available on Instagram.com yet"),b[0]=f):f=b[0];f=f;var g;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(g=h._(/*BTDS*/"To send and receive new messages in this chat, use the Instagram app."),b[1]=g):g=b[1];g=g;var i;b[2]!==e||b[3]!==a?(i={eventName:a,extraData:e},b[2]=e,b[3]=a,b[4]=i):i=b[4];e=c("MessengerWebUXLogger").useImpressionLoggerRef(i);b[5]!==e?(a=j.jsx(c("MWXComposerBanner.react"),{bodyText:g,headerText:f,ref:e}),b[5]=e,b[6]=a):a=b[6];return a}g["default"]=a}),226);
__d("IGDReachableInviteBanner.react",["fbt","FBLogger","I64","IGDInviteModelUtils","Link.react","MWPActor.react","MWXComposerBanner.react","MessengerWebUXLogger","ReQL","ReQLSuspense","XInstagramHelpDotComContentControllerRouteBuilder","react","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=k||d("react");function a(a){var b=d("react-compiler-runtime").c(13),e=a.loggingEventName,g=a.threadKey,k=(i||(i=c("useReStore")))(),m=d("MWPActor.react").useActor();a=(a=d("ReQLSuspense").useFirst(function(){return d("ReQL").mergeJoin(d("ReQL").fromTableAscending(k.tables.participants).getKeyRange(g).filter(function(a){a=a.contactId;return!(j||(j=d("I64"))).equal(a,m)}),d("ReQL").fromTableAscending(k.tables.contacts))},[k.tables.contacts,k.tables.participants,g,m],f.id+":36"))!=null?a:[null,null];a=a[1];var n;b[0]!==e?(n={eventName:e},b[0]=e,b[1]=n):n=b[1];e=c("MessengerWebUXLogger").useImpressionLoggerRef(n);if(a==null){c("FBLogger")("igd_web").mustfix("Contact data is null in IGDReachableInviteBanner");return null}if(b[2]===Symbol["for"]("react.memo_cache_sentinel")){n=(n=c("XInstagramHelpDotComContentControllerRouteBuilder").buildUri({cms_id:"477434105621119"}).setDomain("help.instagram.com"))==null||(n=n.setProtocol("https"))==null?void 0:n.toString();b[2]=n}else n=b[2];n=n;var o;b[3]!==a.name||b[4]!==a.secondaryName?(o=h._(/*BTDS*/"Invite {name} ({secondaryName}) to chat",[h._param("name",a.name),h._param("secondaryName",a.secondaryName)]),b[3]=a.name,b[4]=a.secondaryName,b[5]=o):o=b[5];a=o;b[6]!==n?(o=h._(/*BTDS*/"You can only send one message in this invite. Remember to follow our {link} and be respectful when messaging others for the first time.",[h._param("link",l.jsx(c("Link.react"),{href:n,children:"Community Standards"}))]),b[6]=n,b[7]=o):o=b[7];n=o;b[8]===Symbol["for"]("react.memo_cache_sentinel")?(o=h._(/*BTDS*/"You can send one message in this request. Once they accept, you can send more messages."),b[8]=o):o=b[8];o=o;var p=d("IGDInviteModelUtils").shouldUseInviteModelV2();o=p?o:n;n=p?void 0:a;b[9]!==e||b[10]!==o||b[11]!==n?(p=l.jsx(c("MWXComposerBanner.react"),{bodyText:o,headerText:n,ref:e}),b[9]=e,b[10]=o,b[11]=n,b[12]=p):p=b[12];return p}g["default"]=a}),226);
__d("IGDTLCBlockedComposer.react",["fbt","IGDThreadListNewMessageLoggingDataContext","MWXComposerBanner.react","MessengerWebUXLogger","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(8),e=a.extraLoggingData;a=a.loggingEventName;var f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=h._(/*BTDS*/"End-to-end encrypted messages aren't available on Instagram.com yet"),b[0]=f):f=b[0];f=f;var g;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(g=h._(/*BTDS*/"To send and receive new messages in this chat, use the Instagram app."),b[1]=g):g=b[1];g=g;var i=d("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceIdContext(),k;b[2]!==e||b[3]!==i||b[4]!==a?(k={eventName:a,extraData:e,flowInstanceId:i},b[2]=e,b[3]=i,b[4]=a,b[5]=k):k=b[5];e=c("MessengerWebUXLogger").useImpressionLoggerRef(k);b[6]!==e?(i=j.jsx(c("MWXComposerBanner.react"),{bodyText:g,headerText:f,ref:e}),b[6]=e,b[7]=i):i=b[7];return i}g["default"]=a}),226);
__d("LSNullstateCTAType",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,GET_STARTED:1,ICEBREAKER:2,PRIVACY_DISCLOSURE:3,MP_EMPTY_ICEBREAKER:4});f["default"]=a}),66);
__d("MWPartnershipThreadUnavailableComposer.react",["fbt","MWXComposerBanner.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=h._(/*BTDS*/"Creator can\u2019t receive partnership messages right now.");function a(){return j.jsx(c("MWXComposerBanner.react"),{bodyText:k})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWV2ErrorComposer.react",["fbt","MDSTextPairing.react","MWXText.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){return j.jsx("div",babelHelpers["extends"]({className:"xcrg951 x8cjs6t x13fuv20 x178xt8z x1a8lsjc x1a4sjiy xvahy20 x889kno"},{children:j.jsx(c("MDSTextPairing.react"),{headline:h._(/*BTDS*/"Something isn't working."),headlineColor:"secondary",level:4,meta:j.jsx(c("MWXText.react"),{numberOfLines:2,type:"meta3",children:h._(/*BTDS*/"This may be because of a technical error we're working to fix.")}),reduceEmphasis:!0,textAlign:"center"})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("isFeatureLimitEnabled",["qex"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("qex")._("588")===!0}g["default"]=a}),98);
__d("usePrecompileURLMatcher",["URLMatcher","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useEffect,j=!1;function a(){var a=d("react-compiler-runtime").c(1),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=[],a[0]=b):b=a[0];i(k,b)}function k(){if(j)return;j=!0;c("URLMatcher").compilePermissiveHostPathMatcher()}g["default"]=a}),98);
__d("IGDComposerCommon.react",["CometErrorBoundary.react","CometPlaceholder.react","FBLogger","I64","IGDComposer.react","IGDComposerCommonPlaceholder.react","IGDDisappearingMessagesBlockedComposer.react","IGDInstamadilloUtils","IGDInviteModelUtils","IGDReachableInviteBanner.react","IGDTLCBlockedComposer.react","JSResourceForInteraction","LSContactBitOffset","LSContactBlockedByViewerStatus","LSContactReachabilityStatusType","LSIntEnum","LSMessagingThreadTypeUtil","LSNullstateCTAType","MWCMThreadTypes.react","MWPartnershipThreadUnavailableComposer.react","MWV2ErrorComposer.react","ReQL","ReQLSuspense","ThreadStatus","WebUXLoggingSurfaceContextProvider","getInstamadilloLoggingExtraData","isFeatureLimitEnabled","lazyLoadComponent","react","react-compiler-runtime","useContactReachabilityStatus","useIsReadOnlyFeatureLimited","usePrecompileURLMatcher","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=i||d("react"),m=c("lazyLoadComponent")(c("JSResourceForInteraction")("IGDFeatureLimitsBlockedComposer.react").__setRef("IGDComposerCommon.react")),n=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWPLeftGroupComposer.react").__setRef("IGDComposerCommon.react")),o=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWPCannotReplyFallbackComposer.react").__setRef("IGDComposerCommon.react")),p=c("lazyLoadComponent")(c("JSResourceForInteraction")("IGDComposerRestricted.react").__setRef("IGDComposerCommon.react")),q=c("lazyLoadComponent")(c("JSResourceForInteraction")("IGDUnavailableComposer.react").__setRef("IGDComposerCommon.react")),r=c("lazyLoadComponent")(c("JSResourceForInteraction")("IGDBlockedUserComposer.react").__setRef("IGDComposerCommon.react")),s=c("lazyLoadComponent")(c("JSResourceForInteraction")("IGDChannelEndedComposer.react").__setRef("IGDComposerCommon.react")),t=c("lazyLoadComponent")(c("JSResourceForInteraction")("IGDInviteSentComposer.react").__setRef("IGDComposerCommon.react"));function u(a){var b=d("react-compiler-runtime").c(9),e=a.afterSendMessage,f=a.showReachableInviteBanner;a=a.thread;var g;b[0]!==f||b[1]!==a?(g=f&&l.jsx(c("IGDReachableInviteBanner.react"),{loggingEventName:"igd_invite_model_reachable_banner",threadKey:a.threadKey}),b[0]=f,b[1]=a,b[2]=g):g=b[2];b[3]!==e||b[4]!==a?(f=l.jsx(c("IGDComposer.react"),{afterSendMessage:e,thread:a}),b[3]=e,b[4]=a,b[5]=f):f=b[5];b[6]!==g||b[7]!==f?(e=l.jsx(c("CometErrorBoundary.react"),{fallback:v,children:l.jsx(c("CometPlaceholder.react"),{fallback:null,children:l.jsxs(d("WebUXLoggingSurfaceContextProvider").WebUXSurfaceLoggingContext.Provider,{value:"thread_chat_composer",children:[g,f]})})}),b[6]=g,b[7]=f,b[8]=e):e=b[8];return e}function v(){return l.jsx(c("MWV2ErrorComposer.react"),{})}v.displayName=v.name+" [from "+f.id+"]";function w(a){var b=d("react-compiler-runtime").c(8),e=a.afterSendMessage;a=a.thread;var f=a.cannotReplyReason==="viewer_not_subscribed"||a.cannotReplyReason==="read_only",g=a.threadStatus!=null&&(j||(j=d("I64"))).equal(a.threadStatus,(j||(j=d("I64"))).of_int32(c("ThreadStatus").PAUSED)),h=a.threadSubtype!=null&&d("MWCMThreadTypes.react").isIGBroadcastChannelThread(a.threadSubtype),i=a.cannotReplyReason==="partnership_thread_disabled_for_creator";if(f){b[0]!==a?(f=l.jsx(n,{thread:a}),b[0]=a,b[1]=f):f=b[1];return f}else if(h&&g){b[2]===Symbol["for"]("react.memo_cache_sentinel")?(f=l.jsx(s,{}),b[2]=f):f=b[2];return f}else if(i){b[3]===Symbol["for"]("react.memo_cache_sentinel")?(h=l.jsx(c("MWPartnershipThreadUnavailableComposer.react"),{}),b[3]=h):h=b[3];return h}else if(a.cannotReplyReason!=null){b[4]===Symbol["for"]("react.memo_cache_sentinel")?(g=l.jsx(o,{}),b[4]=g):g=b[4];return g}b[5]!==e||b[6]!==a?(f=l.jsx(u,{afterSendMessage:e,showReachableInviteBanner:!1,thread:a}),b[5]=e,b[6]=a,b[7]=f):f=b[7];return f}function x(a){var b=d("react-compiler-runtime").c(25),e=a.afterSendMessage,f=a.otherUser;a=a.thread;var g=!(j||(j=d("I64"))).equal(f.blockedByViewerStatus,(k||(k=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED)),h=d("LSContactBitOffset").has(0,f),i=d("LSContactBitOffset").has(1,f);h=!h||!i;i=f.blockedSinceTimestampMs!=null?!1:h;h=f.contactReachabilityStatusType;var m;b[0]!==h?(m=d("IGDInviteModelUtils").shouldShowTextOnlyComposerWithBanner(h),b[0]=h,b[1]=m):m=b[1];m=m;var n=d("IGDInviteModelUtils").shouldShowBlockComposer(h),o=d("IGDInviteModelUtils").shouldShowTextOnlyComposer(h);h=h!=null?(j||(j=d("I64"))).equal((k||(k=d("LSIntEnum"))).ofNumber(c("LSContactReachabilityStatusType").REACHABLE),h)||m||o||n:!0;o=d("LSContactBitOffset").has(66,f);var s=d("IGDInstamadilloUtils").isInstamadilloCutover(a),v=d("IGDInstamadilloUtils").isDMHardblockedEnabled(a),w;b[2]!==a?(w=c("getInstamadilloLoggingExtraData")(a),b[2]=a,b[3]=w):w=b[3];w=w;if(h)if(g){b[4]===Symbol["for"]("react.memo_cache_sentinel")?(h=l.jsx(c("IGDComposerCommonPlaceholder.react"),{height:189}),b[4]=h):h=b[4];b[5]!==f||b[6]!==a?(g=l.jsx(c("CometPlaceholder.react"),{fallback:h,children:l.jsx(r,{contact:f,thread:a})}),b[5]=f,b[6]=a,b[7]=g):g=b[7];return g}else if(o){b[8]===Symbol["for"]("react.memo_cache_sentinel")?(h=l.jsx(c("IGDComposerCommonPlaceholder.react"),{height:128}),b[8]=h):h=b[8];b[9]!==f||b[10]!==a?(g=l.jsx(c("CometPlaceholder.react"),{fallback:h,children:l.jsx(p,{contact:f,thread:a})}),b[9]=f,b[10]=a,b[11]=g):g=b[11];return g}else if(i){b[12]===Symbol["for"]("react.memo_cache_sentinel")?(o=l.jsx(q,{}),b[12]=o):o=b[12];return o}else if(s){b[13]===Symbol["for"]("react.memo_cache_sentinel")?(h=l.jsx(c("IGDComposerCommonPlaceholder.react"),{height:128}),b[13]=h):h=b[13];b[14]!==w?(f=l.jsx(c("CometPlaceholder.react"),{fallback:h,children:l.jsx(c("IGDTLCBlockedComposer.react"),{extraLoggingData:w,loggingEventName:"igd_fallback_thread_disabled"})}),b[14]=w,b[15]=f):f=b[15];return f}else if(v){b[16]===Symbol["for"]("react.memo_cache_sentinel")?(g=l.jsx(c("IGDComposerCommonPlaceholder.react"),{height:128}),b[16]=g):g=b[16];b[17]!==w?(i=l.jsx(c("CometPlaceholder.react"),{fallback:g,children:l.jsx(c("IGDDisappearingMessagesBlockedComposer.react"),{extraLoggingData:w,loggingEventName:"igd_fallback_thread_disabled"})}),b[17]=w,b[18]=i):i=b[18];return i}else if(n&&(d("IGDInviteModelUtils").shouldUseInviteModelV2()||d("IGDInviteModelUtils").shouldUseInviteModel())){b[19]===Symbol["for"]("react.memo_cache_sentinel")?(o=l.jsx(t,{loggingEventName:"igd_invite_model_invite_sent"}),b[19]=o):o=b[19];return o}else{b[20]!==e||b[21]!==m||b[22]!==a?(s=l.jsx(u,{afterSendMessage:e,showReachableInviteBanner:m,thread:a}),b[20]=e,b[21]=m,b[22]=a,b[23]=s):s=b[23];return s}else{b[24]===Symbol["for"]("react.memo_cache_sentinel")?(h=l.jsx(q,{}),b[24]=h):h=b[24];return h}}function y(a){var b=d("react-compiler-runtime").c(17),e=a.afterSendMessage,g=a.hasActivity,i=a.thread,n=(h||(h=c("useReStore")))();b[0]!==n.tables.thread_nullstate||b[1]!==i.threadKey?(a=function(){return d("ReQL").fromTableAscending(n.tables.thread_nullstate).getKeyRange(i.threadKey)},b[0]=n.tables.thread_nullstate,b[1]=i.threadKey,b[2]=a):a=b[2];var o;b[3]!==n||b[4]!==i.threadKey?(o=[n,i.threadKey],b[3]=n,b[4]=i.threadKey,b[5]=o):o=b[5];a=d("ReQLSuspense").useFirst(a,o,f.id+":383");b[6]!==a?(o=a!=null?(j||(j=d("I64"))).equal(a.ctaType,(k||(k=d("LSIntEnum"))).ofNumber(c("LSNullstateCTAType").GET_STARTED)):!1,b[6]=a,b[7]=o):o=b[7];a=o;o=g;g=d("LSMessagingThreadTypeUtil").isArmadilloSecure(i.threadType);g=c("useIsReadOnlyFeatureLimited")()&&(!g||c("isFeatureLimitEnabled")());var p=d("useContactReachabilityStatus").useOtherUser(n,i.threadKey,i.threadType),q;b[8]!==e||b[9]!==a||b[10]!==o||b[11]!==g||b[12]!==p||b[13]!==i?(q=a&&!o?null:g?l.jsx(m,{}):d("LSMessagingThreadTypeUtil").isOneToOne(i.threadType)?p!=null?l.jsx(x,{afterSendMessage:e,otherUser:p[1],thread:i}):c("FBLogger")("igd_web").mustfix("Missing contact row"):l.jsx(w,{afterSendMessage:e,thread:i}),b[8]=e,b[9]=a,b[10]=o,b[11]=g,b[12]=p,b[13]=i,b[14]=q):q=b[14];b[15]!==q?(e=l.jsx(l.Fragment,{children:q}),b[15]=q,b[16]=e):e=b[16];return e}function a(a){var b=d("react-compiler-runtime").c(10),e=a.afterSendMessage,g=a.thread,i=(h||(h=c("useReStore")))();c("usePrecompileURLMatcher")();b[0]!==i.tables.threads||b[1]!==g.threadKey?(a=function(){return d("ReQL").fromTableAscending(i.tables.threads,["lastActivityTimestampMs"]).getKeyRange(g.threadKey).map(A)},b[0]=i.tables.threads,b[1]=g.threadKey,b[2]=a):a=b[2];var k;b[3]!==i||b[4]!==g.threadKey?(k=[i,g.threadKey],b[3]=i,b[4]=g.threadKey,b[5]=k):k=b[5];a=d("ReQLSuspense").useFirst(a,k,f.id+":463");k=a!=null?!(j||(j=d("I64"))).equal(a,(j||(j=d("I64"))).zero):!0;b[6]!==e||b[7]!==k||b[8]!==g?(a=l.jsx(c("CometErrorBoundary.react"),{fallback:z,children:l.jsx(c("CometPlaceholder.react"),{fallback:null,children:l.jsx(y,{afterSendMessage:e,hasActivity:k,thread:g})})}),b[6]=e,b[7]=k,b[8]=g,b[9]=a):a=b[9];return a}function z(){return l.jsx(c("MWV2ErrorComposer.react"),{})}z.displayName=z.name+" [from "+f.id+"]";function A(a){return a.lastActivityTimestampMs}g["default"]=a}),98);